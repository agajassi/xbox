/**cv-player 0.12.0; 2020 Aug 26 09:04:27 PM UTC**/
!function(){var i,_=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),b=this&&this.__decorate||function(e,t,r,i){var o,a=arguments.length,n=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(n=(a<3?o(n):3<a?o(t,r,n):o(t,r))||n);return 3<a&&n&&Object.defineProperty(t,r,n),n},C=(this&&this.__awaiter,this&&this.__generator,this&&this.__assign||Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}),l=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<r;t++)for(var a=arguments[t],n=0,s=a.length;n<s;n++,o++)i[o]=a[n];return i};!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).cvp=e()}(function(){return function a(n,s,c){function l(t,e){if(!s[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var o=s[t]={exports:{}};n[t][0].call(o.exports,function(e){return l(n[t][1][e]||e)},o,o.exports,a,n,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,r){t.exports=e("./lib/axios")},{"./lib/axios":3}],2:[function(u,e,t){"use strict";var d=u("./../utils"),p=u("./../core/settle"),m=u("./../helpers/buildURL"),f=u("./../helpers/parseHeaders"),y=u("./../helpers/isURLSameOrigin"),h=u("../core/createError");e.exports=function(l){return new Promise(function(r,i){var o=l.data,a=l.headers;d.isFormData(o)&&delete a["Content-Type"];var e,t,n,s,c=new XMLHttpRequest;if(l.auth&&(e=l.auth.username||"",t=l.auth.password||"",a.Authorization="Basic "+btoa(e+":"+t)),c.open(l.method.toUpperCase(),m(l.url,l.params,l.paramsSerializer),!0),c.timeout=l.timeout,c.onreadystatechange=function(){var e,t;c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&(e="getAllResponseHeaders"in c?f(c.getAllResponseHeaders()):null,t={data:l.responseType&&"text"!==l.responseType?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:e,config:l,request:c},p(r,i,t),c=null)},c.onerror=function(){i(h("Network Error",l,null,c)),c=null},c.ontimeout=function(){i(h("timeout of "+l.timeout+"ms exceeded",l,"ECONNABORTED",c)),c=null},d.isStandardBrowserEnv()&&(n=u("./../helpers/cookies"),(s=(l.withCredentials||y(l.url))&&l.xsrfCookieName?n.read(l.xsrfCookieName):void 0)&&(a[l.xsrfHeaderName]=s)),"setRequestHeader"in c&&d.forEach(a,function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete a[t]:c.setRequestHeader(t,e)}),l.withCredentials&&(c.withCredentials=!0),l.responseType)try{c.responseType=l.responseType}catch(e){if("json"!==l.responseType)throw e}"function"==typeof l.onDownloadProgress&&c.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(e){c&&(c.abort(),i(e),c=null)}),void 0===o&&(o=null),c.send(o)})}},{"../core/createError":9,"./../core/settle":12,"./../helpers/buildURL":16,"./../helpers/cookies":18,"./../helpers/isURLSameOrigin":20,"./../helpers/parseHeaders":22,"./../utils":24}],3:[function(e,t,r){"use strict";var i=e("./utils"),o=e("./helpers/bind"),a=e("./core/Axios"),n=e("./defaults");function s(e){var t=new a(e),r=o(a.prototype.request,t);return i.extend(r,a.prototype,t),i.extend(r,t),r}var c=s(n);c.Axios=a,c.create=function(e){return s(i.merge(n,e))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(e){return Promise.all(e)},c.spread=e("./helpers/spread"),t.exports=c,t.exports.default=c},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./defaults":14,"./helpers/bind":15,"./helpers/spread":23,"./utils":24}],4:[function(e,t,r){"use strict";function i(e){this.message=e}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},{}],5:[function(e,t,r){"use strict";var i=e("./Cancel");function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),t(r.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},{"./Cancel":4}],6:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],7:[function(e,t,r){"use strict";var o=e("./../defaults"),a=e("./../utils"),i=e("./InterceptorManager"),n=e("./dispatchRequest");function s(e){this.defaults=e,this.interceptors={request:new i,response:new i}}s.prototype.request=function(e,t){"string"==typeof e&&(e=a.merge({url:arguments[0]},t)),(e=a.merge(o,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var r=[n,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){r.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){r.push(e.fulfilled,e.rejected)});r.length;)i=i.then(r.shift(),r.shift());return i},a.forEach(["delete","get","head","options"],function(r){s.prototype[r]=function(e,t){return this.request(a.merge(t||{},{method:r,url:e}))}}),a.forEach(["post","put","patch"],function(i){s.prototype[i]=function(e,t,r){return this.request(a.merge(r||{},{method:i,url:e,data:t}))}}),t.exports=s},{"./../defaults":14,"./../utils":24,"./InterceptorManager":8,"./dispatchRequest":10}],8:[function(e,t,r){"use strict";var i=e("./../utils");function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},{"./../utils":24}],9:[function(e,t,r){"use strict";var n=e("./enhanceError");t.exports=function(e,t,r,i,o){var a=new Error(e);return n(a,t,r,i,o)}},{"./enhanceError":11}],10:[function(e,t,r){"use strict";var i=e("./../utils"),o=e("./transformData"),a=e("../cancel/isCancel"),n=e("../defaults"),s=e("./../helpers/isAbsoluteURL"),c=e("./../helpers/combineURLs");function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!s(t.url)&&(t.url=c(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||n.adapter)(t).then(function(e){return l(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(l(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},{"../cancel/isCancel":6,"../defaults":14,"./../helpers/combineURLs":17,"./../helpers/isAbsoluteURL":19,"./../utils":24,"./transformData":13}],11:[function(e,t,r){"use strict";t.exports=function(e,t,r,i,o){return e.config=t,r&&(e.code=r),e.request=i,e.response=o,e}},{}],12:[function(e,t,r){"use strict";var o=e("./createError");t.exports=function(e,t,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?t(o("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},{"./createError":9}],13:[function(e,t,r){"use strict";var i=e("./../utils");t.exports=function(t,r,e){return i.forEach(e,function(e){t=e(t,r)}),t}},{"./../utils":24}],14:[function(s,c,e){(function(e){"use strict";var r=s("./utils"),i=s("./helpers/normalizeHeaderName"),t={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,n={adapter:("undefined"!=typeof XMLHttpRequest?a=s("./adapters/xhr"):void 0!==e&&(a=s("./adapters/http")),a),transformRequest:[function(e,t){return i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(e){n.headers[e]={}}),r.forEach(["post","put","patch"],function(e){n.headers[e]=r.merge(t)}),c.exports=n}).call(this,s("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./helpers/normalizeHeaderName":21,"./utils":24,_process:28}],15:[function(e,t,r){"use strict";t.exports=function(r,i){return function(){for(var e=new Array(arguments.length),t=0;t<e.length;t++)e[t]=arguments[t];return r.apply(i,e)}}},{}],16:[function(e,t,r){"use strict";var a=e("./../utils");function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(e,t,r){if(!t)return e;var i,o=r?r(t):a.isURLSearchParams(t)?t.toString():(i=[],a.forEach(t,function(e,t){null!=e&&(a.isArray(e)?t+="[]":e=[e],a.forEach(e,function(e){a.isDate(e)?e=e.toISOString():a.isObject(e)&&(e=JSON.stringify(e)),i.push(n(t)+"="+n(e))}))}),i.join("&"));return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},{"./../utils":24}],17:[function(e,t,r){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],18:[function(e,t,r){"use strict";var s=e("./../utils");t.exports=s.isStandardBrowserEnv()?{write:function(e,t,r,i,o,a){var n=[];n.push(e+"="+encodeURIComponent(t)),s.isNumber(r)&&n.push("expires="+new Date(r).toGMTString()),s.isString(i)&&n.push("path="+i),s.isString(o)&&n.push("domain="+o),!0===a&&n.push("secure"),document.cookie=n.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},{"./../utils":24}],19:[function(e,t,r){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],20:[function(e,t,r){"use strict";var i,o,a,n=e("./../utils");function s(e){var t=e;return o&&(a.setAttribute("href",t),t=a.href),a.setAttribute("href",t),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:"/"===a.pathname.charAt(0)?a.pathname:"/"+a.pathname}}t.exports=n.isStandardBrowserEnv()?(o=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),i=s(window.location.href),function(e){var t=n.isString(e)?s(e):e;return t.protocol===i.protocol&&t.host===i.host}):function(){return!0}},{"./../utils":24}],21:[function(e,t,r){"use strict";var o=e("../utils");t.exports=function(r,i){o.forEach(r,function(e,t){t!==i&&t.toUpperCase()===i.toUpperCase()&&(r[i]=e,delete r[t])})}},{"../utils":24}],22:[function(e,t,r){"use strict";var a=e("./../utils"),n=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,i,o={};return e&&a.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=a.trim(e.substr(0,i)).toLowerCase(),r=a.trim(e.substr(i+1)),t){if(o[t]&&0<=n.indexOf(t))return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([r]):o[t]?o[t]+", "+r:r}}),o}},{"./../utils":24}],23:[function(e,t,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},{}],24:[function(e,t,r){"use strict";var o=e("./helpers/bind"),i=e("is-buffer"),a=Object.prototype.toString;function n(e){return"[object Array]"===a.call(e)}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===a.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}t.exports={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:i,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){var t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer;return t},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function r(){var i={};function e(e,t){"object"==typeof i[t]&&"object"==typeof e?i[t]=r(i[t],e):i[t]=e}for(var t=0,o=arguments.length;t<o;t++)l(arguments[t],e);return i},extend:function(r,e,i){return l(e,function(e,t){r[t]=i&&"function"==typeof e?o(e,i):e}),r},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},{"./helpers/bind":15,"is-buffer":26}],25:[function(H,r,i){(function(j,K){var e,t;e=this,t=function(){"use strict";function c(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,o=void 0,n=function(e,t){p[i]=e,p[i+1]=t,2===(i+=2)&&(o?o(m):A())};var e="undefined"!=typeof window?window:void 0,a=e||{},s=a.MutationObserver||a.WebKitMutationObserver,l="undefined"==typeof self&&void 0!==j&&"[object process]"==={}.toString.call(j),u="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<i;e+=2){(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0}i=0}var f,y,h,E,A=void 0;function T(e,t){var r=this,i=new this.constructor(P);void 0===i[g]&&U(i);var o,a=r._state;return a?(o=arguments[a-1],n(function(){return k(a,i,o,r._result)})):L(r,i,e,t),i}function v(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(P);return R(t,e),t}A=l?function(){return j.nextTick(m)}:s?(y=0,h=new s(m),E=document.createTextNode(""),h.observe(E,{characterData:!0}),function(){E.data=y=++y%2}):u?((f=new MessageChannel).port1.onmessage=m,function(){return f.port2.postMessage(0)}):(void 0===e&&"function"==typeof H?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(m)}:d()}catch(e){return d()}}:d)();var g=Math.random().toString(36).substring(2);function P(){}var N=void 0,S=1,b=2;function _(e,i,o){n(function(t){var r=!1,e=function(e,t,r,i){try{e.call(t,r,i)}catch(e){return e}}(o,i,function(e){r||(r=!0,(i!==e?R:I)(t,e))},function(e){r||(r=!0,M(t,e))},t._label);!r&&e&&(r=!0,M(t,e))},e)}function C(e,t,r){var i,o;t.constructor===e.constructor&&r===T&&t.constructor.resolve===v?(i=e,(o=t)._state===S?I(i,o._result):o._state===b?M(i,o._result):L(o,void 0,function(e){return R(i,e)},function(e){return M(i,e)})):void 0!==r&&c(r)?_(e,t,r):I(e,t)}function R(t,e){if(t===e)M(t,new TypeError("You cannot resolve a promise with itself"));else if(o=typeof(i=e),null===i||"object"!=o&&"function"!=o)I(t,e);else{var r=void 0;try{r=e.then}catch(e){return void M(t,e)}C(t,e,r)}var i,o}function O(e){e._onerror&&e._onerror(e._result),D(e)}function I(e,t){e._state===N&&(e._result=t,e._state=S,0!==e._subscribers.length&&n(D,e))}function M(e,t){e._state===N&&(e._state=b,e._result=t,n(O,e))}function L(e,t,r,i){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+S]=r,o[a+b]=i,0===a&&e._state&&n(D,e)}function D(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i,o=void 0,a=e._result,n=0;n<t.length;n+=3)i=t[n],o=t[n+r],i?k(r,i,o,a):o(a);e._subscribers.length=0}}function k(e,t,r,i){var o=c(r),a=void 0,n=void 0,s=!0;if(o){try{a=r(i)}catch(e){s=!1,n=e}if(t===a)return void M(t,new TypeError("A promises callback cannot return that same promise."))}else a=i;t._state!==N||(o&&s?R(t,a):!1===s?M(t,n):e===S?I(t,a):e===b&&M(t,a))}var x=0;function U(e){e[g]=x++,e._state=void 0,e._result=void 0,e._subscribers=[]}var V=(B.prototype._enumerate=function(e){for(var t=0;this._state===N&&t<e.length;t++)this._eachEntry(e[t],t)},B.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,i=r.resolve;if(i===v){var o,a=void 0,n=void 0,s=!1;try{a=t.then}catch(e){s=!0,n=e}a===T&&t._state!==N?this._settledAt(t._state,e,t._result):"function"!=typeof a?(this._remaining--,this._result[e]=t):r===w?(o=new r(P),s?M(o,n):C(o,t,a),this._willSettleAt(o,e)):this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},B.prototype._settledAt=function(e,t,r){var i=this.promise;i._state===N&&(this._remaining--,e===b?M(i,r):this._result[t]=r),0===this._remaining&&I(i,this._result)},B.prototype._willSettleAt=function(e,t){var r=this;L(e,void 0,function(e){return r._settledAt(S,t,e)},function(e){return r._settledAt(b,t,e)})},B);function B(e,t){this._instanceConstructor=e,this.promise=new e(P),this.promise[g]||U(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}var w=(F.prototype.catch=function(e){return this.then(null,e)},F.prototype.finally=function(t){var r=this.constructor;return c(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)},F);function F(e){this[g]=x++,this._result=this._state=void 0,this._subscribers=[],P!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof F?function(t,e){try{e(function(e){R(t,e)},function(e){M(t,e)})}catch(e){M(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return w.prototype.then=T,w.all=function(e){return new V(this,e).promise},w.race=function(o){var a=this;return r(o)?new a(function(e,t){for(var r=o.length,i=0;i<r;i++)a.resolve(o[i]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},w.resolve=v,w.reject=function(e){var t=new this(P);return M(t,e),t},w._setScheduler=function(e){o=e},w._setAsap=function(e){n=e},w._asap=n,w.polyfill=function(){var e=void 0;if(void 0!==K)e=K;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=w},w.Promise=w},"object"==typeof i&&void 0!==r?r.exports=t():e.ES6Promise=t()}).call(this,H("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],26:[function(e,t,r){t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},{}],27:[function(e,t,r){"use strict";var c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var r,i,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var n in r=Object(arguments[a]))l.call(r,n)&&(o[n]=r[n]);if(c){i=c(r);for(var s=0;s<i.length;s++)u.call(r,i[s])&&(o[i[s]]=r[i[s]])}}return o}},{}],28:[function(e,t,r){var i,o,a=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:n}catch(e){i=n}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var l,u=[],d=!1,p=-1;function m(){d&&l&&(d=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=c(m);d=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,d=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new y(e,t)),1!==u.length||d||c(f)},y.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],29:[function(e,r,t){!function(){"use strict";var a="undefined"!=typeof window&&void 0!==window.document?window.document:{},e=void 0!==r&&r.exports,n=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=t.length,o={};r<i;r++)if((e=t[r])&&e[1]in a){for(r=0;r<e.length;r++)o[t[0][r]]=e[r];return o}return!1}(),i={change:n.fullscreenchange,error:n.fullscreenerror},t={request:function(o){return new Promise(function(e,t){var r=function(){this.off("change",r),e()}.bind(this);this.on("change",r);var i=(o=o||a.documentElement)[n.requestFullscreen]();i instanceof Promise&&i.then(r).catch(t)}.bind(this))},exit:function(){return new Promise(function(e,t){var r,i;this.isFullscreen?(r=function(){this.off("change",r),e()}.bind(this),this.on("change",r),(i=a[n.exitFullscreen]())instanceof Promise&&i.then(r).catch(t)):e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var r=i[e];r&&a.addEventListener(r,t,!1)},off:function(e,t){var r=i[e];r&&a.removeEventListener(r,t,!1)},raw:n};n?(Object.defineProperties(t,{isFullscreen:{get:function(){return Boolean(a[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return a[n.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(a[n.fullscreenEnabled])}}}),e?r.exports=t:window.screenfull=t):e?r.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},{}],30:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdBreakSchedule=void 0;var i=e("../enum/AdBreakType"),o=(a.prototype.destroy=function(){this.breaks=null,this.breaksById=null,this.breaks=null},Object.defineProperty(a.prototype,"adBreaks",{get:function(){return this.breaks},enumerable:!1,configurable:!0}),a.prototype.hasMidRolls=function(){return!!this.breaks.mid.length},a.prototype.hasPostRoll=function(){return!!this.breaks.post},a.prototype.getBreakById=function(e){return this.breaksById[e]||null},a.prototype.updateBreaks=function(e){for(var t,r=[],i=e.length;i--;)e[i].played&&r.push(e[i].start);for(var o in this.breaksById)!(t=this.breaksById[o]).hasPlayed&&0<=r.indexOf(t.streamStartTime)&&(t.hasPlayed=!0)},a.prototype.isBreakPending=function(t,r){return!!this.processMid(function(e){return e.startTime>t&&e.startTime-t<=r?!e.hasPlayed||-1:null})},a.prototype.getBreakForContentSeekTime=function(t){return this.processMid(function(e){return e.startTime<=t?e.hasPlayed?-1:e:null})},a.prototype.hasPlayed=function(e){return this.breaksById[e]&&!0===this.breaksById[e].hasPlayed},a.prototype.markPlayed=function(e){this.breaksById[e]&&(this.breaksById[e].hasPlayed=!0)},a.prototype.processMid=function(e){if(!this.hasMidRolls())return null;for(var t,r=this.breaks.mid,i=r.length;i--;){if(-1==(t=e(r[i])))return null;if(t)return t}return null},a.prototype.createBreaksFromCuepoints=function(e,t){var r,i,o,a,n,s,c=1;e.sort(function(e,t){return e.start-t.start});for(var l=0,u=0,d=e.length;u<d;u++)r=e[u].start,a=(i=e[u].end)-r,t<=(n=r)-l&&(r=-1),l+=a,o=this.makeBrkId(r,0<r?c++:null),(s=this.makeBreak(r,o,n)).endTime=i,s.duration=a,this.addBreak(r,s,o)},a.prototype.createBreaksFromTimes=function(e){var t,r,i=1;e.sort(function(e,t){return e-t});for(var o=0,a=e.length;o<a;o++)t=e[o],r=this.makeBrkId(t,0<t?i++:null),this.addBreak(t,this.makeBreak(t,r),r)},a.prototype.addBreak=function(e,t,r){var i=r.split("_")[0];e<=0?this.breaks[i]=t:this.breaks.mid.push(t),this.breaksById[r]=t},a.prototype.makeBreak=function(e,t,r){return void 0===r&&(r=null),{startTime:e,hasPlayed:!1,streamStartTime:null!==r?r:null,breakId:t,type:0===e?i.AdBreakType.PRE:-1===e?i.AdBreakType.POST:i.AdBreakType.MID}},a.prototype.makeBrkId=function(e,t){return(0===e?"pre":-1===e?"post":"mid")+(0<e?"_"+t:"_0")},a);function a(e,t,r){this.breaks={pre:null,mid:[],post:null},this.breaksById={},e?this.createBreaksFromTimes(e):t&&this.createBreaksFromCuepoints(t,r)}r.AdBreakSchedule=o},{"../enum/AdBreakType":95}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdParamAssembler=void 0;var i=e("../core/QueryString"),c=e("../core/Util"),l=e("./gam_static_params"),o=(u.prototype.assembleStdParams=function(e,t){var r,i,o=l.gam_static_params,a=e.ad.adTagParameters,n=e.ad.viewabilityTracking,s={};for(r in o)s[r]=a[r]||o[r];for(r in a)"cust_params"===r||c.Util.isEmpty(a[r])||(s[r]=a[r]);for(r in n)s[r]=n[r];return s.sz!==u.SZ_DEFAULT||(i=this.getSzStringForPlayback(t.mutedPlayback))&&(s.sz=i),s},u.prototype.getSzStringForPlayback=function(e){return e?u.SZ_MUTED:null},u.prototype.substituteStringForMutedPlayback=function(e){var t=this.getSzStringForPlayback(!0);if(t){var r=new RegExp("sz="+u.SZ_DEFAULT,"g");return e.replace(r,"sz="+t)}return e},u.prototype.queryStrFromObj=function(e,t){return i.QueryString.encode(e)},u.prototype.objFromQueryStr=function(e){return i.QueryString.decode(e)},u.SZ_DEFAULT="640x480",u.SZ_MUTED="640x483",u);function u(){}r.AdParamAssembler=o},{"../core/QueryString":87,"../core/Util":88,"./gam_static_params":44}],32:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DaiStreamManager=void 0;var i,o=e("../app/AppResources"),a=e("../core/Emitter"),n=e("../core/Util"),s=e("../enum/AdBreakType"),c=e("../enum/ErrorCode"),l=e("./AdBreakSchedule"),u=(i=a.Emitter,_(d,i),d.prototype.destroy=function(){this.listenToStreamManager(!1),this.cuePoints=null,this.adService=null,this.sdk=null,this.adBreakSchedule=null,this.mgr=null},d.prototype.getCuePoints=function(){return this.cuePoints||[]},d.prototype.getCuePointsInContentTime=function(){var e=this.cuePoints,t=[];if(!e)return t;for(var r=0,i=e.length;r<i;r++){var o=e[r],a=o.end-o.start,n=this.contentTimeForStreamTime(o.start);t.push({streamTimeStart:o.start,streamTimeEnd:o.start+a,start:n,duration:a,played:o.played})}return t},d.prototype.ignoreAdEvents=function(e){this.isIgnoringEvents=e},d.prototype.setUnlockedBreaks=function(e){this.unlockedBreaks=e},d.prototype.getUnlockedBreaks=function(){return this.unlockedBreaks},d.prototype.addUnlockedBreak=function(e){this.unlockedBreaks.push(e)},d.prototype.hasPostRoll=function(){return this.adBreakSchedule&&this.adBreakSchedule.hasPostRoll()},d.prototype.checkForAdPeriod=function(e,t){for(var r,i,o,a,n=this.cuePoints.length,s=0;s<n;s++)if(o=-.3<(i=e-(r=this.cuePoints[s]).start)&&i<2,a=3<=r.end-e,this.isUnlockedBreak(r)&&o&&a)return this.emit(d.event.AD_PERIOD_STARTED,{streamResumeTime:r.end}),!0;return!1},d.prototype.isUnlockedBreak=function(e){for(var t=this.unlockedBreaks.length;t--;)if(Math.floor(this.unlockedBreaks[t])===Math.floor(e.start))return!0;return!1},d.prototype.getPermittedSeekTime=function(e){if(this.adBreakSchedule&&this.adBreakSchedule.hasMidRolls()){var t=this.mgr.streamTimeForContentTime(e),r=this.adBreakSchedule.getBreakForContentSeekTime(t);if(r){for(var i=this.unlockedBreaks.length;i--;)if(Math.floor(this.unlockedBreaks[i])===Math.floor(r.streamStartTime))return r.hasPlayed=!0,e;return r.startTime}}return e},Object.defineProperty(d.prototype,"streamDuration",{get:function(){return this.pStreamDuration||NaN},set:function(e){this.pStreamDuration=e,this.pContentDuration=this.mgr.contentTimeForStreamTime(e),this.pendingCues&&!this.cuesReleased&&(this.updateBreakSchedule(this.pendingCues),this.releaseCues(this.pendingCues),this.pendingCues=null)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"contentDuration",{get:function(){return this.pContentDuration||NaN},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"streamId",{get:function(){return this.streamInfo.streamId},enumerable:!1,configurable:!0}),d.prototype.onTimedMetadata=function(e){var t={TXXX:e.TXXX||e.msg};this.mgr.onTimedMetadata(t)},d.prototype.contentTimeForStreamTime=function(e){return this.mgr.contentTimeForStreamTime(e)},d.prototype.streamTimeForContentTime=function(e){return this.mgr.streamTimeForContentTime(e)},d.prototype.requestVODStream=function(e,t){void 0===t&&(t=null);var r=new this.sdk.VODStreamRequest(e);this.isLiveStream=!1,this.mgr.requestStream(r,t)},d.prototype.requestLiveStream=function(e,t){void 0===t&&(t=null);var r=new this.sdk.LiveStreamRequest(e);this.isLiveStream=!0,this.mgr.requestStream(r,t)},d.prototype.hStreamEvent=function(e){if(this.sdk&&this.adService&&!this.isIgnoringEvents){var t,r=e.type,i=this.sdk.StreamEvent.Type,o=d.event;switch(r){case i.LOADED:this.handleStreamLoaded(e);break;case i.STREAM_INITIALIZED:var a=e.getStreamData();this.streamInfo.streamId=a.streamId,this.emit(o.STREAM_ID_AVAILABLE,{streamId:a.streamId});break;case i.AD_PERIOD_STARTED:break;case i.CUEPOINTS_CHANGED:var n=e.getStreamData().cuepoints;this.rawScheduleReleased||(this.emit(o.RAW_AD_SCHEDULE_AVAILABLE,{schedule:this.getRawSchedule(n)}),this.rawScheduleReleased=!0),this.updateBreakSchedule(n),isNaN(this.contentDuration)||this.cuesReleased?this.pendingCues=n:this.releaseCues(n);break;case i.AD_BREAK_STARTED:this.adBreakInProgress=!0,this.breakMetadataPending=!0,this.emit(o.AD_BREAK_START);break;case i.STARTED:var s=e.getAd();this.handleAdStart(s,i.STARTED);break;case i.AD_PROGRESS:this.adBreakInProgress&&(t=e.getStreamData().adProgressData,this.emit(o.AD_PROGRESS,t));break;case i.FIRST_QUARTILE:this.adBreakInProgress&&(this.trackQuartile(i.FIRST_QUARTILE),this.emit(o.AD_FIRST_QUARTILE));break;case i.MIDPOINT:this.adBreakInProgress&&(this.trackQuartile(i.MIDPOINT),this.emit(o.AD_MIDPOINT));break;case i.THIRD_QUARTILE:this.adBreakInProgress&&(this.trackQuartile(i.THIRD_QUARTILE),this.emit(o.AD_THIRD_QUARTILE));break;case i.COMPLETE:this.adBreakInProgress&&this.handleAdComplete(i.COMPLETE);break;case i.AD_BREAK_ENDED:this.adBreakInProgress&&this.emit(o.AD_BREAK_COMPLETE),this.updateUnlockedBreaks(),this.adBreakInProgress=!1;break;case i.CLICK:this.adBreakInProgress&&this.emit(o.AD_CLICK);break;case i.ERROR:this.adBreakInProgress=!1,this.emitError(e.getStreamData().errorMessage,e.data?e.data.code:null)}}},d.prototype.handleAdComplete=function(e){this.adService.usesDaiApi||(this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:e,volume:this.adService.videoInterface.volume}),this.adService.untrackAd()),this.emit(d.event.AD_COMPLETE)},d.prototype.trackQuartile=function(e){this.adService.usesDaiApi||this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:e,volume:this.adService.videoInterface.volume})},d.prototype.handleAdStart=function(e,t){var r=this.adService.assembleAdBreakInfo(e),i=this.adService.assembleAdInfo(e,{mediaUrl:this.mediaUrl}),o=d.event;!this.breakMetadataPending&&this.adBreakInProgress||(this.breakMetadataPending=!1,this.adBreakInProgress=!0,this.isLiveStream&&(r.adBreakPosition=++this.breakCount,r.adBreakType=s.AdBreakType.MID),this.emit(o.AD_BREAK_METADATA,r)),this.adService&&(this.adService.usesDaiApi||(this.adService.trackAd(i),this.adService.trackAdEvent({context:this.adService.getAdContext(),eventName:t,volume:this.adService.videoInterface.volume})),this.emit(o.AD_START,i))},d.prototype.handleStreamLoaded=function(e){var t=e.getStreamData(),r=t.url;n.Util.isString(r)&&""!=r?(this.mediaUrl=r,this.streamInfo.streamId=t.streamId,this.emit(d.event.STREAM_ID_AVAILABLE,{streamId:t.streamId}),this.emit(d.event.MEDIA_URL_AVAILABLE,{mediaUrl:r})):this.emitError(o.AppResources.messages.DAI_MISSING_ASSET_URL)},d.prototype.updateUnlockedBreaks=function(){var e=this.adBreakSchedule.adBreaks;for(var t in e)"pre"===t?this.updateUnlockedScheduleItems([e[t]]):this.updateUnlockedScheduleItems(e[t])},d.prototype.updateUnlockedScheduleItems=function(e){for(var t=e?e.length:0;t--;){var r=e[t];r&&r.hasPlayed&&-1===this.unlockedBreaks.indexOf(r.startTime)&&this.addUnlockedBreak(r.startTime)}},d.prototype.getRawSchedule=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];t[r]={start:this.mgr.contentTimeForStreamTime(o.start),streamTimeStart:o.start,end:this.mgr.contentTimeForStreamTime(o.end),streamTimeEnd:o.end,played:!1}}return t},d.prototype.releaseCues=function(e){for(var t=[],r=e||this.cuePoints,i=r.length;i--;)t.unshift(this.contentTimeForStreamTime(r[i].start));this.cuesReleased=!0,this.emit(d.event.AD_CUEPOINTS_AVAILABLE,{cuepoints:t})},d.prototype.emitError=function(e,t){this.emit(d.event.AD_ERROR,{message:e,code:t||c.ErrorCode.DAI_DATA_ERROR,streamId:this.streamInfo.streamId||null})},d.prototype.listenToStreamManager=function(e){var t,r=e?"addEventListener":"removeEventListener",i=this.getEventInterests();if(this.sdk)for(var o=0,a=i.length;o<a;o++)t=this.sdk.StreamEvent.Type[i[o]],this.mgr[r](t,this.streamEventHandler)},d.prototype.getEventInterests=function(){return["LOADED","STREAM_INITIALIZED","CUEPOINTS_CHANGED","AD_BREAK_STARTED","AD_BREAK_ENDED","STARTED","COMPLETE","AD_PERIOD_STARTED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","CLICK","ERROR"]},d.prototype.updateBreakSchedule=function(e){var t=e&&e.length;if(this.cuePoints=[],t&&this.contentDuration){for(var r,i=0,o=e.length;i<o;i++)r=e[i],this.cuePoints.push({start:r.start,played:r.played,end:r.end});this.adBreakSchedule||(this.adBreakSchedule=new l.AdBreakSchedule(null,e,this.contentDuration))}t&&this.adBreakSchedule&&this.adBreakSchedule.updateBreaks(e)},d.prototype.initialize=function(){this.listenToStreamManager(!0)},d.event={MEDIA_URL_AVAILABLE:"mediaUrlAvailable",STREAM_ID_AVAILABLE:"streamIdAvailable",AD_PERIOD_STARTED:"adPeriodStarted",AD_CUEPOINTS_AVAILABLE:"adCuepointsAvailable",AD_BREAK_START:"adBreakStarted",AD_BREAK_METADATA:"adBreakMetadata",AD_BREAK_COMPLETE:"adBreakEnded",AD_ERROR:"adError",AD_START:"adStarted",AD_COMPLETE:"adComplete",AD_PROGRESS:"adProgress",AD_CLICK:"adClick",AD_FIRST_QUARTILE:"firstQuartile",AD_MIDPOINT:"midpoint",AD_THIRD_QUARTILE:"thirdQuartile",RAW_AD_SCHEDULE_AVAILABLE:"rawAdScheduleAvailable"},d);function d(e){var t=i.call(this,null)||this;return t.streamInfo={},t.adBreakSchedule=null,t.pStreamDuration=NaN,t.pContentDuration=NaN,t.breakMetadataPending=!1,t.cuesReleased=!1,t.adBreakInProgress=!1,t.breakCount=0,t.unlockedBreaks=[],t.rawScheduleReleased=!1,t.isIgnoringEvents=!1,t.cuePoints=[],t.adService=e,t.sdk=t.adService.sdk,t.mgr=t.adService.getStreamManager(),t.streamEventHandler=function(e){t.hStreamEvent(e)},t.initialize(),t}r.DaiStreamManager=u},{"../app/AppResources":47,"../core/Emitter":84,"../core/Util":88,"../enum/AdBreakType":95,"../enum/ErrorCode":102,"./AdBreakSchedule":30}],33:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DaiStreamRequestAssembler=void 0;var i,s=e("../core/Util"),o=e("./AdParamAssembler"),a=(i=o.AdParamAssembler,_(c,i),c.prototype.assembleStreamRequest=function(e,t,r){void 0===r&&(r=!1);var i=this.assembleStdParams(e,t),o=e.ad.dai;o.filterOutPremiumAudioCodecs&&(i["dai-excl"]=c.FILTER_OUT_PREMIUM_AUDIO);var a=s.Util.assign({},i);a.cust_params=this.queryStrFromObj(e.ad.adTagParameters.cust_params,[]),delete a.output;var n={apiKey:o.apiKey,assetKey:o.assetKey||null,streamActivityMonitorId:o.streamActivityMonitorId||null,adTagParameters:a,videoId:o.daiVideoId||null,contentSourceId:o.contentSourceId||null};return s.Util.isString(o.format)&&(n.format=o.format),n},c.FILTER_OUT_PREMIUM_AUDIO="codec:ac-3,codec:ec-3",c);function c(){return i.call(this)||this}r.DaiStreamRequestAssembler=a},{"../core/Util":88,"./AdParamAssembler":31}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImaAdCallAssembler=void 0;var i,n=e("../core/Util"),s=e("../enum/Env"),o=e("./AdParamAssembler"),a=(i=o.AdParamAssembler,_(c,i),c.prototype.assembleAdCall=function(e,t){var r=c.adCallTemplate,i=this.assembleStdParams(e,t),o=n.Util.assign({},i),a=this.queryStrFromObj(e.ad.adTagParameters.cust_params);return o.cust_params=a,t.buildEnv===s.Env.DEV&&(o.pp="vpaid_js"),r+this.queryStrFromObj(o,["description_url","url","iu","partner","cust_params"])},c.adCallTemplate="http://pubads.g.doubleclick.net/gampad/ads?",c);function c(){return i.call(this)||this}r.ImaAdCallAssembler=a},{"../core/Util":88,"../enum/Env":101,"./AdParamAssembler":31}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImaAdPlayer=void 0;var i,a=e("../app/AppResources"),o=e("../core/Emitter"),n=e("../core/Util"),c=e("../enum/AdContext"),s=e("../enum/ErrorCode"),l=e("./AdBreakSchedule"),u=e("./ImaAdsLoader"),d=(i=o.Emitter,_(p,i),p.prototype.destroy=function(){this.listenToAdsLoader(!1),this.listenToAdsManager(!1),this.adsManager&&this.adsManager.destroy(),this.adBreakSchedule&&this.adBreakSchedule.destroy(),this.presentationContainer=null,this.adsManager=null,this.sdk=null,this.adsLoader=null,this.adEventHandler=null,this.adBreakSchedule=null,this.renderingSettings=null,i.prototype.destroy.call(this)},Object.defineProperty(p.prototype,"adBreaks",{get:function(){return this.adBreakSchedule?this.adBreakSchedule.adBreaks:null},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"contentBitrate",{set:function(e){this.renderingSettings&&this.adsManager&&(this.renderingSettings.bitrate=e,this.adsManager.updateAdsRenderingSettings(this.renderingSettings))},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"volume",{set:function(e){this.adsManager&&this.adsManager.setVolume(n.Util.clampValue(e,0,1))},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"isFullscreen",{set:function(e){this.pIsFullscreen=e},enumerable:!1,configurable:!0}),p.prototype.pauseAd=function(){var e;clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!0,null!==(e=this.adsManager)&&void 0!==e&&e.pause()},p.prototype.resumeAd=function(){var e;clearTimeout(this.adProgressData.timeoutHandle),this.isPaused=!1,null!==(e=this.adsManager)&&void 0!==e&&e.resume()},p.prototype.mute=function(){this.volume=0},p.prototype.unmute=function(e){this.volume=e},p.prototype.hasPostRoll=function(){return this.adBreakSchedule.hasPostRoll()},p.prototype.hasMidRolls=function(){return this.adBreakSchedule.hasMidRolls()},p.prototype.startAds=function(){var e=this.getRect(),t=this.pIsFullscreen?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL;try{this.adsManager.init(e.width,e.height,t),this.adsManager.start()}catch(e){this.emit(p.event.AD_INIT_ERROR,{code:s.ErrorCode.IMA_INIT_FAILURE,message:e.getMessage?e.getMessage():a.AppResources.messages.UNSPECIFIED_ERROR})}},p.prototype.markAsPlayed=function(e){this.markedAsPlayed?this.markedAsPlayed=this.markedAsPlayed.concat(e):this.markedAsPlayed=e},p.prototype.getBreakForSeekTime=function(e){if(this.adBreakSchedule&&this.adBreakSchedule.hasMidRolls()){var t=this.adBreakSchedule.getBreakForContentSeekTime(e);if(t&&(!this.markedAsPlayed||-1===this.markedAsPlayed.indexOf(t.breakId)))return this.pendingSeekedBreakId=t.breakId,t}return null},p.prototype.cancelPendingBreak=function(e){this.pendingSeekedBreakId===e&&(this.pendingSeekedBreakId=null)},p.prototype.isUsingContentVideoElement=function(){return this.adsManager&&this.adsManager.isCustomPlaybackUsed()},p.prototype.isUsingCustomClickTracker=function(){return!(!this.adsManager||!this.adsManager.isCustomClickTrackingUsed())},p.prototype.setContentComplete=function(){this.adsLoader&&this.adsLoader.contentComplete()},p.prototype.updateSize=function(e){var t,r=this.getRect();this.adsManager&&(t=e?this.sdk.ViewMode.FULLSCREEN:this.sdk.ViewMode.NORMAL,this.adsManager.resize(r.width,r.height,t))},p.prototype.hAdsManagerAdError=function(e){var t=this.adService.parseAdError(e);this.emit(p.event.AD_ERROR,{code:s.ErrorCode.IMA_AD_ERROR,message:t&&t.message||a.AppResources.messages.UNSPECIFIED_ERROR,data:t})},p.prototype.hAdEvent=function(e){var t=this,r=this.sdk.AdEvent.Type,i=e.getAd(),o=e.getAdData(),a=p.event;clearTimeout(this.adProgressData.timeoutHandle);var n=!1!==this.opts.enableStalledAdCheck;switch(e.type){case r.CONTENT_PAUSE_REQUESTED:n=!1,this.pendingSeekedBreakId=null,this.emit(a.CONTENT_PAUSE_REQUESTED);break;case r.CONTENT_RESUME_REQUESTED:n=!1,this.pendingSeekedBreakId=null,this.processBreakComplete();break;case r.LOADED:this.processAdLoadOrStart(i,o,r.LOADED);break;case r.STARTED:this.processAdLoadOrStart(i,o,r.STARTED),this.checkForCustomClickTracking(),this.beginPollForProgress(this.inProgressAd);break;case r.AD_PROGRESS:this.processProgress();break;case r.FIRST_QUARTILE:this.processQuartile(r.FIRST_QUARTILE,a.AD_FIRST_QUARTILE);break;case r.MIDPOINT:this.processQuartile(r.MIDPOINT,a.AD_MIDPOINT);break;case r.THIRD_QUARTILE:this.processQuartile(r.THIRD_QUARTILE,a.AD_THIRD_QUARTILE);break;case r.COMPLETE:n=!1,this.processAdComplete(r.COMPLETE);break;case r.ALL_ADS_COMPLETED:n=!1,this.processAllComplete();break;case r.AD_BUFFERING:this.emit(a.AD_BUFFERING);break;case r.CLICK:this.adsManager.pause(),this.emit(a.AD_CLICK,{ad:this.inProgressAd});break;case r.PAUSED:n=!1,this.isPaused=!0,this.emit(a.AD_PAUSED);break;case r.RESUMED:this.isPaused=!1,this.emit(a.AD_RESUMED);break;case r.SKIPPED:n=!1,this.processSkip(r.SKIPPED);break;case r.LOG:n=!1,this.processLogEvent(o);break;case r.USER_CLOSE:n=!1,this.killAd();break;case r.VOLUME_CHANGED:case r.VOLUME_MUTED:this.processVolumeChange(e.type)}!this.isPaused&&n&&(this.adProgressData.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},this.adProgressData.pollInterval))},p.prototype.checkForCustomClickTracking=function(){this.isUsingCustomClickTracker()&&this.emit(p.event.AD_CLICK_ELEMENT_VISIBILITY_REQUESTED)},p.prototype.beginPollForProgress=function(e){var t=this,r=this.adProgressData;clearTimeout(r.timeoutHandle),r.duration=e.adDuration,r.adId=e.adId,r.pollTzero=Date.now(),r.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},r.pollInterval)},p.prototype.checkAdProgress=function(){var e,t=this,r=this.adProgressData,i=r.duration-this.adsManager.getRemainingTime(),o=Date.now();clearTimeout(r.timeoutHandle),this.isPaused||(i>r.lastRecordedTime?(r.lastRecordedTime=i,r.pollTzero=o,r.timeoutHandle=setTimeout(function(){return t.checkAdProgress()},r.pollInterval)):o-r.pollTzero>r.stallThreshold&&(e=this.inProgressAd?n.Util.assign({},this.inProgressAd):null,this.emit(p.event.AD_STALLED,{code:s.ErrorCode.AD_STALLED,message:a.AppResources.messages.AD_STALLED,data:{adInfo:e}}),this.killAd(),this.emit(p.event.AD_BREAK_DISCARDED),this.adsManager&&this.adsManager.discardAdBreak(),this.processBreakComplete()))},p.prototype.processAdLoadOrStart=function(e,t,r){var i=this.adService.assembleAdBreakInfo(e),o=this.adService.assembleAdInfo(e,t),a=r===this.sdk.AdEvent.Type.STARTED,n=i.adBreakPosition,s=0===n?"pre_0":-1===n?"post_0":"mid_"+n;if(this.markedAsPlayed&&0<=this.markedAsPlayed.indexOf(s))return this.adBreakSchedule.markPlayed(s),void this.adsManager.discardAdBreak();a?(this.inProgressAd=o,this.adService.trackAd(o),this.adService.trackAdEvent({context:c.AdContext.IMA,eventName:r,volume:this.adsManager.getVolume()}),this.emit(p.event.AD_BREAK_METADATA,i),this.emit(p.event.AD_START,o)):(this.adBreakSchedule.hasPlayed(s)||(this.adBreakSchedule.markPlayed(s),this.inProgressBreakId=s,this.emit(p.event.AD_BREAK_START,{adBreakId:s})),this.emitAdLoaded(o))},p.prototype.emitAdLoaded=function(e){this.emit(p.event.AD_LOADED,e)},p.prototype.processProgress=function(){var e,t;this.inProgressAd&&(e=this.inProgressAd.adDuration,t=this.adsManager&&this.adsManager.getRemainingTime(),isNaN(e)||isNaN(t)||t<0||this.emit(p.event.AD_PROGRESS,{currentTime:Math.min(e,Math.max(0,e-t)),duration:e}))},p.prototype.processQuartile=function(e,t){this.emit(t,{ad:this.inProgressAd}),this.adService.trackAdEvent({context:c.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()})},p.prototype.processAdComplete=function(e){this.adService.trackAdEvent({context:c.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()}),this.killAd()},p.prototype.processSkip=function(e){this.emit(p.event.AD_SKIPPED,{ad:this.inProgressAd}),this.adService.trackAdEvent({context:c.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()}),this.killAd()},p.prototype.processBreakComplete=function(){this.inProgressAd&&this.killAd(),this.inProgressBreakId&&(this.emit(p.event.AD_BREAK_COMPLETE,{adBreakId:this.inProgressBreakId}),this.inProgressBreakId=null),this.emit(p.event.CONTENT_RESUME_REQUESTED)},p.prototype.processVolumeChange=function(e){this.adService.trackAdEvent({context:c.AdContext.IMA,eventName:e,volume:this.adsManager.getVolume()})},p.prototype.processAllComplete=function(){this.inProgressBreakId&&this.processBreakComplete(),this.emit(p.event.ALL_ADS_COMPLETED)},p.prototype.processLogEvent=function(e){this.pendingSeekedBreakId&&(this.adBreakSchedule.markPlayed(this.pendingSeekedBreakId),this.pendingSeekedBreakId=null),e&&e.adError&&(this.emit(p.event.AD_ERROR,{code:s.ErrorCode.IMA_AD_ERROR,message:e.adError.getMessage()||a.AppResources.messages.UNSPECIFIED_ERROR,data:{errorCode:e.adError.getErrorCode()}}),this.emit(p.event.AD_BREAK_DISCARDED),this.adsManager&&this.adsManager.discardAdBreak())},p.prototype.killAd=function(){this.adService.untrackAd(),this.emit(p.event.AD_COMPLETE,{ad:this.inProgressAd}),this.inProgressAd=null;var e=this.adProgressData;clearTimeout(e.timeoutHandle),e.pollTzero=null,e.lastRecordedTime=null},p.prototype.requestAds=function(){var e=new this.sdk.AdsRequest,t=this.getRect();e.adTagUrl=this.adCallUrl,e.linearAdSlotWidth=t.width,e.linearAdSlotHeight=t.height,e.nonLinearAdSlotWidth=t.width,e.nonLinearAdSlotHeight=t.height,e.setAdWillAutoPlay(this.opts.initialPlayState.autoplay),e.setAdWillPlayMuted(this.opts.initialPlayState.muted),this.adsLoader.requestAds(e)},p.prototype.hAdsMgrLoaded=function(e){var t=e.data;this.renderingSettings=this.getRenderingSettings(),this.adsManager=t.getAdsManager(this.opts.playheadInterface,this.renderingSettings),this.createAdBreakSchedule(this.adsManager.getCuePoints()),this.listenToAdsManager(!0),this.startAds()},p.prototype.getRenderingSettings=function(){var e=new this.sdk.AdsRenderingSettings,t=this.opts.ad,r=this.adService.defaultRenderingSettings,i=t.ima.loadVideoTimeoutMs,o=t.ima.enableAdPreloading;return e.bitrate=r.bitrate,e.enablePreloading=n.Util.isBoolean(o)?o:r.enablePreloading,e.loadVideoTimeout=isNaN(i)?r.loadVideoTimeout:i,e.restoreCustomPlaybackStateOnAdBreakComplete=r.restoreCustomPlaybackStateOnAdBreakComplete,e},p.prototype.createAdBreakSchedule=function(e){n.Util.isEmpty(e)&&(e=[0]),this.adBreakSchedule=new l.AdBreakSchedule(e),this.emit(p.event.RAW_AD_SCHEDULE_AVAILABLE,{cuepoints:e}),this.emit(p.event.AD_CUEPOINTS_AVAILABLE,{cuepoints:e})},p.prototype.hAdsLoaderError=function(e){this.emit(p.event.AD_ERROR,e.data),this.emit(p.event.CONTENT_RESUME_REQUESTED)},p.prototype.listenToAdsManager=function(e){if(this.adsManager){for(var t,r=e?"addEventListener":"removeEventListener",i=this.getEventInterests(),o=0,a=i.length;o<a;o++)t=this.sdk.AdEvent.Type[i[o]],this.adsManager[r](t,this.adEventHandler);this.adsManager[r](this.sdk.AdErrorEvent.Type.AD_ERROR,this.errorEventHandler)}},p.prototype.listenToAdsLoader=function(e){var t=this.adsLoaderEventMap,r=[u.ImaAdsLoader.event.ADS_MANAGER_LOADED,u.ImaAdsLoader.event.ADS_LOADER_ERROR];if(this.adsLoader)for(var i=r.length;i--;)this.adsLoader[e?"on":"off"](r[i],t[r[i]])},p.prototype.getEventInterests=function(){return["CONTENT_PAUSE_REQUESTED","CONTENT_RESUME_REQUESTED","LOADED","STARTED","AD_PROGRESS","FIRST_QUARTILE","MIDPOINT","THIRD_QUARTILE","COMPLETE","ALL_ADS_COMPLETED","AD_BUFFERING","CLICK","PAUSED","RESUMED","SKIPPED","LOG","USER_CLOSE"]},p.prototype.getRect=function(){return this.presentationContainer.getBoundingClientRect()},p.prototype.initialize=function(){this.listenToAdsLoader(!0),this.requestAds()},p.event={CONTENT_PAUSE_REQUESTED:"contentPauseRequested",CONTENT_RESUME_REQUESTED:"contentResumeRequested",AD_CLICK_ELEMENT_VISIBILITY_REQUESTED:"adClickElementVisibilityRequested",AD_CUEPOINTS_AVAILABLE:"adCuepointsAvailable",AD_INIT_ERROR:"adInitError",AD_BREAK_START:"adBreakStart",AD_BREAK_METADATA:"adBreakMetadata",AD_LOADED:"adLoaded",AD_START:"adStarted",AD_PROGRESS:"adProgress",AD_FIRST_QUARTILE:"adFirstQuartile",AD_MIDPOINT:"adMidpoint",AD_THIRD_QUARTILE:"adThirdQuartile",AD_COMPLETE:"adComplete",ALL_ADS_COMPLETED:"allAdsCompleted",AD_BREAK_COMPLETE:"adBreakComplete",AD_BREAK_DISCARDED:"adBreakDiscarded",AD_BUFFERING:"adBuffering",AD_PAUSED:"paused",AD_RESUMED:"resumed",AD_SKIPPED:"adSkipped",AD_CLICK:"adClick",AD_ERROR:"adError",AD_VOLUME_CHANGED:"adVolumeChanged",AD_MUTED:"adMuted",AD_STALLED:"adStalled",RAW_AD_SCHEDULE_AVAILABLE:"rawAdScheduleAvailable"},p);function p(e){var t=i.call(this,e)||this;t.pIsFullscreen=!1,t.inProgressAd=null,t.inProgressBreakId=null,t.isPaused=!1,t.pendingSeekedBreakId=null,t.markedAsPlayed=null,t.adProgressData={lastRecordedTime:0,addTzero:null,pollTzero:null,timeoutHandle:null,stallThreshold:5,adId:null,duration:null,pollInterval:2e3},t.adCallUrl=e.adCallUrl,t.presentationContainer=t.opts.presentationContainer,t.adService=e.adService,t.sdk=t.adService.sdk,t.adsLoader=t.adService.adsLoader,delete t.opts.presentationContainer,t.adsLoaderEventMap={};var r=u.ImaAdsLoader.event;return t.adsLoaderEventMap[r.ADS_LOADER_ERROR]=function(e){return t.hAdsLoaderError(e)},t.adsLoaderEventMap[r.ADS_MANAGER_LOADED]=function(e){return t.hAdsMgrLoaded(e)},t.adEventHandler=function(e){return t.hAdEvent(e)},t.errorEventHandler=function(e){return t.hAdsManagerAdError(e)},t.initialize(),t}r.ImaAdPlayer=d},{"../app/AppResources":47,"../core/Emitter":84,"../core/Util":88,"../enum/AdContext":96,"../enum/ErrorCode":102,"./AdBreakSchedule":30,"./ImaAdsLoader":36}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImaAdsLoader=void 0;var i,o=e("../core/Emitter"),a=(i=o.Emitter,_(n,i),n.prototype.destroy=function(){this.adsLoader&&(this.adsLoader.removeEventListener(this.sdk.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.adsLoader.removeEventListener(this.sdk.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler)),this.adsLoader.destroy(),this.adsLoader=null,this.adService=null,this.sdk=null,i.prototype.destroy.call(this)},n.prototype.initialize=function(){var e=this.opts,t=this.sdk;if(!t||!t.AdsLoader)return!1;if(this.initialized)return!0;var r=new t.AdDisplayContainer(e.adContainer,e.video,e.adClickEl);r.initialize(),this.adsLoader=new t.AdsLoader(r);var i=this.adsLoader.getSettings();return this.populateSdkSettings(i),this.adsLoader.addEventListener(t.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.eMap.adsMgrLoadedHandler),this.adsLoader.addEventListener(t.AdErrorEvent.Type.AD_ERROR,this.eMap.errorHandler),this.initialized=!0},n.prototype.requestAds=function(e,t){this.adsLoader&&this.adsLoader.requestAds(e)},n.prototype.contentComplete=function(){this.adsLoader&&this.adsLoader.contentComplete()},n.prototype.getSettings=function(){return this.adsLoader?this.adsLoader.getSettings():null},n.prototype.hAdsMgrLoaded=function(e){this.emit(n.event.ADS_MANAGER_LOADED,e)},n.prototype.hError=function(e){var t=this.parseAdErrorEvent(e);this.emit(n.event.ADS_LOADER_ERROR,t)},n.prototype.parseAdErrorEvent=function(e){return this.adService.parseAdError(e)},n.prototype.populateSdkSettings=function(e){var t=this.opts.sdkSettings,r=this.sdk.ImaSdkSettings.VpaidMode[t.vpaidMode];e.setVpaidMode(r),e.setDisableCustomPlaybackForIOS10Plus(t.disableCustomPlaybackForIOS10Plus),e.setPlayerType(t.playerType),e.setPlayerVersion(t.playerVersion)},n.event={ADS_MANAGER_LOADED:"adsManagerLoaded",ADS_LOADER_ERROR:"adsLoaderError"},n);function n(e){var t=i.call(this,e)||this;return t.eMap={errorHandler:null,adsMgrLoadedHandler:null},t.initialized=!1,t.adService=t.opts.adService,t.sdk=t.adService.sdk,t.eMap.errorHandler=function(e){return t.hError(e)},t.eMap.adsMgrLoadedHandler=function(e){return t.hAdsMgrLoaded(e)},t}r.ImaAdsLoader=a},{"../core/Emitter":84}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MoatTracker=void 0;var i=(o.prototype.destroy=function(){this.adContextToVpaidEventMap=null,this.trackingObj=null},o.prototype.track=function(e){var t=e.context,r=e.adInfo,i={level1:"",level2:"",level3:r.wrapperAdId,level4:r.wrapperCreativeId,slicer1:"vaw-can",slicer2:e.partner,slicer3:e.pageType,moatVASTSystem:t,moatVASTAdID:r.wrapperAdId};""!==e.viewGuid&&(i.zMoatVGUID=e.viewGuid),""!==e.pageType&&(i.zMoatPT=e.pageType),this.initMoat(e.adVideoContainer,i,r.adDuration,this.MOAT_PARTNER_CODE,null)},o.prototype.untrack=function(){this.trackingObj=null},o.prototype.trackEvent=function(e){var t=this.adContextToVpaidEventMap[e.context][e.eventName.toLowerCase()];t&&this.trackingObj&&this.trackingObj.dispatchEvent({type:t,adVolume:e.volume})},o.prototype.initMoat=function(e,t,r,i,o){void 0===o&&(o=null);var a,n,s=document.createElement("script"),c=[],l={adData:{ids:t,duration:r,url:o},dispatchEvent:function(e){this.sendEvent?(c&&(c.push(e),e=c,c=!1),this.sendEvent(e)):c.push(e)}},u="_moatApi"+Math.floor(1e8*Math.random());try{n=(a=e.ownerDocument).defaultView||a.parentWindow}catch(e){n=window}n[u]=l,s.type="text/javascript",e&&e.insertBefore(s,e.childNodes[0]||null),s.src="https://z.moatads.com/"+i+"/moatvideo.js#"+u,this.trackingObj=l},o);function o(){this.MOAT_PARTNER_CODE="cbsiimajsint708425247896",this.adContextToVpaidEventMap={ima:{start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",skip:"AdSkipped",volumechange:"AdVolumeChange",mute:"AdVolumeChange"},dai_sdk:{started:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",controlpause:"AdPaused",controlplay:"AdPlaying",controlvolumeset:"AdVolumeChange",controlmute:"AdVolumeChange",controlunmute:"AdVolumeChange"}}}r.MoatTracker=i},{}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Ad=void 0;var i=(o.prototype.getAdId=function(){return this.data.ad_id},o.prototype.getAdPodInfo=function(){return this.podInfo},o.prototype.getAdSystem=function(){return this.data.advertiser||null},o.prototype.getAdvertiserName=function(){return this.data.advertiser||null},o.prototype.getApiFramework=function(){return null},o.prototype.getCreativeAdId=function(){return this.data.creative_ad_id},o.prototype.getCreativeId=function(){return this.data.creative_id},o.prototype.getDealId=function(){return this.data.deal_id||null},o.prototype.getDescription=function(){return this.data.description},o.prototype.getDuration=function(){return this.data.duration},o.prototype.getTitle=function(){return this.data.title},o.prototype.getDaiWrapperData=function(){var e,t=null,r=null,i=null;return this.data.wrappers&&this.data.wrappers[0]&&(t=(e=this.data.wrappers[0]).ad_id,r=e.creative_id,i=e.creative_ad_id),{adId:t,creativeId:r,creativeAdId:i}},o.prototype.getWrapperAdIds=function(){return this.getWrapperPropArray("ad_id")},o.prototype.getWrapperCreativeIds=function(){return this.getWrapperPropArray("creative_id")},o.prototype.getWrapperCreativeAdIds=function(){return this.getWrapperPropArray("creative_ad_id")},o.prototype.getWrapperAdSystems=function(){return this.getWrapperPropArray("system")},o.prototype.getCompanionAds=function(){return null},o.prototype.getWrapperPropArray=function(e){var t,r=[],i=this.data.wrappers||null;if(!i)return null;for(var o=0,a=i.length;o<a;o++)(t=i[o][e])&&""!=t&&r.push(t);return r},o);function o(e,t){this.data=e,this.podInfo=t}r.Ad=i},{}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdPodInfo=void 0;var i=(o.prototype.getAdPosition=function(){return this.pos},o.prototype.setAdPosition=function(e){this.pos=e},o.prototype.getMaxDuration=function(){return this.data.duration},o.prototype.getPodIndex=function(){return this.podIdx},o.prototype.setPodIndex=function(e){this.podIdx=e},o.prototype.getTimeOffset=function(){return this.data.start},o.prototype.getTotalAds=function(){return this.data.ads&&this.data.ads.length},o);function o(e,t,r){this.data=e,this.podIdx=r,this.pos=t}r.AdPodInfo=i},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DaiProxyApi=void 0;var i=e("./StreamManager"),o=e("./VODStreamRequest"),a=e("./StreamEvent").StreamEvent,n=o.VODStreamRequest,s=i.StreamManager;r.DaiProxyApi={StreamManager:s,StreamEvent:a,VODStreamRequest:n}},{"./StreamEvent":41,"./StreamManager":42,"./VODStreamRequest":43}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StreamEvent=void 0;var a,i=e("../../core/CoreEvent"),o=(a=i.CoreEvent,_(n,a),Object.defineProperty(n.prototype,"Type",{get:function(){return n.Type},enumerable:!1,configurable:!0}),n.prototype.getAd=function(){return this.ad},n.prototype.getStreamData=function(){return this.data},n.Type={LOADED:"loaded",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded",CUEPOINTS_CHANGED:"cuePointsChanged",STREAM_INITIALIZED:"streamInitialized",ERROR:"error",AD_PROGRESS:"adProgress",CLICK:"click"},n);function n(e,t,r,i){var o=a.call(this,e,null,r)||this;return o.ad=null,o.data=r,o.target=t,i&&(o.ad=i),o}r.StreamEvent=o},{"../../core/CoreEvent":83}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StreamManager=void 0;var o,i=e("../../core/Emitter"),a=e("../../dataservice/AsyncDataRequest"),n=e("../../dataservice/AsyncDataRequestOptions"),s=e("../../enum/ErrorCode"),c=e("../../enum/LogLevel"),l=e("../../enum/VideoFormat"),u=e("../../enum/XhrResponseType"),d=e("./Ad"),p=e("./AdPodInfo"),m=e("./StreamEvent"),f=e("../../core/Util"),y=(o=i.Emitter,_(h,o),h.prototype.addEventListener=function(e,t){this.on(e,t)},h.prototype.removeEventListener=function(e,t){this.off(e,t)},h.prototype.requestStream=function(e,t){var r=this;void 0===t&&(t=null),e.adTagParameters.correlator=this.getCorrelator(),e.apiKey&&(e.adTagParameters["api-key"]=e.apiKey);var i=n.AsyncDataRequestOptions.create({responseType:u.XhrResponseType.JSON,timeout:3e3,method:"post",errorRecovery:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.getUrl(e.contentSourceId,e.videoId,e.format||"hls"),data:e.adTagParameters,encodeList:["cust_params"],onComplete:function(e){r.handleStreamLoaded(e)}});new a.AsyncDataRequest(i)},h.prototype.setClickElement=function(e){var t=this;e&&(this.clickEl=e||null,this.clickThruHandler=function(e){t.hClickThru(e)},this.clickEl.addEventListener("click",this.clickThruHandler))},h.prototype.contentTimeForStreamTime=function(e){var t,r=this.adBreaks,i=0;null==e&&(e=this.streamDur);for(var o=0,a=r.length;o<a;o++){if(!(e>(t=r[o]).start))return e-i;if(!(e>=t.end))return t.start-i;if(i+=t.duration,o==a-1)return e-i}return e},h.prototype.streamTimeForContentTime=function(e){for(var t,r=this.adBreaks,i=0,o=0,a=r.length;o<a&&(t=r[o],this.contentTimeForStreamTime(r[o].start)<=e);o++)i+=t.duration;return e+i},h.prototype.previousCuePointForStreamTime=function(e){for(var t,r=this.adBreaks,i=r.length;i--;)if(e>=(t=r[i]).start)return t.played?null:this.cuePointFromBreak(t);return null},h.prototype.onTimedMetadata=function(e){var t=n.AsyncDataRequestOptions.create({responseType:u.XhrResponseType.JSON,timeout:2e3,url:this.mvu+e.TXXX,onComplete:function(e){},errorRecovery:{}});new a.AsyncDataRequest(t)},h.prototype.processMetadata=function(e,t,r){},h.prototype.reset=function(){clearInterval(this.pollId),this.clickEl&&this.clickEl.removeEventListener("click",this.clickThruHandler),this.clickEl=null,this.streamId=null,this.adBreaks=[],this.breakPoints=[],this.streamDur=NaN,this.currBreak=null,this.currBreakIndex=null,this.currAd=null,this.mvu=null,this.resetUponAdComplete(),this.lastRecordedTime=-1,this.pollId=null},h.prototype.beginPoll=function(){var e=this;this.pollId=setInterval(function(){e.checkState()},100)},h.prototype.checkState=function(){var e,t,r,i=this.vidIface.currentTime;!isNaN(i)&&0<i&&i>this.lastRecordedTime&&(this.currBreak||((t=(e=this.getBreakForStreamTime(i)).break)&&t.played?this.emitAdPeriodStarted(t):t&&this.beginBreak(t,e.index)),this.currBreak&&(i>=(r=this.currBreak).end?(this.monitorAdStatus(i,r),this.endBreak()):this.monitorAdStatus(i,r))),!isNaN(i)&&0<=i&&(this.lastRecordedTime=i)},h.prototype.monitorAdStatus=function(e,t){var r=t.ads,i=t.start;if(this.currAd)this.monitorCurrentAd(e);else for(var o,a=r.length;a--;)if(((o=r[a].start||0)<=e||null==o)&&!this.breakStatus["t_"+i]["t_"+o]){var n=t.type.toLowerCase();this.currBreakIndex="pre"===n?0:"mid"===n?t.index:-1,this.beginAd(r[a],o);break}},h.prototype.monitorCurrentAd=function(e){for(var t,r=this.currAd.events,i=this.currEventStatus,o=!0,a=r.length;a--;)if(e>=(t=r[a]).time&&!i[t.type]){if(i[t.type]=!0,"complete"===t.type||e>=this.currAd.start+this.currAd.duration){o=!1,this.emitAdComplete(),this.resetUponAdComplete();break}if("start"!==t.type){o=!1,this.emit(h.eventStatusMap[t.type],this.createStreamData());break}}o&&this.emitProgress(e)},h.prototype.resetUponAdComplete=function(){this.currEventStatus=this.createEventStatus(),this.currAd=null},h.prototype.beginBreak=function(e,t){this.currBreak=e,this.currBreak.played=!0,this.emitCues();var r=this.createStreamData();r.streamId=this.streamId,this.emit(h.event.AD_BREAK_STARTED,r)},h.prototype.endBreak=function(){this.emit(h.event.AD_BREAK_ENDED,this.createStreamData()),this.currBreak=null},h.prototype.beginAd=function(e,t){this.currAd=e,this.breakStatus["t_"+this.currBreak.start]["t_"+t]=!0,this.currEventStatus.start=!0;var r=this.createStreamData();r.streamId=this.streamId;var i=new p.AdPodInfo(this.currBreak,this.currAd.seq,this.currBreakIndex),o=new d.Ad(this.currAd,i),a=new m.StreamEvent(h.event.STARTED,this,r,o);this.dispatchEvt(a)},h.prototype.handleStreamLoaded=function(e){var t;e.data.error?(t="Error. Status: "+(e.data.status||"Unknown")+"; Message: "+e.data.message,this.logger.log(c.LogLevel.ERROR,t),this.emitError(t,s.ErrorCode.DAI_NETWORK_ERROR)):(this.gatherStreamInfo(e.data.response),this.emitCues(),this.beginPoll(),this.emitLoaded(e.data.response))},h.prototype.hClickThru=function(e){var t;this.currAd&&((t=this.currAd.clickthrough_url)&&""!==t&&window.open(t),this.emit(h.event.CLICK))},h.prototype.emit=function(e,t){void 0===t&&(t=null);var r=new m.StreamEvent(e,this,t);this.dispatchEvt(r)},h.prototype.emitCues=function(){var e=this.createStreamData();e.cuepoints=this.assembleCuePoints(),this.emit(h.event.CUEPOINTS_CHANGED,e)},h.prototype.emitProgress=function(e){var t=this.createAdProgressData(null===e?(this.currAd.start||0)+this.currAd.duration:e),r=this.createStreamData();r.adProgressData=t,this.emit(h.event.AD_PROGRESS,r)},h.prototype.emitLoaded=function(e){var t=this.createStreamData();t.stream_id=this.streamId,t.subtitles=e.subtitles,t.manifestFormat=this.getFormat(e.stream_manifest),t.url=e.stream_manifest,this.emit(h.event.LOADED,t)},h.prototype.emitAdComplete=function(){var e=this.createStreamData();e.streamId=this.streamId,this.emitProgress(null),this.emit(h.event.COMPLETE,e)},h.prototype.emitError=function(e,t){var r=this.createStreamData();r.streamId=this.streamId,r.errorMessage=e,r.code=t,this.emit(h.event.ERROR,r)},h.prototype.emitAdPeriodStarted=function(e){var t=this.createStreamData();t.streamResumeTime=e.start+e.duration+.1,this.emit(h.event.AD_PERIOD_STARTED,t)},h.prototype.createAdProgressData=function(e){return{adBreakDuration:this.currBreak.duration,adPeriodDuration:null,adPosition:this.currAd.seq,currentTime:f.Util.clampValue(e-(this.currAd.start||0),0,this.currAd.duration),duration:this.currAd.duration,totalAds:this.currBreak.ads.length}},h.prototype.createEventStatus=function(){return{start:!1,first:!1,mid:!1,third:!1,complete:!1}},h.prototype.assembleCuePoints=function(){for(var e=[],t=0,r=this.adBreaks.length;t<r;t++)e.push(this.cuePointFromBreak(this.adBreaks[t]));return e},h.prototype.getBreakForStreamTime=function(e){for(var t,r=0,i=this.adBreaks.length;r<i;r++)if(e>=(t=this.adBreaks[r]).start&&e-t.start<=1&&!this.currBreak)return{break:t,index:r};return{break:null,index:null}},h.prototype.getUrl=function(e,t,r){return h.DAI_BASE_URL+h.STREAM_PATH.replace("{format}",r).replace("{contentSourceId}",e).replace("{daiVideoId}",t)},h.prototype.getCorrelator=function(){var e=String(Math.round(1e15+9e15*Math.random()));if(e.length<16)for(;e.length<16;)e+="0";return 16<e.length&&(e=e.substr(0,17)),e},h.prototype.cuePointFromBreak=function(e){return{start:e.start,end:e.end,played:e.played}},h.prototype.createStreamData=function(){return{adProgressData:null,cuepoints:null,errorMessage:null,streamId:this.streamId||null,manifestFormat:null,subtitles:null,url:null}},h.prototype.getFormat=function(e){var t=0<=e.indexOf(".m3u8"),r=!t&&0<=e.indexOf(".mpd");return t?l.VideoFormat.HLS:r?l.VideoFormat.DASH:l.VideoFormat.UNKNOWN},h.prototype.gatherBreakInfo=function(e){for(var t,r,i,o,a=e&&e.length||0,n=1,s=0;s<a;s++){i=(r=(t=e[s]).start)+(o=t.duration),this.breakPoints.push(r),this.adBreaks.push({duration:o,start:r,end:i,played:!1,type:t.type,ads:t.ads,index:s,seq:"mid"==t.type?n++:0});for(var c=this.breakStatus["t_"+r]={},l=0,u=t.ads.length;l<u;l++)c["t_"+(t.ads[l].start||0)]=!1}},h.prototype.gatherStreamInfo=function(e){this.streamDur=e.total_duration,this.mvu=e.media_verification_url,this.streamId=e.stream_id,this.gatherBreakInfo(e.ad_breaks)},h.event={LOADED:"loaded",STREAM_INITIALIZED:"streamInitialized",CUEPOINTS_CHANGED:"cuePointsChanged",AD_BREAK_STARTED:"adBreakStarted",AD_BREAK_ENDED:"adBreakEnded",STARTED:"started",COMPLETE:"complete",AD_PROGRESS:"adProgress",FIRST_QUARTILE:"firstQuartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdQuartile",CLICK:"click",ERROR:"error",AD_PERIOD_STARTED:"adPeriodStarted",AD_PERIOD_ENDED:"adPeriodEnded"},h.eventStatusMap={start:"started",firstquartile:"firstQuartile",midpoint:"midpoint",thirdquartile:"thirdQuartile",complete:"complete"},h.DAI_BASE_URL="https://dai.google.com",h.STREAM_PATH="/ondemand/v1/{format}/content/{contentSourceId}/vid/{daiVideoId}/stream",h);function h(e,t,r){var i=o.call(this,null)||this;return i.adBreaks=[],i.currBreak=null,i.currBreakIndex=null,i.currAd=null,i.breakStatus={},i.breakPoints=[],i.pollId=null,i.lastRecordedTime=-1,i.currEventStatus=i.createEventStatus(),i.currBreakIndex=null,i.vidIface=e,i.logger=r,i.setClickElement(t),i}r.StreamManager=y},{"../../core/Emitter":84,"../../core/Util":88,"../../dataservice/AsyncDataRequest":90,"../../dataservice/AsyncDataRequestOptions":91,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../enum/VideoFormat":127,"../../enum/XhrResponseType":129,"./Ad":38,"./AdPodInfo":39,"./StreamEvent":41}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VODStreamRequest=void 0;var i=e("../../core/Util"),o=(Object.defineProperty(a.prototype,"adTagParameters",{get:function(){return this.req.adTagParameters},set:function(e){this.req.adTagParameters=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"videoId",{get:function(){return this.req.videoId},set:function(e){this.req.videoId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"contentSourceId",{get:function(){return this.req.contentSourceId},set:function(e){this.req.contentSourceId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"apiKey",{get:function(){return this.req.apiKey},set:function(e){this.req.apiKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"format",{get:function(){return this.req.format},set:function(e){this.req.format=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"assetKey",{get:function(){return this.req.assetKey},set:function(e){this.req.assetKey=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"streamActivityMonitorId",{get:function(){return this.req.streamActivityMonitorId},set:function(e){this.req.streamActivityMonitorId=e},enumerable:!1,configurable:!0}),a);function a(e){this.req={apiKey:null,streamActivityMonitorId:null,adTagParameters:null,assetKey:null,format:"hls",contentSourceId:null,videoId:null},e&&i.Util.assign(this.req,e)}r.VODStreamRequest=o},{"../../core/Util":88}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.gam_static_params=void 0,r.gam_static_params={cmsid:2289,output:"xml_vmap1",unviewed_position_start:1,correlator:"1",gdfp_req:1,env:"vp"}},{}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractApplication=void 0;var i,o=e("../core/Emitter"),a=e("../core/Logger"),n=e("../core/Util"),s=e("../enum/MediatorName"),c=e("../enum/ProxyName"),l=e("../enum/ServiceName"),u=e("../mvc/Facade"),d=e("../service/LogService"),p=e("../view/AppMediator"),m=e("../service/AutoplayCapabilitiesService"),f=(i=o.Emitter,_(y,i),y.prototype.destroy=function(){this.mdlCollProxy=null,this.pFacade=null,i.prototype.destroy.call(this),u.Facade.removeCore(this.pAppId)},Object.defineProperty(y.prototype,"appId",{get:function(){return this.pAppId},enumerable:!1,configurable:!0}),y.prototype.sendNotification=function(e,t,r){this.pFacade.sendNotification(e,t,r)},y.prototype.createLoggingService=function(e){var t=this,r=new a.Logger({logLevel:e,id:this.appId,onLogEvent:function(e){return t.sendEvent(e.type,e.data)}});this.pFacade.registerService(new d.LogService(l.ServiceName.Logging,r))},y.prototype.createAutoplayCapabilitiesService=function(){var e=new m.AutoplayCapabilitiesService(l.ServiceName.AutoplayCapabilities);this.pFacade.registerService(e)},y.prototype.registerGlobalServices=function(e){var t=this.pFacade;for(var r in e)t.registerService(e[r])},Object.defineProperty(y.prototype,"facade",{get:function(){return this.pFacade},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"modelCollectionProxy",{get:function(){return this.mdlCollProxy||(this.mdlCollProxy=this.facade.retrieveProxy(c.ProxyName.ModelCollectionProxy)),this.mdlCollProxy},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"appMediator",{get:function(){return this.pFacade.retrieveMediator(s.MediatorName.APPLICATION)},enumerable:!1,configurable:!0}),y.prototype.createApplicationMediator=function(e){var t=new p.AppMediator(e,this);this.pFacade.registerMediator(t)},y);function y(e){var t=i.call(this,e||{})||this;return t.pAppId=e.id||n.Util.uid8(),t.pFacade=u.Facade.createFacade(t.pAppId,e.commandMap||null),t}r.AbstractApplication=f},{"../core/Emitter":84,"../core/Logger":86,"../core/Util":88,"../enum/MediatorName":109,"../enum/ProxyName":123,"../enum/ServiceName":125,"../mvc/Facade":165,"../service/AutoplayCapabilitiesService":205,"../service/LogService":210,"../view/AppMediator":229}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.apiCollection=r.apiAccessor=r.apiMethod=void 0;var a=e("../core/Util");r.apiMethod=function(){return function(e,t,r){a.Util.isObject(e.apiMethods)||(e.apiMethods={}),e.apiMethods[t]=r.value}},r.apiAccessor=function(o){return void 0===o&&(o=!1),function(e,t,r){a.Util.isObject(e.apiAccessors)||(e.apiAccessors={});var i={get:r.get,set:!o&&r.set||void 0};e.apiAccessors[t]=i}},r.apiCollection=function(i,o){for(var e in o.apiMethods)!function(t){i[t]=function(){var e=Array.prototype.slice.call(arguments);return!!o&&!!o.apiMethods&&!!o.apiMethods[t]&&o.apiMethods[t].apply(o,e)||null}}(e);for(var t in o.apiAccessors)!function(t){var e=o.apiAccessors[t],r={};e.get&&(r.get=function(){return o[t]}),e.set&&(r.set=function(e){o[t]=e}),Object.defineProperty(i,t,r)}(t);return i}},{"../core/Util":88}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AppResources=void 0;var i=e("../enum/AccessibilityAction"),o=e("../enum/DiagnosticAction"),a=e("../enum/NonPrintingKey"),n=e("../enum/PluginPriority"),s=e("../util/KeyCode"),c=(l.blankVideoUrl="https://vidtech.cbsinteractive.com/h5/blanks/uvp_blank.mp4",l.userKeyCmdDefs=[{action:o.DiagnosticAction.DIAGNOSTIC_PLUGIN,primaryKey:"d",keyCode:s.KeyCode.D,requireCtrl:!0,requireShift:!0},{action:o.DiagnosticAction.CONFIG_TO_CLIPBOARD,primaryKey:"c",keyCode:s.KeyCode.C,requireCtrl:!0,requireShift:!0},{action:o.DiagnosticAction.CONFIG_TO_TEST_PAGE,primaryKey:"t",keyCode:s.KeyCode.T,requireCtrl:!0,requireShift:!0}],l.accessibilityKeyCmdDefs=[{action:i.AccessibilityAction.ENTER_FULLSCREEN,primaryKey:"f",keyCode:s.KeyCode.F},{action:i.AccessibilityAction.INCREASE_VOLUME,primaryKey:a.NonPrintingKey.ARROW_UP,keyCode:s.KeyCode.UP_ARROW},{action:i.AccessibilityAction.INCREASE_VOLUME,primaryKey:null,keyCode:s.KeyCode.MEDIA_INCREASE_VOLUME},{action:i.AccessibilityAction.INCREASE_VOLUME,primaryKey:null,keyCode:s.KeyCode.MEDIA_INCREASE_VOLUME_ALT},{action:i.AccessibilityAction.DECREASE_VOLUME,primaryKey:a.NonPrintingKey.ARROW_DOWN,keyCode:s.KeyCode.DOWN_ARROW},{action:i.AccessibilityAction.DECREASE_VOLUME,primaryKey:null,keyCode:s.KeyCode.MEDIA_DECREASE_VOLUME},{action:i.AccessibilityAction.DECREASE_VOLUME,primaryKey:null,keyCode:s.KeyCode.MEDIA_DECREASE_VOLUME_ALT},{action:i.AccessibilityAction.SEEK_BACK,primaryKey:a.NonPrintingKey.ARROW_LEFT,keyCode:s.KeyCode.LEFT_ARROW},{action:i.AccessibilityAction.SEEK_FORWARD,primaryKey:a.NonPrintingKey.ARROW_RIGHT,keyCode:s.KeyCode.RIGHT_ARROW},{action:i.AccessibilityAction.TOGGLE_PLAY,primaryKey:a.NonPrintingKey.SPACE,keyCode:s.KeyCode.SPACE},{action:i.AccessibilityAction.TOGGLE_PLAY,primaryKey:null,keyCode:s.KeyCode.MEDIA_TOGGLE_PLAY},{action:i.AccessibilityAction.TOGGLE_MUTE,primaryKey:"m",keyCode:s.KeyCode.M},{action:i.AccessibilityAction.TOGGLE_MUTE,primaryKey:"-",keyCode:s.KeyCode.SUBTRACT},{action:i.AccessibilityAction.TOGGLE_MUTE,primaryKey:null,keyCode:s.KeyCode.MEDIA_TOGGLE_MUTE},{action:i.AccessibilityAction.TOGGLE_TT,primaryKey:"c",keyCode:s.KeyCode.C},{action:i.AccessibilityAction.STOP,primaryKey:null,keyCode:s.KeyCode.MEDIA_STOP},{action:i.AccessibilityAction.PLAYLIST_NEXT,primaryKey:null,keyCode:s.KeyCode.MEDIA_PLAYLIST_NEXT},{action:i.AccessibilityAction.PLAYLIST_PREV,primaryKey:null,keyCode:s.KeyCode.MEDIA_PLAYLIST_PREV}],l.nativePluginConfig={diagnostic:{name:"VtgDiagnosticPlugin",url:"https://vidtech.cbsinteractive.com/cv-plugins/diagnostic/{{VER}}/diagnostic.min.js",qualifiedClassName:"window.VtgDiagnosticPlugin",priority:n.PluginPriority.HIGH,options:null},replay:{name:"VtgReplayPlugin",url:"https://vidtech.cbsinteractive.com/cv-plugins/replay/{{VER}}/replay.min.js",qualifiedClassName:"window.VtgReplayPlugin",priority:n.PluginPriority.LOW}},l.messages={ABR_UNAVAILABLE:"Single bitrate stream detected, adaptive bitrate system is unavailable",ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS:"You have reached the lowest available quality for this presentation.",ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:"You have reached the highest available quality for this presentation at this screen size",ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE:"Min bitrate restrictions are not offered with this streaming library",AD_STALLED:"Stalled ad detected",ADAPTER_UNAVAILABLE:"Unable to play the requested resource - mediaUrl not recognized",ADAPTER_LIB_UNAVAILABLE:"Unable to play the requested resource - External library is not loading",CAP_LEVEL_MAXBITRATE:"Max bitrate setting will be ignored since capQualityToPlayerSize is enabled",CMS_RESOURCE_UNAVAILABLE:"Resource unavailable",CMS_UNKNOWN:"CMS not supported",CONTENT_PLAYBACK_SETTING_IGNORED:"This API is only available after the CONTENT_START event has been dispatched. This setting will be ignored.",DAI_MISSING_ASSET_URL:"Unexpected condition: valid assetUrl not found in DAI stream data",DAI_SDK_UNAVAILABLE:"A DAI SDK is required for playback, but is not found",ENVIRONMENT_NOT_SUPPORTED:'Unable to locate a global "window" object or suitable alternative',FAIRPLAY_LICENSE_ERROR:"Issue with fairplay DRM and the provided license acquisition url",FAIRPLAY_APP_CERT_ERROR:"Issue creating a fairplay keysession with the provided application certificate",FAIRPLAY_NO_CONTENT_ID:"A valid content or asset id was not detected when creating fairplay drm session",FAIRPLAY_WEBKIT_ERROR:"Issue with webkit and keysession creations while using fairplay drm.",FATAL_PLAYBACK_MEDIA_ERROR:"Fatal media error, no option for recovery",FATAL_PLAYBACK_NETWORK_ERROR:"Fatal network error, no option for recovery",IMA_SDK_MISSING:"IMA SDK not found.",INVALID_PLAYLIST_INDEX:"Index provided to Playlist is out of range",INVALID_RESOURCE:"Resource configuration appears to be invalid",MANUAL_ABR_SWITCHING_UNAVAILABLE:"Native HTML5 Video does not allow manual bitrate switching",PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED:"StreamType.LIVE is detected. Redirecting to the stop method since a DVR window is not detected.",PLUGIN_LOAD_ERROR:"Unable to load plugin from url",RESOURCE_NOT_SUPPORTED:"Resource is not recognized or is currently unsupported",RETRY_PLAYBACK_MEDIA_ERROR:"Media error detected",RETRY_PLAYBACK_NETWORK_ERROR:"Network error detected",UNEXPECTED_CONDITION:"An unexpected condition was encountered",UNSPECIFIED_ERROR:"Unspecified error",VIDEO_PLAYBACK_UNAVAILABLE:"Unable to locate a video element or suitable alternative",WEBKIT_KEY_ADDED_SUCCESS:"Webkit key added successfully",WEBKIT_MEDIA_KEYS_NOT_SUPPORTED:"WebKitMediaKeys are not supported for this type of media on this user agent"},l);function l(){}r.AppResources=c},{"../enum/AccessibilityAction":94,"../enum/DiagnosticAction":100,"../enum/NonPrintingKey":113,"../enum/PluginPriority":122,"../util/KeyCode":215}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluginServices=void 0;var i=e("../core/QueryString"),o=e("../dataservice/AsyncDataRequest"),a=e("../dataservice/AsyncDataRequestOptions"),n=(Object.defineProperty(s.prototype,"viewController",{get:function(){return this.vc},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"system",{get:function(){return this.sys},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playerOptions",{get:function(){return this.playerOpts},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"buildInfo",{get:function(){return this.bi},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playerDomProxy",{get:function(){return this.domProxy},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"localization",{get:function(){return this.loc},enumerable:!1,configurable:!0}),s);function s(e){var t=this;this.xhr={performXhr:function(e){var t=e.onComplete;e.onComplete=function(e){t(e),e.target.destroy()},new o.AsyncDataRequest(a.AsyncDataRequestOptions.create(e))}},this.event={dispatchPluginEvent:function(e){t.dispatch(e)}},this.util={queryStrFromObj:function(e,t){return i.QueryString.encode(e)}},this.vc=null,this.sys=null,this.bi=null,this.domProxy=null,this.playerOpts=null,this.loc=null,this.vc=e.viewController,this.sys=e.system,this.bi=e.buildInfo,this.domProxy=e.domProxy,this.playerOpts=e.playerOptions,this.loc=e.localization,this.dispatch=e.dispatch}r.PluginServices=n},{"../core/QueryString":87,"../dataservice/AsyncDataRequest":90,"../dataservice/AsyncDataRequestOptions":91}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResourceConfiguration=void 0;function i(e){void 0===e&&(e={}),this.ad={context:null,showPrerollOnNonZeroStart:!1,viewabilityTracking:{partner:null,vguid:null,ptype:null},adTagParameters:{description_url:null,sz:"640x480",url:null,iu:null,ad_rule:null,ciu_szs:null,pp:null,cmsid:"2289",vid:null,hl:null,msid:null,an:null,nofb:null,ppid:null,tfcd:null,npa:null,cust_params:null},ima:{adCallUrl:null,loadVideoTimeoutMs:4e3,enableAdPreloading:!1,preloadContentAtEndOfPreRoll:!1},dai:{contentSourceId:null,daiVideoId:null,assetKey:null,apiKey:null,ssbStreamUrl:null,isLive:!1,format:null,streamActivityMonitorId:null}},this.location={cms:null,tokenMap:null,cmsUri:null,mediaUrl:null,textTrackUrl:null,thumbnailTrackUrl:null,drm:{enabled:!1,sessionId:null,ticket:null,playready:{url:null,header:null},widevine:{url:null,header:null},fairplay:{appCertUrl:null,licenseUrl:null,header:null}}},this.playback={id3OwnerIds:null,startTime:NaN,preloadContent:!1,liveEdgeSyncFragmentCount:3,abr:{maxBitrate:NaN,minBitrate:NaN,startBitrate:NaN,capQualityToScreenSize:!0}},this.metadata={},this.tracking={},this.overrides={},o.Util.merge(this,e)}var o=e("../core/Util");r.ResourceConfiguration=i},{"../core/Util":88}],50:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Shell=void 0;var i=e("es6-promise"),o=e("../core/Util"),a=e("../enum/ServiceName"),n=e("../service/BuildInfoService"),s=e("../service/MediaCapabilitiesService"),c=e("../service/SystemService"),l=e("../util/MediaCapabilities"),u=e("../util/System"),d=e("./ResourceConfiguration"),p=e("./VideoPlayer"),m=e("../core/Logger"),f=(y.createVideoPlayer=function(e,t,r){this.initialized?this.createVideoPlayerApp({options:e,callback:t}):(this.pendingPlayerRequests.push({options:e,callback:t}),null===this.initializing&&(this.initializing=!0,this.initialize(r)))},y.createVideoPlayerApp=function(t){var e,r=t.options.container,i=!1;(this.serviceCollection[a.ServiceName.System].isWebMaf||null!=r&&(r.constructor===HTMLDivElement||"object"==typeof r&&"function"==typeof r.getBoundingClientRect||"string"==typeof r&&null!=document.querySelector(r)))&&(i=!0),i||(e="Invalid player configuration: Missing presentation container.",m.Logger.error(e),t.callback(null,{message:e}));var o=new p.VideoPlayer({globalServices:this.serviceCollection,playerOptions:t.options});(this.playerCollection[o.appId]=o).initialize().then(function(e){return t.callback(e,null)}).catch(function(e){return t.callback(null,e)})},y.removeVideoPlayer=function(e){var t=this,r=this.playerCollection[e];return r?r.destroy().then(function(){delete t.playerCollection[e],m.Logger.log("[CVP] Player with id "+e+" removed.")}):i.Promise.resolve()},y.createResourceConfig=function(e){return new d.ResourceConfiguration(e)},y.getSysInfoForUser=function(){if(null===this.serviceCollection)return null;var e=o.Util.assign({},u.System.info),t=this.serviceCollection[a.ServiceName.MediaCapabilities].capabilities;return e.hasMediaSource=t.hasMediaSource,e.supportsNativeHls=t.supportsNativeHls,e},y.processPending=function(){for(var e=this.pendingPlayerRequests.length,t=0;t<e;t++)this.createVideoPlayerApp(this.pendingPlayerRequests[t]),this.pendingPlayerRequests[t]=null;this.pendingPlayerRequests=[]},y.createServices=function(e,t){var r={};r[a.ServiceName.System]=c.SystemService.getInstance(a.ServiceName.System),r[a.ServiceName.MediaCapabilities]=s.MediaCapabilitiesService.getInstance(a.ServiceName.MediaCapabilities,e),r[a.ServiceName.BuildInfo]=n.BuildInfoService.getInstance(a.ServiceName.BuildInfo,t),this.serviceCollection=r},y.initialize=function(t){var r=this;new l.MediaCapabilities({onComplete:function(e){r.createServices(e.target,t),r.initialized=!0,r.initializing=!1,r.processPending()}})},y.serviceCollection=null,y.playerCollection={},y.initialized=!1,y.initializing=null,y.pendingPlayerRequests=[],y);function y(){}r.Shell=f},{"../core/Logger":86,"../core/Util":88,"../enum/ServiceName":125,"../service/BuildInfoService":206,"../service/MediaCapabilitiesService":211,"../service/SystemService":214,"../util/MediaCapabilities":216,"../util/System":218,"./ResourceConfiguration":49,"./VideoPlayer":51,"es6-promise":25}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VideoPlayer=void 0;var i,a=e("es6-promise"),n=e("../core/Logger"),o=e("../core/Util"),s=e("../enum/LogLevel"),c=e("../enum/MediatorName"),l=e("../enum/ModelName"),u=e("../enum/NativePlugin"),d=e("../enum/NotificationName"),p=e("../enum/NotificationType"),m=e("../enum/PlaybackState"),f=e("../enum/PlayerEvent"),y=e("../enum/ProxyName"),h=e("../enum/ServiceName"),E=e("../enum/StreamType"),A=e("../playback/enum/Playback"),T=e("./AbstractApplication"),v=e("./ApiDecorators"),g=e("./AppResources"),P=e("./command_map"),N=(i=T.AbstractApplication,_(S,i),S.prototype.initialize=function(){var e=this,t=this.opts.playerOptions||{},r=t.plugins||[],i=this.getApi(),o={name:d.NotificationName.CHANGE_LANGUAGE,body:{value:t.language},type:p.NotificationType.INTERNAL};return this.addNativePlugins(r,t),i.registerPlugins(r).then(function(){return e.sendAsyncNotification(o,[f.PlayerEvent.LANGUAGE_CHANGE])}).then(function(){return e.localization.registerLocalizationData(t.localization),e.pIsReady=!0,e.sendNotification(d.NotificationName.READY,i),i}).catch(function(e){throw n.Logger.error(e),e})},S.prototype.destroy=function(){var e=this,t=i.prototype.destroy.bind(this);return this.killCurrentResource().then(function(){e.appMediator&&e.appMediator.prepForPlayerRemoval(),e.pContentPlaybackStateProxy=null,e.apiAccessors=null,e.apiMethods=null,t()}).catch(function(e){n.Logger.error(e)})},S.prototype.getApi=function(){var e=v.apiCollection({},this);return e.EventType=f.PlayerEvent,e},S.prototype.killCurrentResource=function(){return this.appMediator.killCurrentResource()},S.prototype.hasListenerFor=function(e){return i.prototype.hasListenerFor.call(this,e)},S.prototype.on=function(e,t){i.prototype.on.call(this,e,t)},S.prototype.once=function(e,t){i.prototype.once.call(this,e,t)},S.prototype.off=function(e,t){i.prototype.off.call(this,e,t)},Object.defineProperty(S.prototype,"isReady",{get:function(){return this.pIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"id",{get:function(){return this.appId},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"dimensions",{get:function(){return this.appMediator.getDimensions()},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"muted",{get:function(){return this.appMediator.getMuteState()},set:function(e){var t=e?d.NotificationName.MUTE:d.NotificationName.UNMUTE;this.transmitExtRequest(t)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"volume",{get:function(){return this.appMediator.getVolume()},set:function(e){this.transmitExtRequest(d.NotificationName.VOLUME_CHANGE,{value:e})},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"language",{get:function(){return this.localization.language},set:function(e){this.transmitExtRequest(d.NotificationName.CHANGE_LANGUAGE,{value:e})},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"contentTime",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.time:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"contentDuration",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.duration:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"streamTime",{get:function(){return this.modelCollectionProxy.getModel(l.ModelName.PresentationState).streamTime},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"streamDuration",{get:function(){return this.modelCollectionProxy.getModel(l.ModelName.PresentationState).streamDuration},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"playbackState",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.state:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"playlist",{get:function(){var e=this.facade.retrieveProxy(y.ProxyName.Playlist);return e?e.getApi():null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"autoQualitySwitching",{get:function(){return!!this.contentPlaybackStateProxy&&this.contentPlaybackStateProxy.qualitySwitchingMode===A.Playback.ABR_SWITCHING_MODE_AUTO},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.AUTO_QUALITY_SWITCHING,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"qualityInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.qualityInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"bitrate",{get:function(){var e=this.qualityInfo.quality||{bitrate:NaN};return null!=e.bitrate?e.bitrate:NaN},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.SWITCH_BITRATE,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"qualityCategory",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.userQualityCategory:null},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.SWITCH_QUALITY_CATEGORY,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"minBitrate",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.minBitrate:NaN},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.MIN_BITRATE,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"maxBitrate",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.maxBitrate:NaN},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.MAX_BITRATE,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"audioTrackInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"audioTrack",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.audioTracks.track:null},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.SWITCH_AUDIO_TRACK,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"resource",{get:function(){return this.appMediator.getCurrentResource()},set:function(e){this.transmitExtRequest(d.NotificationName.PREP_RESOURCE_COLLECTION,{resources:[e],start:!0,clear:!0})},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"textTrackEnabled",{get:function(){return this.facade.retrieveProxy(y.ProxyName.TextTrackProxy).enabled},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.SWITCH_TEXT_MODE,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"textTrack",{get:function(){return this.textTrackInfo?this.textTrackInfo.track:null},set:function(e){this.contentPlaybackStateProxy?this.transmitExtRequest(d.NotificationName.SWITCH_TEXT_TRACK,{value:e}):this.log(g.AppResources.messages.CONTENT_PLAYBACK_SETTING_IGNORED)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"textTrackInfo",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.textTrackInfo:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"streamType",{get:function(){return this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.streamType:null},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"isPlayingLive",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e&&!0===e.isPlayingLive},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"liveStreamUtcTime",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteTime:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"liveStreamUtcDuration",{get:function(){var e=this.contentPlaybackStateProxy?this.contentPlaybackStateProxy.model.liveStreamInfo:null;return e?e.absoluteDuration:NaN},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"isSuspended",{get:function(){return this.appMediator.isPlaybackSuspended()},enumerable:!1,configurable:!0}),S.prototype.enterFullscreen=function(){this.transmitExtRequest(d.NotificationName.ENTER_FULLSCREEN_REQUEST)},S.prototype.exitFullscreen=function(){this.transmitExtRequest(d.NotificationName.EXIT_FULLSCREEN_REQUEST)},S.prototype.play=function(){this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest(d.NotificationName.RESUME_PLAYBACK);var e={name:d.NotificationName.PLAY,type:p.NotificationType.EXTERNAL};return this.sendAsyncNotification(e,[f.PlayerEvent.CONTENT_PLAYING,f.PlayerEvent.AD_PLAYING],[f.PlayerEvent.AUTOPLAY_BLOCKED,f.PlayerEvent.VIDEO_PLAYBACK_ERROR,f.PlayerEvent.AD_ERROR])},S.prototype.pause=function(){if(this.streamType===E.StreamType.LIVE)return this.log(g.AppResources.messages.PAUSING_LINEAR_LIVE_STREAM_NOT_ALLOWED),this.stop();var e={name:d.NotificationName.PAUSE,type:p.NotificationType.EXTERNAL};return this.sendAsyncNotification(e,[f.PlayerEvent.CONTENT_PAUSED,f.PlayerEvent.AD_PAUSED])},S.prototype.togglePlayPause=function(){var e=this.playbackState,t=e===m.PlaybackState.PLAYING?d.NotificationName.PAUSE:e===m.PlaybackState.PAUSED?d.NotificationName.PLAY:null;t&&this.transmitExtRequest(t)},S.prototype.seek=function(e){var t=this.appMediator.validateSeek(e,this.contentDuration);if(null===t)return a.Promise.resolve();var r={name:d.NotificationName.SEEK,body:{value:t},type:p.NotificationType.EXTERNAL};return this.sendAsyncNotification(r,[f.PlayerEvent.SEEK_COMPLETE],[f.PlayerEvent.VIDEO_PLAYBACK_ERROR,f.PlayerEvent.AD_ERROR])},S.prototype.getModelSnapshot=function(){return this.appMediator.getSnapshot()},S.prototype.getAdBreakTimes=function(){return this.appMediator.getAdBreakTimes()||[]},S.prototype.grabFrame=function(){return this.appMediator.grabFrame()},S.prototype.getThumbnail=function(e){return this.contentPlaybackStateProxy.getThumbnail(e)},S.prototype.getContainerRect=function(){return this.appMediator.getContainerRect()},S.prototype.registerPlugins=function(r,i){var o=this;return new a.Promise(function(e,t){o.transmitExtRequest(d.NotificationName.LOAD_PLUGINS,{plugins:r,callback:function(){"function"==typeof i&&i(),e()}})})},S.prototype.removePlugin=function(e){this.transmitExtRequest(d.NotificationName.REMOVE_PLUGIN,{name:e})},S.prototype.getPlugin=function(e){return this.appMediator.getPlugin(e)},S.prototype.stop=function(){var e={name:d.NotificationName.STOP,type:p.NotificationType.EXTERNAL};return this.sendAsyncNotification(e,[f.PlayerEvent.RESOURCE_INTERRUPTED,f.PlayerEvent.RESOURCE_END])},S.prototype.goLive=function(){this.streamType&&this.streamType!==E.StreamType.VOD&&this.transmitExtRequest(d.NotificationName.SEEK_TO_LIVE)},S.prototype.focus=function(e){var t=this.dom.getMain();t&&t.focus(e)},S.prototype.blur=function(){var e=this.dom.getMain();e&&e.blur()},S.prototype.getConfigAsJson=function(){return this.appMediator.getConfigAsJson()},S.prototype.getAutoplayCapabilities=function(){return this.appMediator.getAutoplayCapabilities()},S.prototype.suspendPlayback=function(){var e=this;this.appMediator.isPlaybackSuspended()||this.pause().then(function(){e.transmitExtRequest(d.NotificationName.SUSPEND_PLAYBACK)})},S.prototype.resumePlayback=function(){this.appMediator.isPlaybackSuspended()&&this.transmitExtRequest(d.NotificationName.RESUME_PLAYBACK)},S.prototype.sendEvent=function(e,t){this.emit(e,t)},S.prototype.sendErrorEvent=function(e){this.dispatchEvt(e)},S.prototype.addNativePlugins=function(e,t){for(var r,i=this.facade.retrieveService(h.ServiceName.BuildInfo).playerVersion,o=t.nativePlugins,a=o&&o.length||0;a--;)switch(o[a]){case u.NativePlugin.REPLAY:(r=g.AppResources.nativePluginConfig.replay).url=r.url.replace("{{VER}}",i),e.push(g.AppResources.nativePluginConfig.replay);break;case u.NativePlugin.DIAGNOSTIC:(r=g.AppResources.nativePluginConfig.diagnostic).url=r.url.replace("{{VER}}",i),e.push(g.AppResources.nativePluginConfig.diagnostic)}},Object.defineProperty(S.prototype,"contentPlaybackStateProxy",{get:function(){return this.pContentPlaybackStateProxy||(this.pContentPlaybackStateProxy=this.facade.retrieveProxy(y.ProxyName.ContentPlaybackStateProxy)),this.pContentPlaybackStateProxy},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"localization",{get:function(){return this.facade.retrieveProxy(y.ProxyName.LocalizationProxy)},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"dom",{get:function(){return this.facade.retrieveProxy(y.ProxyName.PlayerDomProxy)},enumerable:!1,configurable:!0}),S.prototype.transmitExtRequest=function(e,t){this.sendNotification(e,t,p.NotificationType.EXTERNAL)},S.prototype.log=function(e,t){var r=t||s.LogLevel.DEBUG;this.facade.log(r,e)},S.prototype.init=function(){var e=this.opts.globalServices,t=this.opts.playerOptions.logLevel?this.opts.playerOptions.logLevel:s.LogLevel.OFF;this.registerGlobalServices(e),this.createLoggingService(t),this.createAutoplayCapabilitiesService(),this.createApplicationMediator(c.MediatorName.APPLICATION);var r=e[h.ServiceName.System].isWebMaf?d.NotificationName.BOOT_WEBMAF_APP:d.NotificationName.BOOT_APP;delete this.opts.globalServices,this.sendNotification(r,{playerOptions:this.opts.playerOptions||null,app:this},p.NotificationType.INTERNAL)},S.prototype.sendAsyncNotification=function(e,n,s){var c=this;return void 0===s&&(s=[]),new a.Promise(function(t,r){function i(e){a(),t(e)}function o(e){a(),r(e)}s.push(f.PlayerEvent.FATAL_ERROR);var a=function(){n.forEach(function(e){return c.off(e,i)}),s.forEach(function(e){return c.off(e,o)})};try{n.forEach(function(e){return c.on(e,i)}),s.forEach(function(e){return c.on(e,o)}),c.sendNotification(e.name,e.body,e.type)}catch(e){o(e)}})},b([v.apiMethod()],S.prototype,"hasListenerFor",null),b([v.apiMethod()],S.prototype,"on",null),b([v.apiMethod()],S.prototype,"once",null),b([v.apiMethod()],S.prototype,"off",null),b([v.apiAccessor()],S.prototype,"isReady",null),b([v.apiAccessor()],S.prototype,"id",null),b([v.apiAccessor()],S.prototype,"dimensions",null),b([v.apiAccessor()],S.prototype,"muted",null),b([v.apiAccessor()],S.prototype,"volume",null),b([v.apiAccessor()],S.prototype,"language",null),b([v.apiAccessor()],S.prototype,"contentTime",null),b([v.apiAccessor()],S.prototype,"contentDuration",null),b([v.apiAccessor()],S.prototype,"streamTime",null),b([v.apiAccessor()],S.prototype,"streamDuration",null),b([v.apiAccessor()],S.prototype,"playbackState",null),b([v.apiAccessor()],S.prototype,"playlist",null),b([v.apiAccessor()],S.prototype,"autoQualitySwitching",null),b([v.apiAccessor()],S.prototype,"qualityInfo",null),b([v.apiAccessor()],S.prototype,"bitrate",null),b([v.apiAccessor()],S.prototype,"qualityCategory",null),b([v.apiAccessor()],S.prototype,"minBitrate",null),b([v.apiAccessor()],S.prototype,"maxBitrate",null),b([v.apiAccessor()],S.prototype,"audioTrackInfo",null),b([v.apiAccessor()],S.prototype,"audioTrack",null),b([v.apiAccessor()],S.prototype,"resource",null),b([v.apiAccessor()],S.prototype,"textTrackEnabled",null),b([v.apiAccessor()],S.prototype,"textTrack",null),b([v.apiAccessor()],S.prototype,"textTrackInfo",null),b([v.apiAccessor()],S.prototype,"streamType",null),b([v.apiAccessor()],S.prototype,"isPlayingLive",null),b([v.apiAccessor()],S.prototype,"liveStreamUtcTime",null),b([v.apiAccessor()],S.prototype,"liveStreamUtcDuration",null),b([v.apiAccessor()],S.prototype,"isSuspended",null),b([v.apiMethod()],S.prototype,"enterFullscreen",null),b([v.apiMethod()],S.prototype,"exitFullscreen",null),b([v.apiMethod()],S.prototype,"play",null),b([v.apiMethod()],S.prototype,"pause",null),b([v.apiMethod()],S.prototype,"togglePlayPause",null),b([v.apiMethod()],S.prototype,"seek",null),b([v.apiMethod()],S.prototype,"getModelSnapshot",null),b([v.apiMethod()],S.prototype,"getAdBreakTimes",null),b([v.apiMethod()],S.prototype,"grabFrame",null),b([v.apiMethod()],S.prototype,"getThumbnail",null),b([v.apiMethod()],S.prototype,"getContainerRect",null),b([v.apiMethod()],S.prototype,"registerPlugins",null),b([v.apiMethod()],S.prototype,"removePlugin",null),b([v.apiMethod()],S.prototype,"getPlugin",null),b([v.apiMethod()],S.prototype,"stop",null),b([v.apiMethod()],S.prototype,"goLive",null),b([v.apiMethod()],S.prototype,"focus",null),b([v.apiMethod()],S.prototype,"blur",null),b([v.apiMethod()],S.prototype,"getConfigAsJson",null),b([v.apiMethod()],S.prototype,"getAutoplayCapabilities",null),b([v.apiMethod()],S.prototype,"suspendPlayback",null),b([v.apiMethod()],S.prototype,"resumePlayback",null),S);function S(e){var t=i.call(this,o.Util.assign({commandMap:P.command_map,id:e.playerOptions.id||null},e))||this;return t.pIsReady=!1,t.init(),t}r.VideoPlayer=N},{"../core/Logger":86,"../core/Util":88,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NativePlugin":112,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/PlaybackState":119,"../enum/PlayerEvent":121,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"../playback/enum/Playback":188,"./AbstractApplication":45,"./ApiDecorators":46,"./AppResources":47,"./command_map":52,"es6-promise":25}],52:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.command_map=void 0;var o=e("../controller/AbrSwitchCommand"),a=e("../controller/boot/BootCommand"),n=e("../controller/boot/BootWebMafCommand"),s=e("../controller/HandleErrorCommand"),c=e("../controller/KillResourcePresentationCommand"),l=e("../controller/LocalizationCommand"),u=e("../controller/PlaybackCommand"),d=e("../controller/PlaylistCommand"),p=e("../controller/PrepPlaybackCommand"),m=e("../controller/PrepResourceCommand"),f=e("../controller/PresentationStateChangeCommand"),y=e("../controller/ReadyCommand"),h=e("../controller/ResumePlaybackCommand"),E=e("../controller/RetrieveResourceCommand"),A=e("../controller/StartPresentationCommand"),T=e("../controller/SuspendPlaybackCommand"),v=e("../controller/TransformResourceCommand"),g=e("../controller/UserKeyboardCommand"),P=e("../enum/NotificationName");r.command_map=((i={})[P.NotificationName.DEFAULT]=null,i[P.NotificationName.BOOT_APP]=a.BootCommand,i[P.NotificationName.BOOT_WEBMAF_APP]=n.BootWebMafCommand,i[P.NotificationName.READY]=y.ReadyCommand,i[P.NotificationName.PLAY_ON_USER_GESTURE]=u.PlaybackCommand,i[P.NotificationName.PLAY]=u.PlaybackCommand,i[P.NotificationName.PAUSE]=u.PlaybackCommand,i[P.NotificationName.STOP]=u.PlaybackCommand,i[P.NotificationName.SEEK]=u.PlaybackCommand,i[P.NotificationName.SEEK_FORWARD]=u.PlaybackCommand,i[P.NotificationName.SEEK_BACK]=u.PlaybackCommand,i[P.NotificationName.SEEK_TO_LIVE]=u.PlaybackCommand,i[P.NotificationName.MUTE]=u.PlaybackCommand,i[P.NotificationName.UNMUTE]=u.PlaybackCommand,i[P.NotificationName.VOLUME_CHANGE]=u.PlaybackCommand,i[P.NotificationName.SWITCH_AUDIO_TRACK]=u.PlaybackCommand,i[P.NotificationName.SWITCH_TEXT_TRACK]=u.PlaybackCommand,i[P.NotificationName.SWITCH_TEXT_MODE]=u.PlaybackCommand,i[P.NotificationName.SUSPEND_PLAYBACK]=T.SuspendPlaybackCommand,i[P.NotificationName.RESUME_PLAYBACK]=h.ResumePlaybackCommand,i[P.NotificationName.SWITCH_BITRATE]=o.AbrSwitchCommand,i[P.NotificationName.SWITCH_QUALITY_CATEGORY]=o.AbrSwitchCommand,i[P.NotificationName.AUTO_QUALITY_SWITCHING]=o.AbrSwitchCommand,i[P.NotificationName.MIN_BITRATE]=o.AbrSwitchCommand,i[P.NotificationName.MAX_BITRATE]=o.AbrSwitchCommand,i[P.NotificationName.PREP_RESOURCE_COLLECTION]=m.PrepResourceCommand,i[P.NotificationName.VALIDATE_RESOURCE]=m.PrepResourceCommand,i[P.NotificationName.REGISTER_RESOURCE]=m.PrepResourceCommand,i[P.NotificationName.REGISTER_RESOURCE]=m.PrepResourceCommand,i[P.NotificationName.RETRIEVE_RESOURCE]=E.RetrieveResourceCommand,i[P.NotificationName.TRANSFORM_RESOURCE]=v.TransformResourceCommand,i[P.NotificationName.START_PRESENTATION]=A.StartPresentationCommand,i[P.NotificationName.PLAYLIST_ADVANCED]=d.PlaylistCommand,i[P.NotificationName.PLAYLIST_COMPLETE]=d.PlaylistCommand,i[P.NotificationName.PLAYLIST_CLEARED]=d.PlaylistCommand,i[P.NotificationName.PLAYLIST_CURRENT_RESOURCE_CLEARED]=d.PlaylistCommand,i[P.NotificationName.PLAY_RESOURCE]=p.PrepPlaybackCommand,i[P.NotificationName.KILL_RESOURCE_PRESENTATION]=c.KillResourcePresentationCommand,i[P.NotificationName.RESOURCE_INTERRUPTED]=f.PresentationStateChangeCommand,i[P.NotificationName.VIDEO_START_ERROR]=s.HandleErrorCommand,i[P.NotificationName.VIDEO_PLAYBACK_ERROR]=s.HandleErrorCommand,i[P.NotificationName.RESOURCE_ERROR]=s.HandleErrorCommand,i[P.NotificationName.AD_ERROR]=s.HandleErrorCommand,i[P.NotificationName.AD_STALLED]=s.HandleErrorCommand,i[P.NotificationName.PLAYBACK_SUSPENDED]=f.PresentationStateChangeCommand,i[P.NotificationName.PLAYBACK_RESUMED]=f.PresentationStateChangeCommand,i[P.NotificationName.POSTER_CLICK]=f.PresentationStateChangeCommand,i[P.NotificationName.PLAYLIST_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.RESOURCE_START]=f.PresentationStateChangeCommand,i[P.NotificationName.VIDEO_PROGRESS]=f.PresentationStateChangeCommand,i[P.NotificationName.QUALITY_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.QUALITY_INFO_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.CDN_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.DRM_KEYSYSTEM_CREATED]=f.PresentationStateChangeCommand,i[P.NotificationName.PRESENTATION_SIZE_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.FULLSCREEN_ENTER]=f.PresentationStateChangeCommand,i[P.NotificationName.FULLSCREEN_EXIT]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_TIME_UPDATE]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_BUFFERING]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_START]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_DURATION_AVAILABLE]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_SEGMENT_START]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_PLAYING]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_PAUSED]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_SEEKING]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_SEEKED]=f.PresentationStateChangeCommand,i[P.NotificationName.SEEK_REDIRECT_START]=f.PresentationStateChangeCommand,i[P.NotificationName.SEEK_REDIRECT_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_SEGMENT_END]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTENT_IS_LIVE_CHANGED]=f.PresentationStateChangeCommand,i[P.NotificationName.STREAM_TYPE_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.STREAM_METADATA]=f.PresentationStateChangeCommand,i[P.NotificationName.RESOURCE_END]=f.PresentationStateChangeCommand,i[P.NotificationName.RESOURCE_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_CUEPOINTS_AVAILABLE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_BREAK_START]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_BREAK_METADATA]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_BREAK_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_START]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_PAUSED]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_PLAYING]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_TIME_UPDATE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_FIRST_QUARTILE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_MIDPOINT]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_THIRD_QUARTILE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_BREAK_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_STALLED]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_STALLED]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_BUFFERING]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_CLICK]=f.PresentationStateChangeCommand,i[P.NotificationName.AD_SKIPPED]=f.PresentationStateChangeCommand,i[P.NotificationName.VIDEO_LOAD_COMPLETE]=f.PresentationStateChangeCommand,i[P.NotificationName.METADATA_CUEPOINT]=f.PresentationStateChangeCommand,i[P.NotificationName.TEXT_CUEPOINT]=f.PresentationStateChangeCommand,i[P.NotificationName.TEXT_TRACK_DISPLAY_MODE_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.TEXT_TRACK_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.TEXT_TRACK_INFO_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.TEXT_TRACK_AVAILABLE]=f.PresentationStateChangeCommand,i[P.NotificationName.AUDIO_TRACK_INFO_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.AUDIO_TRACK_CHANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.THUMBNAIL_TRACK_AVAILABLE]=f.PresentationStateChangeCommand,i[P.NotificationName.BEFORE_CONTROLS_VISIBLE]=f.PresentationStateChangeCommand,i[P.NotificationName.BEFORE_CONTROLS_HIDDEN]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTROLS_VISIBLE]=f.PresentationStateChangeCommand,i[P.NotificationName.CONTROLS_HIDDEN]=f.PresentationStateChangeCommand,i[P.NotificationName.MOUSE_ENTER_PRESENTATION]=f.PresentationStateChangeCommand,i[P.NotificationName.MOUSE_LEAVE_PRESENTATION]=f.PresentationStateChangeCommand,i[P.NotificationName.USER_PAUSE]=f.PresentationStateChangeCommand,i[P.NotificationName.USER_SETTINGS_REQUEST]=f.PresentationStateChangeCommand,i[P.NotificationName.AUTOPLAY_BLOCKED]=f.PresentationStateChangeCommand,i[P.NotificationName.PLAYLIST_OUT_OF_RANGE]=f.PresentationStateChangeCommand,i[P.NotificationName.CHANGE_LANGUAGE]=l.LocalizationCommand,i[P.NotificationName.LANGUAGE_CHANGE]=l.LocalizationCommand,i[P.NotificationName.USER_KEY_COMMAND]=g.UserKeyboardCommand,i)},{"../controller/AbrSwitchCommand":54,"../controller/HandleErrorCommand":55,"../controller/KillResourcePresentationCommand":56,"../controller/LocalizationCommand":57,"../controller/PlaybackCommand":59,"../controller/PlaylistCommand":60,"../controller/PrepPlaybackCommand":61,"../controller/PrepResourceCommand":62,"../controller/PresentationStateChangeCommand":63,"../controller/ReadyCommand":64,"../controller/ResumePlaybackCommand":65,"../controller/RetrieveResourceCommand":66,"../controller/StartPresentationCommand":67,"../controller/SuspendPlaybackCommand":68,"../controller/TransformResourceCommand":69,"../controller/UserKeyboardCommand":70,"../controller/boot/BootCommand":71,"../controller/boot/BootWebMafCommand":72,"../enum/NotificationName":114}],53:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.event_map=void 0;var o=e("../enum/NotificationName"),a=e("../enum/PlayerEvent");r.event_map=((i={})[o.NotificationName.READY]=a.PlayerEvent.READY,i[o.NotificationName.POSTER_CLICK]=a.PlayerEvent.POSTER_CLICK,i[o.NotificationName.VIDEO_START_ERROR]=a.PlayerEvent.VIDEO_START_ERROR,i[o.NotificationName.VIDEO_PLAYBACK_ERROR]=a.PlayerEvent.VIDEO_PLAYBACK_ERROR,i[o.NotificationName.RESOURCE_ERROR]=a.PlayerEvent.RESOURCE_ERROR,i[o.NotificationName.PLAYLIST_ADVANCED]=a.PlayerEvent.PLAYLIST_ADVANCED,i[o.NotificationName.PLAYLIST_COMPLETE]=a.PlayerEvent.PLAYLIST_COMPLETE,i[o.NotificationName.PLAYLIST_CHANGE]=a.PlayerEvent.PLAYLIST_CHANGE,i[o.NotificationName.PLAYLIST_CLEARED]=a.PlayerEvent.PLAYLIST_CLEARED,i[o.NotificationName.PLAYLIST_CURRENT_RESOURCE_CLEARED]=a.PlayerEvent.PLAYLIST_CURRENT_RESOURCE_CLEARED,i[o.NotificationName.RESOURCE_START]=a.PlayerEvent.RESOURCE_START,i[o.NotificationName.RESOURCE_END]=a.PlayerEvent.RESOURCE_END,i[o.NotificationName.RESOURCE_INTERRUPTED]=a.PlayerEvent.RESOURCE_INTERRUPTED,i[o.NotificationName.PLAYLIST_OUT_OF_RANGE]=a.PlayerEvent.PLAYLIST_OUT_OF_RANGE,i[o.NotificationName.PLAYBACK_SUSPENDED]=a.PlayerEvent.PLAYBACK_SUSPENDED,i[o.NotificationName.PLAYBACK_RESUMED]=a.PlayerEvent.PLAYBACK_RESUMED,i[o.NotificationName.AUDIO_TRACK_INFO_CHANGE]=a.PlayerEvent.AUDIO_TRACK_INFO_CHANGE,i[o.NotificationName.AUDIO_TRACK_CHANGE]=a.PlayerEvent.AUDIO_TRACK_CHANGE,i[o.NotificationName.QUALITY_CHANGE]=a.PlayerEvent.QUALITY_CHANGE,i[o.NotificationName.QUALITY_INFO_CHANGE]=a.PlayerEvent.QUALITY_INFO_CHANGE,i[o.NotificationName.CDN_CHANGE]=a.PlayerEvent.CDN_CHANGE,i[o.NotificationName.CONTENT_START]=a.PlayerEvent.CONTENT_START,i[o.NotificationName.CONTENT_DURATION_AVAILABLE]=a.PlayerEvent.CONTENT_DURATION_AVAILABLE,i[o.NotificationName.CONTENT_SEGMENT_START]=a.PlayerEvent.CONTENT_SEGMENT_START,i[o.NotificationName.CONTENT_TIME_UPDATE]=a.PlayerEvent.CONTENT_PROGRESS,i[o.NotificationName.CONTENT_BUFFERING]=a.PlayerEvent.RESOURCE_BUFFERING,i[o.NotificationName.CONTENT_PLAYING]=a.PlayerEvent.CONTENT_PLAYING,i[o.NotificationName.CONTENT_PAUSED]=a.PlayerEvent.CONTENT_PAUSED,i[o.NotificationName.CONTENT_SEEKING]=a.PlayerEvent.SEEK_START,i[o.NotificationName.CONTENT_SEEKED]=a.PlayerEvent.SEEK_COMPLETE,i[o.NotificationName.CONTENT_IS_LIVE_CHANGED]=a.PlayerEvent.CONTENT_IS_PLAYING_LIVE,i[o.NotificationName.STREAM_TYPE_CHANGE]=a.PlayerEvent.STREAM_TYPE_CHANGE,i[o.NotificationName.STREAM_METADATA]=a.PlayerEvent.STREAM_METADATA,i[o.NotificationName.SEEK_REDIRECT_START]=a.PlayerEvent.SEEK_REDIRECT_START,i[o.NotificationName.SEEK_REDIRECT_COMPLETE]=a.PlayerEvent.SEEK_REDIRECT_COMPLETE,i[o.NotificationName.CONTENT_SEGMENT_END]=a.PlayerEvent.CONTENT_SEGMENT_END,i[o.NotificationName.CONTENT_COMPLETE]=a.PlayerEvent.CONTENT_COMPLETE,i[o.NotificationName.DRM_KEYSYSTEM_CREATED]=a.PlayerEvent.DRM_KEYSYSTEM_CREATED,i[o.NotificationName.METADATA_CUEPOINT]=a.PlayerEvent.METADATA_CUEPOINT,i[o.NotificationName.TEXT_CUEPOINT]=a.PlayerEvent.TEXT_CUEPOINT,i[o.NotificationName.TEXT_TRACK_DISPLAY_MODE_CHANGE]=a.PlayerEvent.TEXT_TRACK_DISPLAY_MODE_CHANGE,i[o.NotificationName.TEXT_TRACK_CHANGE]=a.PlayerEvent.TEXT_TRACK_CHANGE,i[o.NotificationName.TEXT_TRACK_INFO_CHANGE]=a.PlayerEvent.TEXT_TRACK_INFO_CHANGE,i[o.NotificationName.TEXT_TRACK_AVAILABLE]=a.PlayerEvent.TEXT_TRACK_AVAILABLE,i[o.NotificationName.VIDEO_LOAD_COMPLETE]=a.PlayerEvent.VIDEO_LOAD_COMPLETE,i[o.NotificationName.THUMBNAIL_TRACK_AVAILABLE]=a.PlayerEvent.THUMBNAIL_TRACK_AVAILABLE,i[o.NotificationName.AD_CUEPOINTS_AVAILABLE]=a.PlayerEvent.AD_CUEPOINTS_AVAILABLE,i[o.NotificationName.AD_BREAK_START]=a.PlayerEvent.AD_BREAK_START,i[o.NotificationName.AD_BREAK_METADATA]=a.PlayerEvent.AD_BREAK_METADATA,i[o.NotificationName.AD_START]=a.PlayerEvent.AD_START,i[o.NotificationName.AD_PAUSED]=a.PlayerEvent.AD_PAUSED,i[o.NotificationName.AD_PLAYING]=a.PlayerEvent.AD_PLAYING,i[o.NotificationName.AD_TIME_UPDATE]=a.PlayerEvent.AD_PROGRESS,i[o.NotificationName.AD_FIRST_QUARTILE]=a.PlayerEvent.AD_FIRST_QUARTILE,i[o.NotificationName.AD_MIDPOINT]=a.PlayerEvent.AD_MIDPOINT,i[o.NotificationName.AD_THIRD_QUARTILE]=a.PlayerEvent.AD_THIRD_QUARTILE,i[o.NotificationName.AD_COMPLETE]=a.PlayerEvent.AD_COMPLETE,i[o.NotificationName.AD_BREAK_COMPLETE]=a.PlayerEvent.AD_BREAK_COMPLETE,i[o.NotificationName.AD_ERROR]=a.PlayerEvent.AD_ERROR,i[o.NotificationName.AD_STALLED]=a.PlayerEvent.AD_STALLED,i[o.NotificationName.AD_BREAK_DISCARDED]=a.PlayerEvent.AD_BREAK_DISCARDED,i[o.NotificationName.AD_BUFFERING]=a.PlayerEvent.RESOURCE_BUFFERING,i[o.NotificationName.AD_CLICK]=a.PlayerEvent.AD_CLICK,i[o.NotificationName.AD_SKIPPED]=a.PlayerEvent.AD_SKIPPED,i[o.NotificationName.USER_PAUSE]=a.PlayerEvent.USER_PAUSE,i[o.NotificationName.BEFORE_CONTROLS_VISIBLE]=a.PlayerEvent.BEFORE_CONTROLS_VISIBLE,i[o.NotificationName.BEFORE_CONTROLS_HIDDEN]=a.PlayerEvent.BEFORE_CONTROLS_HIDDEN,i[o.NotificationName.CONTROLS_VISIBLE]=a.PlayerEvent.CONTROLS_VISIBLE,i[o.NotificationName.CONTROLS_HIDDEN]=a.PlayerEvent.CONTROLS_HIDDEN,i[o.NotificationName.USER_SETTINGS_REQUEST]=a.PlayerEvent.USER_SETTINGS,i[o.NotificationName.LIVE_PRESENTATION_STOPPED]=a.PlayerEvent.LIVE_PRESENTATION_STOPPED,i[o.NotificationName.PRESENTATION_SIZE_CHANGE]=a.PlayerEvent.PRESENTATION_SIZE_CHANGE,i[o.NotificationName.FULLSCREEN_ENTER]=a.PlayerEvent.FULLSCREEN_ENTER,i[o.NotificationName.FULLSCREEN_EXIT]=a.PlayerEvent.FULLSCREEN_EXIT,i[o.NotificationName.MOUSE_ENTER_PRESENTATION]=a.PlayerEvent.MOUSE_ENTER_PRESENTATION,i[o.NotificationName.MOUSE_LEAVE_PRESENTATION]=a.PlayerEvent.MOUSE_LEAVE_PRESENTATION,i[o.NotificationName.LANGUAGE_CHANGE]=a.PlayerEvent.LANGUAGE_CHANGE,i[o.NotificationName.USER_KEYBOARD_COMMAND]=a.PlayerEvent.USER_KEYBOARD_COMMAND,i[o.NotificationName.AUTOPLAY_BLOCKED]=a.PlayerEvent.AUTOPLAY_BLOCKED,i)},{"../enum/NotificationName":114,"../enum/PlayerEvent":121}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbrSwitchCommand=void 0;var i,a=e("../app/AppResources"),n=e("../core/Util"),s=e("../enum/LogLevel"),c=e("../enum/MediatorName"),l=e("../enum/NotificationName"),u=e("../enum/ProxyName"),d=e("../playback/enum/Playback"),p=e("../util/Utils"),o=e("./LogAwareSimpleCommand"),m=(i=o.LogAwareSimpleCommand,_(f,i),f.prototype.execute=function(e){var t=this.facade.retrieveMediator(c.MediatorName.PRESENTATION_MEDIATOR),r=this.facade.retrieveProxy(u.ProxyName.ContentPlaybackStateProxy),i=t.adapter,o=e.body.value;if(r.isAbrSwitchingAvailable)switch(e.name){case l.NotificationName.SWITCH_BITRATE:var a=p.Utils.getIndexForBitrate(r.model.manifestQualities,o,!1);this.switchToIndex(a,r,i);break;case l.NotificationName.SWITCH_QUALITY_CATEGORY:r.userQualityCategory=o,this.switchQualityCategory(r,o,i);break;case l.NotificationName.AUTO_QUALITY_SWITCHING:i.autoQualitySwitching=o,r.qualitySwitchingMode=this.getAbrMode(o);break;case l.NotificationName.MIN_BITRATE:i.minBitrate=o;break;case l.NotificationName.MAX_BITRATE:i.maxBitrate=o}else r.qualitySwitchingMode=d.Playback.ABR_SWITCHING_MODE_UNAVAILABLE},f.prototype.switchToIndex=function(e,t,r){var i=t.minIndex,o=t.maxIndex;n.Util.inRange(e,i,o)?(r.autoQualitySwitching=!1,t.qualitySwitchingMode=this.getAbrMode(!1),r.currentIndex=e):this.logger.log(s.LogLevel.WARN,o<=e?a.AppResources.messages.ABR_MANUAL_SWITCHING_REACHED_UPPER_BOUNDS:a.AppResources.messages.ABR_MANUAL_SWITCHING_REACHED_LOWER_BOUNDS)},f.prototype.switchQualityCategory=function(e,t,r){var i=e.model.manifestQualities,o=p.Utils.getMinAndMaxValuesForCategory(i,t),a=o.minBitrate,n=o.maxBitrate,s=o.minIndex;s===o.maxIndex?this.switchToIndex(s,e,r):(r.minBitrate=a,r.maxBitrate=n)},f.prototype.getAbrMode=function(e){return e?d.Playback.ABR_SWITCHING_MODE_AUTO:d.Playback.ABR_SWITCHING_MODE_MANUAL},f);function f(){return null!==i&&i.apply(this,arguments)||this}r.AbrSwitchCommand=m},{"../app/AppResources":47,"../core/Util":88,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/ProxyName":123,"../playback/enum/Playback":188,"../util/Utils":220,"./LogAwareSimpleCommand":58}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HandleErrorCommand=void 0;var i,c=e("../app/event_map"),l=e("../enum/MediatorName"),o=e("../enum/NotificationName"),u=e("../enum/PlayerEvent"),d=e("../event/AdErrorEvent"),p=e("../event/PlayerErrorEvent"),a=e("./LogAwareSimpleCommand"),n=(i=a.LogAwareSimpleCommand,_(s,i),s.prototype.execute=function(e){var t,r,i,o,a,n,s=this.facade.retrieveMediator(l.MediatorName.APPLICATION);s&&(t=e.name,r=c.event_map[t],i=e.body,o=this.isAdRelatedError(t)?new d.AdErrorEvent(i.code,i.message,i.data,i.fatal):new p.PlayerErrorEvent(r,i.code,i.message,i.data,i.fatal),i.fatal&&(a=new p.PlayerErrorEvent(u.PlayerEvent.FATAL_ERROR,i.code,i.message,i.data,i.fatal),s.sendErrorEvent(a)),s.sendErrorEvent(o),n=new p.PlayerErrorEvent(u.PlayerEvent.ERROR,i.code,i.message,i.data,i.fatal),s.sendErrorEvent(n))},s.prototype.isAdRelatedError=function(e){return e===o.NotificationName.AD_ERROR||e===o.NotificationName.AD_STALLED},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.HandleErrorCommand=n},{"../app/event_map":53,"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/PlayerEvent":121,"../event/AdErrorEvent":130,"../event/PlayerErrorEvent":131,"./LogAwareSimpleCommand":58}],56:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KillResourcePresentationCommand=void 0;var i,o=e("./LogAwareSimpleCommand"),a=e("../enum/MediatorName"),n=e("../enum/ProxyName"),s=(i=o.LogAwareSimpleCommand,_(c,i),c.prototype.execute=function(e){this.facade.removeMediator(a.MediatorName.PRESENTATION_MEDIATOR),this.facade.removeProxy(n.ProxyName.ResourceProxy),this.facade.retrieveProxy(n.ProxyName.ModelCollectionProxy).reset()},c);function c(){return null!==i&&i.apply(this,arguments)||this}r.KillResourcePresentationCommand=s},{"../enum/MediatorName":109,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LocalizationCommand=void 0;var i,n=e("../enum/LocalizationId"),s=e("../enum/NotificationName"),c=e("../enum/ProxyName"),o=e("./LogAwareSimpleCommand"),a=(i=o.LogAwareSimpleCommand,_(l,i),l.prototype.execute=function(e){var r=this,t=e.name,i=e.body;switch(t){case s.NotificationName.CHANGE_LANGUAGE:var o=this.facade.retrieveProxy(c.ProxyName.LocalizationProxy),a=i.value;o.changeLanguage(a).then(function(){var e,t=r.facade.retrieveProxy(c.ProxyName.PlayerDomProxy);t&&((e=t.getMain()).setAttribute("aria-label",o.localize(n.LocalizationId.MEDIA_PLAYER)),e.setAttribute("lang",o.language)),r.sendNotification(s.NotificationName.LANGUAGE_CHANGE,i)});break;case s.NotificationName.LANGUAGE_CHANGE:this.sendNotification(s.NotificationName.APP_EVENT,{notificationName:t,data:i})}},l);function l(){return null!==i&&i.apply(this,arguments)||this}r.LocalizationCommand=a},{"../enum/LocalizationId":105,"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LogAwareSimpleCommand=void 0;var i,o=e("../mvc/AbstractSimpleCommand"),a=(i=o.AbstractSimpleCommand,_(n,i),Object.defineProperty(n.prototype,"logger",{get:function(){return this.facade.logger},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},n);function n(){return i.call(this)||this}r.LogAwareSimpleCommand=a},{"../mvc/AbstractSimpleCommand":163}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackCommand=void 0;var i,v=e("../core/Util"),n=e("../enum/Device"),s=e("../enum/LogLevel"),g=e("../enum/MediatorName"),P=e("../enum/ModelName"),N=e("../enum/NotificationName"),S=e("../enum/NotificationType"),b=e("../enum/ProxyName"),c=e("../enum/ServiceName"),o=e("../enum/StreamType"),a=e("./LogAwareSimpleCommand"),l=(i=a.LogAwareSimpleCommand,_(u,i),u.prototype.execute=function(e){var t,r,i,o=this,a=this.facade.retrieveMediator(g.MediatorName.PRESENTATION_MEDIATOR),n=this.contentPlaybackStateProxy.model;switch(e.name){case N.NotificationName.PLAY_ON_USER_GESTURE:a?(this.invokePlayOnUserGesture(a),i=this.facade.retrieveProxy(b.ProxyName.Playlist),this.facade.sendNotification(N.NotificationName.POSTER_CLICK,{resource:i.currentResource},S.NotificationType.INTERNAL)):this.facade.sendNotification(N.NotificationName.POSTER_CLICK,null,S.NotificationType.INTERNAL);break;case N.NotificationName.PLAY:var s=!!a,c=s&&this.getModel(P.ModelName.PresentationState).started;s&&e.type===S.NotificationType.EXTERNAL&&!c?this.invokePlayOnUserGesture(a):c&&a&&a.play();break;case N.NotificationName.PAUSE:a&&a.pause(),(r=this.getModel(P.ModelName.PresentationState)).isCurrentVideoAd||e.type!==S.NotificationType.UI||this.facade.sendNotification(N.NotificationName.USER_PAUSE,null,S.NotificationType.INTERNAL);break;case N.NotificationName.STOP:var l=this.facade.retrieveMediator(g.MediatorName.APPLICATION),u=this.facade.retrieveProxy(b.ProxyName.Playlist).currentResource,d=this.isVod();l.killCurrentResource().then(function(){d||o.sendNotification(N.NotificationName.APP_EVENT,{notificationName:N.NotificationName.LIVE_PRESENTATION_STOPPED,data:u})});break;case N.NotificationName.SEEK:a.seek(e.body.value);break;case N.NotificationName.SEEK_FORWARD:t=n.time+e.body.value,a.seek(Math.min(t,n.duration));break;case N.NotificationName.SEEK_BACK:t=n.time-e.body.value,a.seek(Math.max(t,0));break;case N.NotificationName.SEEK_TO_LIVE:!this.isVod()&&n.liveStreamInfo&&(t=n.liveStreamInfo.relativeDuration,a.seek(Math.min(t,n.duration)));break;case N.NotificationName.SWITCH_AUDIO_TRACK:a.adapter.audioTrack=e.body.value;break;case N.NotificationName.SWITCH_TEXT_TRACK:var p,m=e.body.value;m&&(this.facade.retrieveProxy(b.ProxyName.TextTrackProxy).language=m.language,p=this.contentPlaybackStateProxy.getTextTrackById(m.id),a.adapter.textTrack=p);break;case N.NotificationName.SWITCH_TEXT_MODE:var f=e.body.value,y=this.facade.retrieveProxy(b.ProxyName.TextTrackProxy);y.enabled=f,a.adapter.textTrackMode=y.mode;break;case N.NotificationName.MUTE:a.mute(!0);break;case N.NotificationName.UNMUTE:a.mute(!1);break;case N.NotificationName.VOLUME_CHANGE:var h,E=e.body,A=E.value,T=E.muted;isNaN(A)||a.setVolume(A),r=this.getModel(P.ModelName.PresentationState),v.Util.isUndefined(T)||r.isMuted==T||a.mute(T),e.type!==S.NotificationType.EXTERNAL||(h=this.facade.retrieveMediator(g.MediatorName.UI))&&h.setVolume(A)}},Object.defineProperty(u.prototype,"contentPlaybackStateProxy",{get:function(){return this.facade.retrieveProxy(b.ProxyName.ContentPlaybackStateProxy)},enumerable:!1,configurable:!0}),u.prototype.isVod=function(){var e=this.contentPlaybackStateProxy.model.streamType;return e!=o.StreamType.LIVE&&e!=o.StreamType.DVR},u.prototype.invokePlayOnUserGesture=function(o){var t=this,e=this.facade.retrieveProxy(b.ProxyName.PlayerDomProxy),a=this.facade.retrieveService(c.ServiceName.System);e&&a.device!=n.Device.IPAD&&a.device!=n.Device.LG_SMART_TV?e.primeVideo().then(function(){var t,r,i;a.device==n.Device.IPHONE?(t="timeupdate",r=e.getVideo(),i=function(e){r.removeEventListener(t,i),setTimeout(function(){return o.playOnUserGesture()},200)},r.addEventListener(t,i)):o.playOnUserGesture()}).catch(function(e){t.log(s.LogLevel.ERROR,"ERROR - PlaybackCommand: Priming FAILED.  "+e.message),t.facade.sendNotification(N.NotificationName.AUTOPLAY_BLOCKED,null,S.NotificationType.INTERNAL)}):o&&o.playOnUserGesture()},u);function u(){return null!==i&&i.apply(this,arguments)||this}r.PlaybackCommand=l},{"../core/Util":88,"../enum/Device":99,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"./LogAwareSimpleCommand":58}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaylistCommand=void 0;var i,o=e("es6-promise"),a=e("../enum/MediatorName"),n=e("../enum/NotificationName"),s=e("../enum/NotificationType"),c=e("./LogAwareSimpleCommand"),l=(i=c.LogAwareSimpleCommand,_(u,i),u.prototype.execute=function(e){var t=this;switch(e.name){case n.NotificationName.PLAYLIST_ADVANCED:this.close().then(function(){t.sendAppEventNotification(e.name,e.body),t.sendNotification(n.NotificationName.VALIDATE_RESOURCE,e.body,s.NotificationType.INTERNAL)});break;case n.NotificationName.PLAYLIST_COMPLETE:case n.NotificationName.PLAYLIST_CLEARED:case n.NotificationName.PLAYLIST_CURRENT_RESOURCE_CLEARED:this.close().then(function(){t.sendAppEventNotification(e.name,e.body)})}},u.prototype.sendAppEventNotification=function(e,t){void 0===t&&(t=null),this.sendNotification(n.NotificationName.APP_EVENT,{notificationName:e,data:t})},u.prototype.close=function(){var e=this.facade.retrieveMediator(a.MediatorName.PRESENTATION_MEDIATOR);return e?e.close():o.Promise.resolve()},u);function u(){return null!==i&&i.apply(this,arguments)||this}r.PlaylistCommand=l},{"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/NotificationType":115,"./LogAwareSimpleCommand":58,"es6-promise":25}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepPlaybackCommand=void 0;var i,s=e("../ad/dai-api/DaiProxyApi"),u=e("../app/AppResources"),d=e("../enum/AdContext"),p=e("../enum/ErrorCode"),m=e("../enum/MediatorName"),n=e("../enum/ModelName"),f=e("../enum/NotificationName"),c=e("../enum/PlayerDom"),y=e("../enum/ProxyName"),l=e("../enum/ServiceName"),h=e("../model/ContentPlaybackStateProxy"),E=e("../service/DaiAdService"),a=e("../service/ImaAdService"),A=e("../view/ContentPresentationMediator"),T=e("../view/DaiPresentationMediator"),v=e("../view/ImaPresentationMediator"),o=e("./LogAwareSimpleCommand"),g=e("../enum/Autoplay"),P=e("../core/Util"),N=(i=o.LogAwareSimpleCommand,_(S,i),S.prototype.execute=function(e){var t,r,i,o=this,a=this.facade.retrieveService(l.ServiceName.System);a.global&&a.global.document?(t=this.getModel(n.ModelName.PresentationState),r=this.getModel(n.ModelName.PlayerOptions),i=this.isAutoplayRequested(r.autoplay),this.facade.registerProxy(new h.ContentPlaybackStateProxy(y.ProxyName.ContentPlaybackStateProxy)),a.isWebMaf||a.isTizenSmartTv||a.isXboxOne?(this.processAutoplaySupport({supportsMutedAutoplay:!0,supportsUnmutedAutoplay:!0},t,r),this.createPresentation(a)):!t.skipAutoplayCheck&&i?this.checkAutoplay().then(function(e){o.processAutoplaySupport(e,t,r),o.createPresentation(a)}):this.createPresentation(a)):this.sendNotification(f.NotificationName.VIDEO_START_ERROR,{error:u.AppResources.messages.ENVIRONMENT_NOT_SUPPORTED})},S.prototype.createPresentation=function(e){var t=this.getPresoMediator(e);t?(this.facade.registerMediator(t),this.sendNotification(f.NotificationName.START_PRESENTATION)):this.sendNotification(f.NotificationName.RESOURCE_ERROR,{code:p.ErrorCode.INVALID_RESOURCE_FORMAT,message:u.AppResources.messages.RESOURCE_NOT_SUPPORTED})},S.prototype.getPresoMediator=function(e){var t=this.facade.retrieveProxy(y.ProxyName.PlayerDomProxy),r=this.getVideo(e,t),i=this.facade.retrieveProxy(y.ProxyName.ResourceProxy),o=i.ad,a=o&&o.context||null,n=m.MediatorName.PRESENTATION_MEDIATOR,s=null;if(null===r)return this.sendNotification(f.NotificationName.RESOURCE_ERROR,{code:p.ErrorCode.UNEXPECTED_CONDITION,message:u.AppResources.messages.VIDEO_PLAYBACK_UNAVAILABLE}),s;switch(a){case d.AdContext.IMA:(c=this.createImaAdService(i))?(t.setVideoAttribute("playsinline",""),s=new v.ImaPresentationMediator(n,r)):this.sendNotification(f.NotificationName.RESOURCE_ERROR,{code:p.ErrorCode.IMA_SDK_MISSING,message:u.AppResources.messages.IMA_SDK_MISSING});break;case d.AdContext.DAI_SDK:case d.AdContext.DAI_API:var c,l=a===d.AdContext.DAI_API;(c=this.createDaiAdService(t,i,l,e))&&(s=new T.DaiPresentationMediator(n,r)),c||this.sendNotification(f.NotificationName.RESOURCE_ERROR,{code:p.ErrorCode.DAI_SDK_MISSING,message:u.AppResources.messages.DAI_SDK_UNAVAILABLE});break;case d.AdContext.DAI_SSB:o.dai.ssbStreamUrl&&(i.location.mediaUrl=o.dai.ssbStreamUrl),s=new A.ContentPresentationMediator(n,r);break;default:s=new A.ContentPresentationMediator(n,r)}return s},S.prototype.createDaiAdService=function(e,t,r,i){if(this.facade.retrieveService(l.ServiceName.DaiAd))return!0;var o=new E.DaiAdService(l.ServiceName.DaiAd,r?s.DaiProxyApi:null);if(this.facade.registerService(o),!o.sdk)return o.destroy(),this.facade.removeService(l.ServiceName.DaiAd),!1;var a=t.ad.viewabilityTracking;e&&o.setContainer(e.getElement(c.PlayerDom.AD_CONTAINER));var n=r?i.createSimpleVideoInterface():e.getVideo();return o.setVideoInterface(n),o.setTrackingData({ptype:a.ptype,vguid:a.vguid,partner:a.partner}),!0},S.prototype.getVideoInterface=function(e,t){return e.createSimpleVideoInterface()},S.prototype.getVideo=function(e,t){return e.isWebMaf?e.webMafPlayer:t?t.getVideo():null},S.prototype.createImaAdService=function(e){if(this.facade.retrieveService(l.ServiceName.ImaAd))return!0;var t=new a.ImaAdService(l.ServiceName.ImaAd);if(this.facade.registerService(t),null===t.sdk)return this.facade.removeService(l.ServiceName.ImaAd),!1;var r=this.facade.retrieveProxy(y.ProxyName.PlayerDomProxy),i=r.getElement(c.PlayerDom.AD_CONTAINER);t.setContainer(i),t.adsLoaderOptions={adContainer:i,adClickEl:r.getElement(c.PlayerDom.AD_CLICK_EL),video:r.getVideo(),sdkSettings:t.sdkSettings,adService:t};var o=e.ad.viewabilityTracking;return t.setTrackingData({ptype:o.ptype,vguid:o.vguid,partner:o.partner}),t.createAdsLoader(),!0},S.prototype.processAutoplaySupport=function(e,t,r){var i=r.autoplay,o=e.supportsMutedAutoplay,a=e.supportsUnmutedAutoplay;t.autoplaySupport={supportsMutedAutoplay:o,supportsUnmutedAutoplay:a},t.isMuteAtPlayStart=i===g.Autoplay.ATTEMPT_MUTED&&o||i===g.Autoplay.ATTEMPT_UNMUTED_THEN_MUTED&&!a&&o,t.isAutoplay=this.shouldAutoplay(i,e)},S.prototype.isAutoplayRequested=function(e){return!P.Util.isEmpty(e)&&e!==g.Autoplay.NONE},S.prototype.shouldAutoplay=function(e,t){if(P.Util.isEmpty(e)||e===g.Autoplay.NONE)return!1;var r=t.supportsMutedAutoplay,i=t.supportsUnmutedAutoplay,o=e===g.Autoplay.ATTEMPT_MUTED&&r,a=e===g.Autoplay.ATTEMPT_UNMUTED&&i,n=!a&&e===g.Autoplay.ATTEMPT_UNMUTED_THEN_MUTED&&r;return o||a||n},S.prototype.checkAutoplay=function(){return this.getService(l.ServiceName.AutoplayCapabilities).detectCapabilities()},S);function S(){return null!==i&&i.apply(this,arguments)||this}r.PrepPlaybackCommand=N},{"../ad/dai-api/DaiProxyApi":40,"../app/AppResources":47,"../core/Util":88,"../enum/AdContext":96,"../enum/Autoplay":97,"../enum/ErrorCode":102,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PlayerDom":120,"../enum/ProxyName":123,"../enum/ServiceName":125,"../model/ContentPlaybackStateProxy":133,"../service/DaiAdService":207,"../service/ImaAdService":209,"../view/ContentPresentationMediator":231,"../view/DaiPresentationMediator":232,"../view/ImaPresentationMediator":234,"./LogAwareSimpleCommand":58}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepResourceCommand=void 0;var i,o=e("../app/AppResources"),a=e("../core/Util"),n=e("../enum/ErrorCode"),s=e("../enum/LogLevel"),c=e("../enum/MediatorName"),l=e("../enum/NotificationName"),u=e("../enum/NotificationType"),d=e("../enum/ProxyName"),p=e("../model/ResourceProxy"),m=e("./command-helpers/ResourceValidator"),f=e("./LogAwareSimpleCommand"),y=(i=f.LogAwareSimpleCommand,_(h,i),h.prototype.execute=function(e){switch(e.name){case l.NotificationName.PREP_RESOURCE_COLLECTION:this.prepResourceCollection(e);break;case l.NotificationName.VALIDATE_RESOURCE:if(a.Util.isEmpty(e.body.resource))return void this.facade.sendNotification(l.NotificationName.RESOURCE_ERROR,{code:n.ErrorCode.INVALID_RESOURCE_FORMAT,message:o.AppResources.messages.INVALID_RESOURCE+": Resource missing."},u.NotificationType.INTERNAL);this.validateResource(e);break;case l.NotificationName.REGISTER_RESOURCE:this.registerResource(e)}},h.prototype.prepResourceCollection=function(e){var t=e.body.resources,r=this.facade.retrieveMediator(c.MediatorName.APPLICATION),i=this.getProxy(d.ProxyName.Playlist);!0===e.body.clear&&r&&i.length?r.killCurrentResource().then(function(){i.clear(),i.addResources(t),!0===e.body.start&&i.start()}):(i.addResources(t),!0===e.body.start&&i.start())},h.prototype.validateResource=function(e){var t=e.body.resource,r=m.ResourceValidator.validate(t);r.error?(this.log(s.LogLevel.ERROR,o.AppResources.messages.INVALID_RESOURCE),this.facade.sendNotification(l.NotificationName.RESOURCE_ERROR,{message:o.AppResources.messages.INVALID_RESOURCE+": "+r.msg,code:n.ErrorCode.INVALID_RESOURCE_FORMAT},u.NotificationType.INTERNAL)):this.facade.sendNotification(this.cmsDataRetrievalRequired(t)?l.NotificationName.RETRIEVE_RESOURCE:l.NotificationName.TRANSFORM_RESOURCE,{resource:t},u.NotificationType.INTERNAL)},h.prototype.registerResource=function(e){var t=e.body.resource,r=new p.ResourceProxy(d.ProxyName.ResourceProxy,t);this.facade.registerProxy(r),this.facade.sendNotification(l.NotificationName.PLAY_RESOURCE,null,u.NotificationType.INTERNAL)},h.prototype.cmsDataRetrievalRequired=function(e){return!(a.Util.isEmpty(e.location.cms)||a.Util.isEmpty(e.location.tokenMap)&&a.Util.isEmpty(e.location.cmsUri))},h);function h(){return null!==i&&i.apply(this,arguments)||this}r.PrepResourceCommand=y},{"../app/AppResources":47,"../core/Util":88,"../enum/ErrorCode":102,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/ProxyName":123,"../model/ResourceProxy":139,"./LogAwareSimpleCommand":58,"./command-helpers/ResourceValidator":81}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PresentationStateChangeCommand=void 0;var i,o=e("../enum/MediatorName"),a=e("../enum/NotificationName"),n=e("../enum/ProxyName"),s=e("./LogAwareSimpleCommand"),c=(i=s.LogAwareSimpleCommand,_(l,i),l.prototype.execute=function(e){switch(e.name){case a.NotificationName.RESOURCE_COMPLETE:var t=this.getProxy(n.ProxyName.Playlist);return void(t&&t.next());case a.NotificationName.RESOURCE_END:case a.NotificationName.RESOURCE_INTERRUPTED:this.facade.retrieveMediator(o.MediatorName.TIMER_MEDIATOR).killTimer(),this.sendNotification(a.NotificationName.KILL_RESOURCE_PRESENTATION);var r=this.facade.retrieveMediator(o.MediatorName.UI);r&&r.resetUi();break;case a.NotificationName.CONTENT_BUFFERING:case a.NotificationName.AD_BUFFERING:this.facade.retrieveProxy(n.ProxyName.PlayerDomProxy).getMain().setAttribute("aria-busy",e.body.value.toString())}this.sendNotification(a.NotificationName.APP_EVENT,{notificationName:e.name,data:e.body})},l);function l(){return null!==i&&i.apply(this,arguments)||this}r.PresentationStateChangeCommand=c},{"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ReadyCommand=void 0;var i,s=e("../enum/NotificationName"),c=e("../enum/ProxyName"),o=e("./LogAwareSimpleCommand"),a=(i=o.LogAwareSimpleCommand,_(n,i),n.prototype.execute=function(e){var t,r,i=this,o=e.name,a=e.body,n=this.facade.retrieveProxy(c.ProxyName.PlayerDomProxy);n&&((t=n.getMain()).setAttribute("role","region"),r=t.getAttribute("tabindex")||"0",t.setAttribute("tabindex",r)),setTimeout(function(){return i.sendNotification(s.NotificationName.APP_EVENT,{notificationName:o,data:a})},0)},n);function n(){return null!==i&&i.apply(this,arguments)||this}r.ReadyCommand=a},{"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],65:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResumePlaybackCommand=void 0;var i,o=e("./LogAwareSimpleCommand"),a=e("../enum/MediatorName"),n=e("../enum/ModelName"),s=e("../enum/NotificationName"),c=e("../enum/ProxyName"),l=(i=o.LogAwareSimpleCommand,_(u,i),u.prototype.execute=function(e){var t=this.getModel(n.ModelName.PresentationState),r=this.facade.retrieveMediator(a.MediatorName.PRESENTATION_MEDIATOR);t.suspended=!1,r.resume();var i=this.getProxy(c.ProxyName.ContentPlaybackStateProxy);this.sendNotification(s.NotificationName.PLAYBACK_RESUMED,{contentTime:i.model.time})},u);function u(){return null!==i&&i.apply(this,arguments)||this}r.ResumePlaybackCommand=l},{"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RetrieveResourceCommand=void 0;var i,c=e("../app/AppResources"),l=e("../enum/ErrorCode"),u=e("../enum/LogLevel"),d=e("../enum/ModelName"),p=e("../enum/NotificationName"),m=e("../enum/NotificationType"),f=e("./command-helpers/CmsDataRetriever"),o=e("./LogAwareSimpleCommand"),a=(i=o.LogAwareSimpleCommand,_(n,i),n.prototype.execute=function(e){var t,r,i=this,o=e.body.resource,a=o&&o.location,n=a&&a.cms||null,s=this.getConfig(n);s&&(s.uriTemplate&&a.tokenMap||a.cmsUri)?(t=this.getModel(d.ModelName.PlayerOptions),r={uriTemplate:s.uriTemplate,tokenMap:a&&a.tokenMap||null,url:a&&a.cmsUri||null,responseType:s.responseType,errorRecovery:t.networkErrorRecovery,callback:function(e,t){if(t)return i.log(u.LogLevel.ERROR,t.status,t.message),void i.sendNotification(p.NotificationName.RESOURCE_ERROR,{code:l.ErrorCode.SELECTOR_CALL_ERROR,message:t.message},m.NotificationType.INTERNAL);i.sendNotification(p.NotificationName.TRANSFORM_RESOURCE,{resource:o,data:e},m.NotificationType.INTERNAL)}},new f.CmsDataRetriever(r)):this.log(u.LogLevel.ERROR,"RetrieveResourceCommand: "+c.AppResources.messages.UNEXPECTED_CONDITION+"; CMS config error.")},n.prototype.getConfig=function(e){var t=this.getModel(d.ModelName.PlayerOptions).dataTransformers;return e&&t&&t[e]&&t[e].objectRef&&t[e].responseType?t[e]:null},n);function n(){return null!==i&&i.apply(this,arguments)||this}r.RetrieveResourceCommand=a},{"../app/AppResources":47,"../enum/ErrorCode":102,"../enum/LogLevel":107,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/NotificationType":115,"./LogAwareSimpleCommand":58,"./command-helpers/CmsDataRetriever":79}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StartPresentationCommand=void 0;var i,o=e("../enum/MediatorName"),a=e("../enum/NotificationName"),n=e("./LogAwareSimpleCommand"),s=(i=n.LogAwareSimpleCommand,_(c,i),c.prototype.execute=function(e){var t=this.facade.retrieveMediator(o.MediatorName.PRESENTATION_MEDIATOR);this.sendNotification(a.NotificationName.RESOURCE_START),t.start()},c);function c(){return null!==i&&i.apply(this,arguments)||this}r.StartPresentationCommand=s},{"../enum/MediatorName":109,"../enum/NotificationName":114,"./LogAwareSimpleCommand":58}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SuspendPlaybackCommand=void 0;var i,o=e("./LogAwareSimpleCommand"),a=e("../enum/MediatorName"),n=e("../enum/ModelName"),s=e("../enum/NotificationName"),c=e("../enum/ProxyName"),l=(i=o.LogAwareSimpleCommand,_(u,i),u.prototype.execute=function(e){var t=this.getModel(n.ModelName.PresentationState);this.facade.retrieveMediator(a.MediatorName.PRESENTATION_MEDIATOR).suspend(),t.suspended=!0;var r=this.getProxy(c.ProxyName.ContentPlaybackStateProxy);this.sendNotification(s.NotificationName.PLAYBACK_SUSPENDED,{contentTime:r.model.time})},u);function u(){return null!==i&&i.apply(this,arguments)||this}r.SuspendPlaybackCommand=l},{"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TransformResourceCommand=void 0;var i,n=e("es6-promise"),s=e("../app/AppResources"),c=e("../core/Util"),o=e("../enum/ErrorCode"),l=e("../enum/ModelName"),u=e("../enum/NotificationName"),d=e("../enum/NotificationType"),a=e("./LogAwareSimpleCommand"),p=(i=a.LogAwareSimpleCommand,_(m,i),m.prototype.execute=function(e){var i=this,r=e.body.resource,o=e.body.data||null,t=this.getModel(l.ModelName.PlayerOptions),a=t.dataTransformers&&t.dataTransformers[r.location.cms]&&t.dataTransformers[r.location.cms].objectRef;n.Promise.resolve().then(function(){var e,t=r;return a&&(t=(e=c.Util.isFunction(a.transform)?a:new a).transform&&e.transform(o,r)||r),t}).then(function(e){if(!e||e.error)throw new Error(e&&e.data);i.sendNotification(u.NotificationName.REGISTER_RESOURCE,{resource:e},d.NotificationType.INTERNAL)}).catch(function(e){var t=i.getCodeForError(e),r=e.message||s.AppResources.messages.CMS_RESOURCE_UNAVAILABLE;i.sendNotification(u.NotificationName.RESOURCE_ERROR,{code:t,message:r},d.NotificationType.INTERNAL)})},m.prototype.getCodeForError=function(e){return"mpx"===e.cms?this.getCodeForMpxError(e):o.ErrorCode.RESOURCE_UNAVAILABLE},m.prototype.getCodeForMpxError=function(e){switch(e?e.exception:null){case"DomainBlocked":return o.ErrorCode.DOMAIN_BLOCKED;case"GeoLocationBlocked":return o.ErrorCode.GEO_LOCATION_BLOCKED;case"IpBlocked":return o.ErrorCode.IP_BLOCKED;case"SatelliteProviderBlocked":return o.ErrorCode.SATELLITE_PROVIDER_BLOCKED;case"Expired":return o.ErrorCode.EXPIRED;default:return o.ErrorCode.RESOURCE_UNAVAILABLE}},m);function m(){return null!==i&&i.apply(this,arguments)||this}r.TransformResourceCommand=p},{"../app/AppResources":47,"../core/Util":88,"../enum/ErrorCode":102,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/NotificationType":115,"./LogAwareSimpleCommand":58,"es6-promise":25}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserKeyboardCommand=void 0;var i,o=e("./LogAwareSimpleCommand"),a=e("../enum/NotificationName"),n=e("../enum/MediatorName"),s=e("../enum/DiagnosticAction"),c=e("../enum/ProxyName"),l=(i=o.LogAwareSimpleCommand,_(u,i),u.prototype.execute=function(e){var t=e.body&&e.body.action;switch(t){case s.DiagnosticAction.DIAGNOSTIC_PLUGIN:var r=this.facade.retrieveMediator(n.MediatorName.PLUGIN_MEDIATOR);r&&r.toggleDiagnosticPlugin();break;case s.DiagnosticAction.CONFIG_TO_CLIPBOARD:case s.DiagnosticAction.CONFIG_TO_TEST_PAGE:var i=t===s.DiagnosticAction.CONFIG_TO_CLIPBOARD,o=this.getSerializedData();i&&(this.copyToClipboard(o),this.displayCopyNotice());break;default:this.sendNotification(a.NotificationName.APP_EVENT,{notificationName:e.name,data:e.body})}},u.prototype.displayCopyNotice=function(){var e=this.facade.retrieveProxy(c.ProxyName.PlayerDomProxy).getMain(),t=document.createElement("div");t.setAttribute("style",this.copyNoticeStyle),t.innerHTML="Copied!",e.appendChild(t),setTimeout(function(){return e.removeChild(t)},2500)},u.prototype.copyToClipboard=function(e){var t=document.createElement("textarea");t.setAttribute("style","position: absolute; top: -120px;"),document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)},u.prototype.getSerializedData=function(){return this.facade.retrieveMediator(n.MediatorName.APPLICATION).getConfigAsJson()},u);function u(){var e=null!==i&&i.apply(this,arguments)||this;return e.copyNoticeStyle="position: absolute; z-Index: 900000000; top: 0; right: 0; width: 180px; background: #fc0; color: #000; font-family: Arial, sans-serif; text-align: center; height: 64px; line-height: 64px; font-size: 32px",e}r.UserKeyboardCommand=l},{"../enum/DiagnosticAction":100,"../enum/MediatorName":109,"../enum/NotificationName":114,"../enum/ProxyName":123,"./LogAwareSimpleCommand":58}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BootCommand=void 0;var i,o=e("../../mvc/AbstractMacroCommand"),a=e("./PrepModelCommand"),n=e("./PrepViewCommand"),s=e("./PrepServiceCommand"),c=e("./CreateDomCommand"),l=e("./PrepTimerCommand"),u=e("./PrepPluginsCommand"),d=(i=o.AbstractMacroCommand,_(p,i),p.prototype.initializeMacroCommand=function(){this.addSubCommand(a.PrepModelCommand),this.addSubCommand(c.CreateDomCommand),this.addSubCommand(s.PrepServiceCommand),this.addSubCommand(l.PrepTimerCommand),this.addSubCommand(n.PrepViewCommand),this.addSubCommand(u.PrepPluginsCommand)},p);function p(){return i.call(this)||this}r.BootCommand=d},{"../../mvc/AbstractMacroCommand":161,"./CreateDomCommand":73,"./PrepModelCommand":74,"./PrepPluginsCommand":75,"./PrepServiceCommand":76,"./PrepTimerCommand":77,"./PrepViewCommand":78}],72:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BootWebMafCommand=void 0;var i,o=e("../../mvc/AbstractMacroCommand"),a=e("./PrepModelCommand"),n=e("./PrepPluginsCommand"),s=e("./PrepServiceCommand"),c=e("./PrepTimerCommand"),l=(i=o.AbstractMacroCommand,_(u,i),u.prototype.initializeMacroCommand=function(){this.addSubCommand(a.PrepModelCommand),this.addSubCommand(s.PrepServiceCommand),this.addSubCommand(c.PrepTimerCommand),this.addSubCommand(n.PrepPluginsCommand)},u);function u(){return i.call(this)||this}r.BootWebMafCommand=l},{"../../mvc/AbstractMacroCommand":161,"./PrepModelCommand":74,"./PrepPluginsCommand":75,"./PrepServiceCommand":76,"./PrepTimerCommand":77}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CreateDomCommand=void 0;var i,l=e("../../enum/LogLevel"),u=e("../../enum/ModelName"),d=e("../../enum/PlayerDom"),p=e("../../enum/ProxyName"),m=e("../../enum/ServiceName"),f=e("../command-helpers/PlayerDomCreator"),o=e("../LogAwareSimpleCommand"),a=(i=o.LogAwareSimpleCommand,_(n,i),n.prototype.execute=function(e){var t,r,i,o,a,n=e.body.playerOptions.container,s=this.facade.retrieveService(m.ServiceName.System),c=this.getModel(u.ModelName.PlayerOptions);!s.isWebMaf&&s.global&&s.document&&n&&(t="string"==typeof n?s.document.querySelector(n):n,r=null,c.useNativeControls&&(r=[d.PlayerDom.CC_CONTAINER,d.PlayerDom.PANEL_CONTAINER]),o=(i=new f.PlayerDomCreator(t,s.document)).create(r),(a=this.facade.retrieveProxy(p.ProxyName.PlayerDomProxy)).setModel(o),i.destroy(),a.showAdContainer(!1),c.useNativeControls&&a.setVideoAttribute("controls",""),!1!==c.playsInline&&a.setVideoAttribute("playsinline",""),a.setVideoAttribute("data-player-id",this.facade.appId),this.log(l.LogLevel.INFO,"Player DOM created."))},n);function n(){return null!==i&&i.apply(this,arguments)||this}r.CreateDomCommand=a},{"../../enum/LogLevel":107,"../../enum/ModelName":111,"../../enum/PlayerDom":120,"../../enum/ProxyName":123,"../../enum/ServiceName":125,"../LogAwareSimpleCommand":58,"../command-helpers/PlayerDomCreator":80}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepModelCommand=void 0;var i,o=e("../../core/Util"),n=e("../../enum/LogLevel"),a=e("../../enum/ModelName"),s=e("../../enum/ProxyName"),c=e("../../enum/ServiceName"),l=e("../../model/LocalizationProxy"),u=e("../../model/ModelCollectionProxy"),d=e("../../model/PerformanceProxy"),p=e("../../model/PlayerDomProxy"),m=e("../../model/PlaylistProxy"),f=e("../../model/TextTrackProxy"),y=e("../../model/vo/ModelCollection"),h=e("../LogAwareSimpleCommand"),E=(i=h.LogAwareSimpleCommand,_(A,i),A.prototype.execute=function(e){var t=this.facade.retrieveService(c.ServiceName.System),r=new y.ModelCollection,i=new u.ModelCollectionProxy(s.ProxyName.ModelCollectionProxy,r),o=e.body.playerOptions;this.facade.registerProxy(i),this.setPlayerOptions(i,o),this.setBuildInfo(i),this.facade.registerProxy(new d.PerformanceProxy(s.ProxyName.PerformanceProxy));var a=new l.LocalizationProxy(s.ProxyName.LocalizationProxy,o.language);this.facade.registerProxy(a),this.facade.registerProxy(new f.TextTrackProxy(s.ProxyName.TextTrackProxy,{native:o.renderTextTrackNatively,language:a.language})),t.isWebMaf||this.createDomProxy(i),this.facade.registerProxy(new m.PlaylistProxy(s.ProxyName.Playlist)),this.log(n.LogLevel.DEBUG,"Model prepared")},A.prototype.setPlayerOptions=function(e,t){var r=e.getModel(a.ModelName.PlayerOptions);for(var i in t)o.Util.isUndefined(r[i])||(r[i]=t[i])},A.prototype.setBuildInfo=function(e){var t=this.facade,r=e.getModel(a.ModelName.BuildInfo),i=t.retrieveService(c.ServiceName.BuildInfo);for(var o in i)r[o]=i[o]},A.prototype.createDomProxy=function(e){var t=e.getModel(a.ModelName.PlayerDom),r=new p.PlayerDomProxy(s.ProxyName.PlayerDomProxy,t);this.facade.registerProxy(r)},A);function A(){return null!==i&&i.apply(this,arguments)||this}r.PrepModelCommand=E},{"../../core/Util":88,"../../enum/LogLevel":107,"../../enum/ModelName":111,"../../enum/ProxyName":123,"../../enum/ServiceName":125,"../../model/LocalizationProxy":134,"../../model/ModelCollectionProxy":135,"../../model/PerformanceProxy":136,"../../model/PlayerDomProxy":137,"../../model/PlaylistProxy":138,"../../model/TextTrackProxy":140,"../../model/vo/ModelCollection":155,"../LogAwareSimpleCommand":58}],75:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepPluginsCommand=void 0;var i,o=e("../../enum/LogLevel"),a=e("../../enum/MediatorName"),n=e("../../view/PluginMediator"),s=e("../LogAwareSimpleCommand"),c=(i=s.LogAwareSimpleCommand,_(l,i),l.prototype.execute=function(e){this.facade.registerMediator(new n.PluginMediator(a.MediatorName.PLUGIN_MEDIATOR)),this.log(o.LogLevel.DEBUG,"Plugins Prepared")},l);function l(){return null!==i&&i.apply(this,arguments)||this}r.PrepPluginsCommand=c},{"../../enum/LogLevel":107,"../../enum/MediatorName":109,"../../view/PluginMediator":236,"../LogAwareSimpleCommand":58}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepServiceCommand=void 0;var i,o=e("../LogAwareSimpleCommand"),a=(i=o.LogAwareSimpleCommand,_(n,i),n.prototype.execute=function(e){},n);function n(){return null!==i&&i.apply(this,arguments)||this}r.PrepServiceCommand=a},{"../LogAwareSimpleCommand":58}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepTimerCommand=void 0;var i,o=e("../../enum/LogLevel"),a=e("../../enum/MediatorName"),n=e("../../view/TimerMediator"),s=e("../LogAwareSimpleCommand"),c=(i=s.LogAwareSimpleCommand,_(l,i),l.prototype.execute=function(e){this.facade.registerMediator(new n.TimerMediator(a.MediatorName.TIMER_MEDIATOR)),this.log(o.LogLevel.DEBUG,"Timer mediator registered")},l);function l(){return null!==i&&i.apply(this,arguments)||this}r.PrepTimerCommand=c},{"../../enum/LogLevel":107,"../../enum/MediatorName":109,"../../view/TimerMediator":237,"../LogAwareSimpleCommand":58}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PrepViewCommand=void 0;var i,s=e("../../enum/KeyboardScope"),c=e("../../enum/LogLevel"),l=e("../../enum/MediatorName"),a=e("../../enum/PlayerDom"),n=e("../../enum/ProxyName"),u=e("../../enum/ServiceName"),d=e("../../view/AccessibilityKeyCommandMediator"),p=e("../../view/FullscreenMediator"),m=e("../../view/UiMediator"),f=e("../../view/UserKeyCommandMediator"),o=e("../LogAwareSimpleCommand"),y=(i=o.LogAwareSimpleCommand,_(h,i),h.prototype.execute=function(e){var t,r,i,o=this.facade,a=o.retrieveService(u.ServiceName.System),n=e.body.playerOptions;a.global?(!n.useNativeControls&&a.global.cvui?this.createUi(a.global.cvui,a,n):n.useNativeControls||this.log(c.LogLevel.INFO,"PrepView: Skipping UI creation."),a.isTv||o.registerMediator(new p.FullscreenMediator(l.MediatorName.FULLSCREEN)),this.getScopeForKeys(n.overrides&&n.overrides.keyboardScope)!==s.KeyboardScope.NONE&&(t=new d.AccessibilityKeyCommandMediator(l.MediatorName.ACC_KEY_CMD_MEDIATOR),o.registerMediator(t),r=new f.UserKeyCommandMediator(l.MediatorName.KEY_COMMAND),o.registerMediator(r),i=this.getPlayerContainer(),t.scope=i,r.scope=i)):this.log(c.LogLevel.INFO,"System.global is null"),this.log(c.LogLevel.DEBUG,"View prepared")},h.prototype.getScopeForKeys=function(e){switch(e){case s.KeyboardScope.PLAYER:case s.KeyboardScope.DOCUMENT:case s.KeyboardScope.NONE:return e}return s.KeyboardScope.PLAYER},h.prototype.getPlayerContainer=function(){return this.facade.retrieveProxy(n.ProxyName.PlayerDomProxy).getMain()},h.prototype.createUi=function(e,t,r){var i=this.getViewController(e,t,r),o=this.getEnums(e),a=new m.UiMediator(l.MediatorName.UI,i);this.facade.registerMediator(a),a.initialize(o)},h.prototype.getEnums=function(e){return{ControlName:e.ControlName,ControlEvent:e.ControlEvent,PlayState:e.PlayState,DecoratorName:e.DecoratorName,VideoType:e.VideoType}},h.prototype.getViewController=function(e,t,r){var i=this.facade.retrieveProxy(n.ProxyName.PlayerDomProxy),o=r.uiConfig;return(t.isIos||t.isAndroid)&&((o=o||{}).exclude&&Array.isArray(o.exclude)||(o.exclude=[]),-1==o.exclude.indexOf(e.ControlName.CC_TOGGLE)&&o.exclude.push(e.ControlName.CC_TOGGLE)),e.createUi({controlContainer:i.getMain(),panelContainer:i.getElement(a.PlayerDom.PANEL_CONTAINER),zOrigin:i.getSafeZIndex(),systemInfo:t.info,configuration:o||{},omitVolume:!t.isDesktop})},h);function h(){return null!==i&&i.apply(this,arguments)||this}r.PrepViewCommand=y},{"../../enum/KeyboardScope":104,"../../enum/LogLevel":107,"../../enum/MediatorName":109,"../../enum/PlayerDom":120,"../../enum/ProxyName":123,"../../enum/ServiceName":125,"../../view/AccessibilityKeyCommandMediator":228,"../../view/FullscreenMediator":233,"../../view/UiMediator":238,"../../view/UserKeyCommandMediator":239,"../LogAwareSimpleCommand":58}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CmsDataRetriever=void 0;var a=e("../../dataservice/AsyncDataRequest"),n=e("../../dataservice/AsyncDataRequestOptions"),i=(o.prototype.replaceUriTokens=function(e,t){var r=e;if(t)for(var i in t)r=r.replace(i,t[i]);return r},o.prototype.retrieveResource=function(e,t,i,r){void 0===r&&(r=null);var o=n.AsyncDataRequestOptions.create({responseType:t,timeout:2e3,url:e,errorRecovery:r,onComplete:function(e){var t=e.data.response,r=e.data.error;i&&i(t,r?e.data:null)}});new a.AsyncDataRequest(o)},o);function o(e){var t,r=e.errorRecovery||null,i=null;e.url?this.retrieveResource(e.url,e.responseType,e.callback,r):e.uriTemplate&&e.tokenMap?(t=this.replaceUriTokens(e.uriTemplate,e.tokenMap),this.retrieveResource(t,e.responseType,e.callback,r)):i="Invalid options passed to CmsDataRetriever.",i&&e.callback&&e.callback(null,{status:0,error:!0,url:"n/a",message:i})}r.CmsDataRetriever=i},{"../../dataservice/AsyncDataRequest":90,"../../dataservice/AsyncDataRequestOptions":91}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerDomCreator=void 0;var d=e("../../enum/PlayerDom"),i=(o.prototype.destroy=function(){this.main=null,this.document=null},o.prototype.create=function(e){var t,r,i,o=((t={})[d.PlayerDom.MAIN_CONTAINER]=this.main,t),a=this.main,n={position:"absolute",top:0,left:0,width:"100%",height:"100%",padding:0,margin:0,zIndex:0,overflow:"hidden"},s=[d.PlayerDom.VIDEO_CONTAINER,d.PlayerDom.CC_CONTAINER,d.PlayerDom.PANEL_CONTAINER,d.PlayerDom.AD_CONTAINER];a.style.position="relative",a.style.padding="0",a.style.width="100%",a.style.height="100%",a.style.background="#000",a.style.overflow="hidden",a.classList.add("cvp-container");for(var c=0,l=s.length;c<l;c++)e&&0<=e.indexOf(s[c])||(n.zIndex+=10,i=this.div(s[c],n),o[s[c]]=i,a.appendChild(i));var u=document.createElement("video");return u.style.height="100%",u.style.width="100%",o[d.PlayerDom.VIDEO_CONTAINER].appendChild(u),o[d.PlayerDom.VIDEO_EL]=u,o[d.PlayerDom.AD_CLICK_EL]=this.createAdClickEl(++n.zIndex),a.appendChild(o[d.PlayerDom.AD_CLICK_EL]),(r={})[d.PlayerDom.MAIN_CONTAINER]=o[d.PlayerDom.MAIN_CONTAINER],r[d.PlayerDom.VIDEO_EL]=o[d.PlayerDom.VIDEO_EL],r[d.PlayerDom.VIDEO_CONTAINER]=o[d.PlayerDom.VIDEO_CONTAINER],r[d.PlayerDom.CC_CONTAINER]=o[d.PlayerDom.CC_CONTAINER],r[d.PlayerDom.AD_CONTAINER]=o[d.PlayerDom.AD_CONTAINER],r[d.PlayerDom.AD_CLICK_EL]=o[d.PlayerDom.AD_CLICK_EL],r[d.PlayerDom.PANEL_CONTAINER]=o[d.PlayerDom.PANEL_CONTAINER],r},o.prototype.createAdClickEl=function(e){var t={display:"none",padding:"4px 8px",fontSize:"12px",background:"#dedede",lineHeight:"14px",color:"#000",position:"absolute",zIndex:e,right:"2px",top:"2px",textAlign:"center"},r=this.div("adClickEl",t);return r.innerHTML="Learn More",r},o.prototype.div=function(e,t){var r=this.document.createElement("div");for(var i in r.setAttribute("data-role",e),t)r.style[i]=t[i];return r},o);function o(e,t){this.document=t,this.main=e}r.PlayerDomCreator=i},{"../../enum/PlayerDom":120}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResourceValidator=void 0;var i=e("../../app/ResourceConfiguration"),c=e("../../core/Util"),l=e("../../enum/AdContext"),o=(a.validate=function(e){var t=this.hasRootKeys(e);if(t.error)return t;var r=this.canAccessMedia(e);return r.error?r:{error:!1,msg:""}},a.hasRootKeys=function(e){for(var t=Object.keys(this.defaultResource),r=t.length,i="";r--;)if(!(t[r]in e)){i="Property "+t[r]+" not found.";break}return{error:""!=i,msg:i}},a.canAccessMedia=function(e){var t=!c.Util.isEmpty(e.location.cms),r=!c.Util.isEmpty(e.location.tokenMap)||!c.Util.isEmpty(e.location.cmsUri),i=!c.Util.isEmpty(e.location.mediaUrl),o=e.ad.context===l.AdContext.DAI_SSB&&!c.Util.isEmpty(e.ad.dai.ssbStreamUrl),a=this.hasValidDaiSettings(e),n=!(o||i||t&&r),s=a.error?a.msg:n?"Media not specified":"";return{error:n&&a.error,msg:s}},a.hasValidDaiSettings=function(e){var t=e.ad,r=t.dai,i=!1,o="";return t.context===l.AdContext.DAI_SDK||t.context===l.AdContext.DAI_API?(i=!this.isValidDaiResource(r))&&(o="Invalid DAI configuration"):t.context===l.AdContext.DAI_SSB&&(i=c.Util.isEmpty(r.ssbStreamUrl))&&(o="SSB stream url missing"),{error:i,msg:o}},a.isValidDaiResource=function(e){return e.isLive?!c.Util.isEmpty(e.assetKey):!c.Util.isEmpty(e.contentSourceId)&&!c.Util.isEmpty(e.daiVideoId)},a.defaultResource=new i.ResourceConfiguration,a);function a(){}r.ResourceValidator=o},{"../../app/ResourceConfiguration":49,"../../core/Util":88,"../../enum/AdContext":96}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseClass=void 0;var i=(Object.defineProperty(o.prototype,"className",{get:function(){return this.constructor.name},enumerable:!1,configurable:!0}),o);function o(){}r.BaseClass=i},{}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CoreEvent=void 0;function i(e,t,r){this.timeStamp=Date.now(),this.data=r,this.target=t,this.type=e}r.CoreEvent=i},{}],84:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Emitter=void 0;var a,i=e("./BaseClass"),o=e("./CoreEvent"),n=e("./LinkedList"),s=e("./Util"),c=(a=i.BaseClass,_(l,a),l.prototype.destroy=function(){var e;if(this.opts){for(e in this.opts)delete this.opts[e];this.opts=null}if(this.offAll(null),this.eventMap){for(e in this.eventMap)delete this.eventMap[e];this.eventMap=null}},l.prototype.on=function(e,t){var r;this.eventMap&&e&&s.Util.isFunction(t)&&((r=this.eventMap[e]||(this.eventMap[e]=new n.LinkedList)).has(t)||r.add(t))},l.prototype.once=function(t,r){var i,o=this;this.eventMap&&t&&s.Util.isFunction(r)&&(i=function(e){o.off(t,i),r(e)},this.on(t,i))},l.prototype.off=function(e,t){t||this.offAll(e),t&&this.remove(e,t)},l.prototype.offAll=function(e){if(this.eventMap){var t,r=this.eventMap;if(e)this.remove(e,null);else for(t in r)this.remove(t,null)}},l.prototype.hasListenerFor=function(e){return!(!this.eventMap||!this.eventMap[e]||this.eventMap[e].empty)},l.prototype.emit=function(e,t){void 0===t&&(t=null);var r=new o.CoreEvent(e,this,t);this.dispatchEvt(r)},l.prototype.dispatchEvt=function(t){this.eventMap&&this.eventMap[t.type]&&this.eventMap[t.type].forEach(function(e){return e(t)})},l.prototype.remove=function(e,t){void 0===t&&(t=null),this.eventMap&&this.eventMap[e]&&(t?this.eventMap[e].delete(t):this.eventMap[e].clear())},l);function l(e){var t=a.call(this)||this;t.opts=e||{},t.eventMap={};var r,i=t.opts;for(var o in i)s.Util.isFunction(i[o])&&/^on[A-Z]/.test(o)&&(r=o.charAt(2).toLowerCase()+o.substring(3),t.on(r,i[o]),delete t.opts[o]);return t}r.Emitter=c},{"./BaseClass":82,"./CoreEvent":83,"./LinkedList":85,"./Util":88}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LinkedList=void 0;var i=function(e,t){this.value=e,this.next=t},o=(Object.defineProperty(a.prototype,"empty",{get:function(){return null==this.head},enumerable:!1,configurable:!0}),a.prototype.forEach=function(e){for(var t=this.head;t;)e(t.value),t=t.next},a.prototype.add=function(e){var t=new i(e);null==this.head?this.head=t:null==this.tail?this.head.next=this.tail=t:this.tail.next=this.tail=t},a.prototype.has=function(e){for(var t=this.head;t;){if(t.value==e)return!0;t=t.next}return!1},a.prototype.delete=function(e){for(var t=null,r=this.head;r;){if(r.value==e)return t&&(t.next=r.next),r==this.head?this.head=r.next:r==this.tail&&(this.tail=t),!0;r=(t=r).next}return!1},a.prototype.clear=function(){for(var e,t=this.head;t;)e=t.next,t.value=t.next=null,t=e;this.head=this.tail=null},a);function a(){this.head=null,this.tail=null}r.LinkedList=o},{}],86:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0;var o,a=e("../enum/LogLevel"),n=e("./Emitter"),s=e("./Util"),c=((i={})[a.LogLevel.OFF]=0,i[a.LogLevel.ERROR]=100,i[a.LogLevel.WARN]=200,i[a.LogLevel.INFO]=300,i[a.LogLevel.DEBUG]=400,i),l=(o=n.Emitter,_(u,o),u.error=function(e){console&&console.error(e)},u.warn=function(e){console&&console.warn(e)},u.log=function(e){console&&console.log(e)},Object.defineProperty(u.prototype,"logLevel",{get:function(){return this.pLogLevel},set:function(e){this.pLogLevel=e},enumerable:!1,configurable:!0}),u.prototype.assert=function(e,t){e||this.error('Assertion failed! - "'+(t||"")+'"')},u.prototype.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var i=0,o=t.length;i<o;i++)this.emit(u.LOG_EVENT,this.assembleEvent(t[i],e));this.shouldLog(e)&&(t.unshift(this.getStamp()),console.log.apply(console,t))},u.prototype.dir=function(e,t,r){var i=r||"Unnamed Object";this.emit(u.LOG_EVENT,this.assembleEvent(t,e,i)),this.shouldLog(e)&&(console.log(this.getStamp()+" Object: "+i),console.dir(t))},u.prototype.error=function(e){this.emit(u.LOG_EVENT,this.assembleEvent(e,a.LogLevel.ERROR)),this.shouldLog(a.LogLevel.ERROR)&&console.error(this.getStamp()+e)},u.prototype.warn=function(e){this.emit(u.LOG_EVENT,this.assembleEvent(e,a.LogLevel.WARN)),this.shouldLog(a.LogLevel.WARN)&&console.warn(this.getStamp()+e)},u.prototype.assembleEvent=function(e,t,r){return void 0===r&&(r=null),{item:e,id:this.id,level:t,label:r}},u.prototype.shouldLog=function(e){return this.useConsole&&c[this.pLogLevel]>=c[e]},u.prototype.getStamp=function(){return"["+this.id+"]  "+s.Util.msToHms(Date.now()-this.tzero)+" > "},u.LOG_EVENT="logEvent",u);function u(e){var t=o.call(this,e)||this;return t.useConsole=!1,t.useConsole=s.Util.isObject(console),t.id=e.id||s.Util.uid8(),t.tzero=Date.now(),t.logLevel=s.Util.isEmpty(t.opts.logLevel)?a.LogLevel.OFF:t.opts.logLevel,t}r.Logger=l},{"../enum/LogLevel":107,"./Emitter":84,"./Util":88}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.QueryString=void 0;var n=e("./Util"),i=(o.encode=function(e){return n.Util.isEmpty(e)?"":n.Util.entries(e).map(function(e){var t=e[0],r=e[1];return t+"="+encodeURIComponent(r)}).join("&")},o.decode=function(e){var a={};return null==e||e.replace(/^[^?]*\?/,"").replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,r,i){var o;try{o=n.Util.isUndefined(i)?i:decodeURIComponent(i)}catch(e){o=i}a[decodeURIComponent(t)]=o}),a},o.parseValue=function(e){if(n.Util.isUndefined(e))return!0;var t=e.toLowerCase();return"true"===t||"false"===t?"true"===t:"undefined"!==e?"null"===t?null:(t=parseFloat(e),isNaN(t)?e:t):void 0},o.parse=function(e){var t=o.decode(e);for(var r in t)t[r]=o.parseValue(t[r]);return t},o.append=function(e,t){return e+(n.Util.includes(e,"?")?"&":"?")+o.encode(t)},o);function o(){}r.QueryString=i},{"./Util":88}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Util=void 0;var i=e("object-assign"),o=e("../dataservice/AsyncDataRequest"),a=e("../enum/MimeType"),n=e("../playback/surface/ThumbnailTrackSurface"),s=e("./QueryString"),c=(u.camelToDash=function(e){return e.replace(this.cdr,"-").replace(this.dre,"$1-$2").toLowerCase()},u.uid8=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()},u.isEmpty=function(e){return null==e||Array.isArray(e)&&0===e.length||u.isObject(e)&&0===Object.keys(e).length||u.isString(e)&&""===e},u.isFunction=function(e){return"function"==typeof e},u.isString=function(e){return"string"==typeof e},u.isUndefined=function(e){return void 0===e},u.isNumber=function(e){return"number"==typeof e},u.isBoolean=function(e){return"boolean"==typeof e},u.isObject=function(e){return"object"==typeof e},u.includes=function(e,t){return-1<e.indexOf(t)},u.assign=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return i.apply(void 0,l([e||{}],t))},u.entries=function(i){return Object.keys(i).reduce(function(e,t,r){return e[r]=[t,i[t]],e},[])},u.fromEntries=function(e){return e.reduce(function(e,t){var r=t[0],i=t[1];return e[r]=i,e},{})},u.padStart=function(e,t,r){void 0===r&&(r=" "),t|=0;var i=e.length;return t<i?e:((t-=i)>r.length&&(r+=this.repeat(r,t/r.length)),r.slice(0,t)+e)},u.repeat=function(e,t){void 0===t&&(t=0),t|=0;for(var r=0,i="";r++<t;)i+=e;return i},u.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(o,a){return null==o?a:(null==a||Object.getOwnPropertyNames(a).forEach(function(e){var t=a[e],r=o[e],i=typeof t;"undefined"!=i&&(null==r||!u.isObject(r)||Array.isArray(t)?o[e]=t:"object"==i&&(o[e]=n(r,t)))}),o)};return e.reduce(function(e,t){return n(e,t)},{})},u.secToHms=function(e,t){if(void 0===t&&(t=61),null==e||isNaN(e))return"00:00";e|=0;var r=this.zeroFill(e%60);return e=e/60|0,r=this.zeroFill(e%60)+":"+r,0<(e=e/60|0)&&(r=this.zeroFill(e)+":"+r),3600<=t&&5===r.length&&(r="00:"+r),r},u.msToHms=function(e){return this.formatTime(new Date(e),"HH:mm:ss:sss",{offset:0})},u.zeroFill=function(e,t){return void 0===t&&(t=2),this.padStart(String(e),t,"0")},u.hmsToSec=function(e,t){if(void 0===t&&(t=30),!e)return NaN;var r,i=e.split(":"),o=0;4===i.length?o=parseInt(i.pop())/t:3===i.length&&(i[2]=i[2].replace(",","."),-1===i[2].indexOf(".")||1<(null!=(r=i[2].split("."))?r.length:void 0)&&(i[2]=r[0],o=parseInt(r[1])/1e3));for(var a=parseInt(i.pop());0<i.length;)a+=Math.pow(60,i.length)*parseInt(i.shift());return a+o},u.formatTime=function(e,t,r){if(void 0===t&&(t="h:mm:ss A"),void 0===r&&(r={timezone:"",offset:-(new Date).getTimezoneOffset()/60}),null!=r.offset&&0!==r.offset&&(e=new Date(e.getTime()+Math.round(60*r.offset*60*1e3))),isNaN(e.getTime()))return"";var i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),n=e.getUTCMilliseconds(),s=i%12||12,c=i<12?"am":"pm",l={hh:this.zeroFill(s),h:s,HH:this.zeroFill(i),H:i,mm:this.zeroFill(o),m:o,sss:this.zeroFill(n,3),ss:this.zeroFill(a),s:a,a:c,A:c.toUpperCase(),z:r.timezone};for(var u in l)t=t.replace(u,l[u]);return t},u.findIndex=function(e,t){if(!u.isFunction(t))throw new TypeError("predicate must be a function");for(var r=e.length>>>0,i=0;i<r;){if(t(e[i],i,e))return i;i++}return-1},u.find=function(e,t){if(!u.isFunction(t))throw new TypeError("predicate must be a function");var r=this.findIndex(e,t);return-1<r?e[r]:void 0},u.template=function(e,r,t,i){if(void 0===t&&(t="{{"),void 0===i&&(i="}}"),!e)return e;var o=new RegExp(t+"((?:(?!("+t+"|"+i+")).)+)"+i,"g");return e.replace(o,function(e,t){return u.isUndefined(r[t])?e:r[t]})},u.toArray=function(e){return Array.prototype.slice.call(e)},u.forEach=function(e,t){if(e&&e.length&&u.isFunction(t))for(var r=0,i=e.length;r<i;r++)t(e[r],r,e)},u.debounce=function(e,t){var r;return function(){clearTimeout(r),r=setTimeout(e,t)}},u.clampValue=function(e,t,r){return Math.max(t,Math.min(r,e))},u.inRange=function(e,t,r){return u.isNumber(e)&&t<=e&&e<=r},u.mapToRange=function(e,t,r,i,o){return void 0===i&&(i=0),void 0===o&&(o=1),(e-t)*(o-i)/(r-t)+i},u.base64DecodeUint8Array=function(e){for(var t=atob(e),r=t.length,i=new Uint8Array(new ArrayBuffer(r)),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i},u.base64EncodeUint8Array=function(e){var t=String.fromCharCode.apply(null,e);return btoa(t)},u.xmlToJson=function(e){var r={};if(1===e.nodeType&&0<e.attributes.length)for(var t=0,i=e.attributes.length;t<i;t++){var o=e.attributes.item(t);r[o.nodeName]=o.nodeValue}else 3===e.nodeType&&(r=e.nodeValue);if("p"===e.nodeName&&(r.text="",e.childNodes.forEach(function(e){var t;"metadata"!==e.nodeName&&(t=(new XMLSerializer).serializeToString(e),1===e.nodeType&&(r.text+="br"===e.tagName?"\n":t),3===e.nodeType&&(r.text+=t))})),e.hasChildNodes())for(var a=0,n=e.childNodes.length;a<n;a++){var s,c=e.childNodes.item(a),l=c.nodeName;u.isUndefined(r[l])?r[l]=this.xmlToJson(c):(u.isUndefined(r[l].push)&&(s=r[l],r[l]=[],r[l].push(s)),r[l].push(this.xmlToJson(c)))}return r},u.getNumLines=function(e){return e&&(e.match(/\n/g)||[]).length+1},u.roundTo=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},u.makeUrl=function(e,t){return(e?"https:":"http:")+"//"+t},u.request=function(e){return e.query&&(e.url=s.QueryString.append(e.url,e.query)),o.AsyncDataRequest.load(e).then(function(e){return e.response})},u.parseLanguageTag=function(e){void 0===e&&(e="");var t=e.match(/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/)||[];return{tag:e,language:t[1]||"",extended:t[2]||"",script:t[3]||"",region:t[4]||"",toString:function(){return this.tag}}},u.getFileExtension=function(e){return e.replace(/\?.*/,"").replace(/#.*/,"").split(".").pop()},u.getMimeType=function(e){if(!e)return"";var t=u.getFileExtension(e).toUpperCase();return a.MimeType[t]},u.renderThumbnail=function(e,t){n.ThumbnailTrackSurface.renderThumbnail(e,t)},u.dre=/([a-z\d])([A-Z])/g,u.cdr=/\W+/g,u);function u(){}r.Util=c},{"../dataservice/AsyncDataRequest":90,"../enum/MimeType":110,"../playback/surface/ThumbnailTrackSurface":200,"./QueryString":87,"object-assign":27}],89:[function(e,t,r){"use strict";var i,a=e("es6-promise"),n=e("./app/Shell"),o=e("./core/BaseClass"),s=e("./core/CoreEvent"),c=e("./core/Emitter"),l=e("./core/QueryString"),u=e("./core/Util"),d=e("./enum/AdContext"),p=e("./enum/Autoplay"),m=e("./enum/Browser"),f=e("./enum/Device"),y=e("./enum/ErrorCode"),h=e("./enum/KeyboardScope"),E=e("./enum/LocalizationId"),A=e("./enum/LocalizedLanguage"),T=e("./enum/LogLevel"),v=e("./enum/NativePlugin"),g=e("./enum/Os"),P=e("./enum/PerformanceMode"),N=e("./enum/Platform"),S=e("./enum/PlaybackState"),b=e("./enum/PlayerEvent"),_=e("./enum/PluginPriority"),C=e("./enum/QualityCategory"),R=e("./enum/StreamType"),O=e("./playback/enum/PlaybackAdapterType"),I=((i={env:"dev",playerVersion:"0.12.0",playerName:"cv-player",buildTime:"2020 Aug 26 09:04:22 PM UTC"}).playerName=i.playerName.indexOf("{__")<0?i.playerName:"CBSi Video Player (CVP)",i.playerVersion=i.playerVersion.indexOf("{__")<0?i.playerVersion:"-dev",i.buildTime=i.buildTime.indexOf("{__")<0?i.buildTime:(new Date).toLocaleDateString(),console&&console.log(i.playerName+"; Ver. "+i.playerVersion+"  "+i.buildTime),i);t.exports={createVideoPlayer:function(e,o){var t=this;return new a.Promise(function(r,i){n.Shell.createVideoPlayer(e,function(e,t){u.Util.isFunction(o)&&o(e,t),null!=t?i(t):r(e)},t.buildInfo)})},removeVideoPlayer:function(e){return n.Shell.removeVideoPlayer(e)},createResourceConfig:function(e){return n.Shell.createResourceConfig(e)},get buildInfo(){return I},get systemInfo(){return n.Shell.getSysInfoForUser()},core:{BaseClass:o.BaseClass,CoreEvent:s.CoreEvent,Emitter:c.Emitter},util:{QueryString:l.QueryString,Util:u.Util},AdContext:d.AdContext,Autoplay:p.Autoplay,Browser:m.Browser,Device:f.Device,ErrorCode:y.ErrorCode,KeyboardScope:h.KeyboardScope,LocalizationId:E.LocalizationId,LocalizedLanguage:A.LocalizedLanguage,LogLevel:T.LogLevel,NativePlugin:v.NativePlugin,Os:g.Os,PerformanceMode:P.PerformanceMode,Platform:N.Platform,PlaybackAdapterType:O.PlaybackAdapterType,PlaybackState:S.PlaybackState,PlayerEvent:b.PlayerEvent,PluginPriority:_.PluginPriority,QualityCategory:C.QualityCategory,StreamType:R.StreamType}},{"./app/Shell":50,"./core/BaseClass":82,"./core/CoreEvent":83,"./core/Emitter":84,"./core/QueryString":87,"./core/Util":88,"./enum/AdContext":96,"./enum/Autoplay":97,"./enum/Browser":98,"./enum/Device":99,"./enum/ErrorCode":102,"./enum/KeyboardScope":104,"./enum/LocalizationId":105,"./enum/LocalizedLanguage":106,"./enum/LogLevel":107,"./enum/NativePlugin":112,"./enum/Os":116,"./enum/PerformanceMode":117,"./enum/Platform":118,"./enum/PlaybackState":119,"./enum/PlayerEvent":121,"./enum/PluginPriority":122,"./enum/QualityCategory":124,"./enum/StreamType":126,"./playback/enum/PlaybackAdapterType":190,"es6-promise":25}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncDataRequest=void 0;var i,o=e("axios"),a=e("es6-promise"),n=e("../core/Util"),s=e("./RecoveryEnabledRequest"),c=(i=s.RecoveryEnabledRequest,_(l,i),l.load=function(e){return new a.Promise(function(r,i){e.onComplete=function(e){var t=e.data;return(t.error||t.timedOut?i:r)(t)},new l(e)})},l.prototype.createXhr=function(){var r=this;o.default(this.opts).then(function(e){0<=e.headers["content-type"].indexOf("application/smil")&&(e.data=r.processSmilResponse(e.data)),null===e.data?r.emitCompleteWithError("Unable to parse response.",e.config):setTimeout(function(){r.emitComplete(e)},1)}).catch(function(e){var t;r.shouldRetry()?(r.incrementAttempts(),setTimeout(function(){r.createXhr()},r.retryInterval)):(t=e.response||l.statusMessages[0],r.emitCompleteWithError(t,e.config))})},l.prototype.emitComplete=function(e){this.emit(l.event.COMPLETE,{response:e.data,contentType:e.headers["content-type"],error:!1})},l.prototype.emitCompleteWithError=function(e,t){var r=n.Util.isString(e)?e:null,i=r?null:e;this.emit(l.event.COMPLETE,{status:i&&i.status,error:!0,url:t&&t.url||"not available",message:r||this.getMsg(i&&i.status||0,i&&i.data||null)})},l.prototype.getMsg=function(e,t){return"XhrDataRequest error: "+(l.statusMessages[""+e]||(n.Util.isString(t)?t:"Unspecified error"))},l.prototype.processSmilResponse=function(e){var t=(new DOMParser).parseFromString(e,"application/xml");return t instanceof Document?t:null},l.event={COMPLETE:"complete"},l.statusMessages={0:"Request failed; blocked or timed out",500:"Server error encountered.",404:"Resource not found.",403:"Access denied."},l);function l(e){var t=i.call(this,e)||this;return t.opts.url&&t.createXhr(),t}r.AsyncDataRequest=c},{"../core/Util":88,"./RecoveryEnabledRequest":92,axios:1,"es6-promise":25}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncDataRequestOptions=void 0;var i=e("../enum/XhrResponseType"),o=(a.create=function(e){return{url:e.url||"",method:e.method||"get",timeout:e.timeout||4e3,headers:e.headers||{},data:this.getBody(e.data,e.encodeList,e.sendJson),withCredentials:!0===e.withCredentials,responseType:e.responseType||i.XhrResponseType.JSON,onComplete:e.onComplete||null,errorRecovery:e.errorRecovery||null}},a.getBody=function(e,t,r){if(void 0===r&&(r=!1),!e)return null;if("string"==typeof e)return e;if(!Object.keys(e).length)return null;var i=Array.isArray(t)&&t.length;for(var o in i||(t=[]),e)e[o]=this.getValue(o,e[o],t);if(r)return JSON.stringify(e);var a,n="";for(var o in e)null!==(a=e[o])&&null!=a&&""!=a&&(n+=o+"="+a+"&");return n=n.substr(0,n.length-1)},a.getValue=function(e,t,r){return 0<=r.indexOf(e)?encodeURIComponent(t):t},a);function a(){}r.AsyncDataRequestOptions=o},{"../enum/XhrResponseType":129}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RecoveryEnabledRequest=void 0;var i,o=e("../core/Emitter"),a=(i=o.Emitter,_(n,i),n.prototype.shouldRetry=function(){return this.limit&&!this.atLimit},n.prototype.incrementAttempts=function(){this.retryCount++},Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this.limit},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"atLimit",{get:function(){return this.retryCount==this.limit},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryInterval",{get:function(){return this.retryIntervals&&this.retryIntervals[this.retryCount-1]||300*this.retryCount},enumerable:!1,configurable:!0}),n);function n(e){var t=i.call(this,e)||this;t.retryCount=0,t.limit=0,t.retryIntervals=null;var r=t.opts.errorRecovery;return r&&!isNaN(r.retryAttempts)&&0<r.retryAttempts&&(t.limit=r.retryAttempts),r&&r.retryIntervals&&Array.isArray(r.retryIntervals)&&(t.retryIntervals=r.retryIntervals),t}r.RecoveryEnabledRequest=a},{"../core/Emitter":84}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptLoader=void 0;var i,o=e("../core/Util"),a=e("./RecoveryEnabledRequest"),n=e("es6-promise"),s=(i=a.RecoveryEnabledRequest,_(c,i),c.load=function(e){return new n.Promise(function(r,i){e.onComplete=function(e){var t=e.data;return(t.error||t.timedOut?i:r)(t)},new c(e)})},c.prototype.destroy=function(){if(this.timeoutHandles){for(var e in this.timeoutHandles)clearTimeout(this.timeoutHandles[e]);this.timeoutHandles=null,i.prototype.destroy.call(this)}},c.prototype.loadScript=function(e,t){var r=this,i=document.createElement("script"),o="https:"===window.location.protocol?e.replace("http:","https:"):e;this.map[o]={hLoad:function(){return r.hLoadOrError(o)},hError:function(){return r.hLoadOrError(o,!0,!1)},scriptEl:i};var a=this.map[o];t&&this.on(c.event.COMPLETE,t),i.async=!0,i.addEventListener("load",a.hLoad),i.addEventListener("error",a.hError),this.timeoutHandles[o]=setTimeout(function(){return r.hLoadOrError(o,!0,!0)},this.opts.timeout),document.head.appendChild(i),i.src=o},c.prototype.loadScripts=function(e,t){t&&this.on(c.event.COMPLETE,t);for(var r=0,i=e.length;r<i;r++)this.loadScript(e[r])},c.prototype.hLoadOrError=function(e,t,r){var i=this;clearTimeout(this.timeoutHandles[e]),delete this.timeoutHandles[e];var o=this.map[e];for(var a in o.scriptEl.removeEventListener("load",o.hLoad),o.scriptEl.removeEventListener("error",o.hError),o)delete o[a];delete this.map[e],t&&this.shouldRetry()?(this.incrementAttempts(),setTimeout(function(){i.loadScript(e)},this.retryInterval)):this.emit(c.event.COMPLETE,{url:e,error:t,timedOut:!0===r})},c.event={COMPLETE:"complete"},c);function c(e){var t=i.call(this,o.Util.assign({timeout:2e3},e||{}))||this;t.timeoutHandles={},t.map={};var r=t.hasListenerFor(c.event.COMPLETE);return t.opts.url&&r?t.loadScript(t.opts.url):t.opts.urls&&r&&t.loadScripts(t.opts.urls),t}r.ScriptLoader=s},{"../core/Util":88,"./RecoveryEnabledRequest":92,"es6-promise":25}],94:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityAction=void 0,(i=r.AccessibilityAction||(r.AccessibilityAction={})).ENTER_FULLSCREEN="enterFullScreen",i.INCREASE_VOLUME="increaseVolume",i.DECREASE_VOLUME="decreaseVolume",i.SEEK_BACK="seekBack",i.SEEK_FORWARD="seekForward",i.TOGGLE_PLAY="togglePlay",i.TOGGLE_TT="toggleTextTrack",i.TOGGLE_MUTE="toggleMute",i.PLAYLIST_NEXT="playListNext",i.PLAYLIST_PREV="playListPrev",i.STOP="stop"},{}],95:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.AdBreakType=void 0,(i=r.AdBreakType||(r.AdBreakType={})).PRE="PRE",i.MID="MID",i.POST="POST"},{}],96:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.AdContext=void 0,(i=r.AdContext||(r.AdContext={})).IMA="ima",i.DAI_SDK="dai_sdk",i.DAI_API="dai_api",i.DAI_SSB="dai_ssb",i.NONE=""},{}],97:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Autoplay=void 0,(i=r.Autoplay||(r.Autoplay={})).NONE="none",i.ATTEMPT_MUTED="attemptMuted",i.ATTEMPT_UNMUTED="attemptUnmuted",i.ATTEMPT_UNMUTED_THEN_MUTED="attemptUnmutedThenMuted"},{}],98:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Browser=void 0,(i=r.Browser||(r.Browser={})).ANDROID="Android",i.CHROME="Chrome",i.CHROME_IOS="Chrome-iOS",i.FIREFOX="Firefox",i.FIREFOX_IOS="Firefox-iOS",i.EDGE="Edge",i.MSIE="MSIE",i.SAFARI="Safari",i.OPERA="Opera",i.OPERA_MOBILE="Opera-Mobile",i.SILK="Silk",i.PLAYSTATION="PlayStation",i.UNKNOWN="Unknown"},{}],99:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Device=void 0,(i=r.Device||(r.Device={})).DESKTOP="Desktop",i.ANDROID_PHONE="Android Phone",i.WINDOWS_PHONE="Windows Phone",i.IPHONE="iPhone",i.IPOD="iPod",i.IPAD="iPad",i.KINDLE="Kindle",i.TABLET="Tablet",i.MOBILE="Mobile",i.EMBEDDED="Embedded",i.LG_SMART_TV="LG Smart Tv",i.VIZIO_SMART_TV="Vizio Smart Tv",i.SAMSUNG_SMART_TV="Samsung Smart Tv",i.COMCAST_X1="Comcast X1",i.XBOX_ONE="Xbox One",i.UNKNOWN="UNKNOWN"},{}],100:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.DiagnosticAction=void 0,(i=r.DiagnosticAction||(r.DiagnosticAction={})).DIAGNOSTIC_PLUGIN="toggleDiagnosticPlugin",i.CONFIG_TO_CLIPBOARD="configToClipboard",i.CONFIG_TO_TEST_PAGE="configToTestPage"},{}],101:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Env=void 0,(i=r.Env||(r.Env={})).DEV="dev",i.STAGE="stage",i.PROD="prod"},{}],102:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorCode=void 0,(i=r.ErrorCode||(r.ErrorCode={})).INVALID_RESOURCE_FORMAT="1000",i.RESOURCE_UNAVAILABLE="1100",i.GEO_LOCATION_BLOCKED="1101",i.DOMAIN_BLOCKED="1102",i.IP_BLOCKED="1103",i.SATELLITE_PROVIDER_BLOCKED="1104",i.EXPIRED="1105",i.SELECTOR_CALL_ERROR="1106",i.IMA_SDK_MISSING="1200",i.DAI_SDK_MISSING="1201",i.DASH_SDK_MISSING="1202",i.HLS_SDK_MISSING="1203",i.SHAKA_SDK_MISSING="1204",i.TWITCH_SDK_MISSING="1205",i.HLSJS_PARSE_ERROR="2101",i.DASHJS_PARSE_ERROR="2102",i.SHAKA_PARSE_ERROR="2103",i.TWITCH_PARSE_ERROR="2104",i.USER_GESTURE_REQUIRED="2300",i.HTML5_NETWORK_ERROR="3001",i.HLSJS_NETWORK_ERROR="3002",i.DASHJS_NETWORK_ERROR="3003",i.WEBMAF_NETWORK_ERROR="3004",i.SHAKA_NETWORK_ERROR="3005",i.TWITCH_NETWORK_ERROR="3006",i.MEDIA_ABORTED="3100",i.HTML5_SRC_NOT_SUPPORTED="3101",i.HLSJS_SRC_NOT_SUPPORTED="3102",i.DASHJS_SRC_NOT_SUPPORTED="3103",i.WEBMAF_SRC_NOT_SUPPORTED="3104",i.SHAKA_SRC_NOT_SUPPORTED="3105",i.TWITCH_SRC_NOT_SUPPORTED="3106",i.HTML5_MEDIA_ERROR="3200",i.HLSJS_MEDIA_ERROR="3201",i.HLSJS_MUX_ERROR="3202",i.DASHJS_MEDIA_ERROR="3203",i.WEBMAF_MEDIA_ERROR="3204",i.SHAKA_MEDIA_ERROR="3205",i.TWITCH_MEDIA_ERROR="3206",i.FAIRPLAY_APP_CERT_ERROR="3300",i.FAIRPLAY_LIC_ERROR="3301",i.DASHJS_DRM_ERROR="3302",i.WEBMAF_DRM_ERROR="3303",i.SHAKA_DRM_ERROR="3304",i.UNSPECIFIED_VIDEO_PLAYBACK_ERROR="3400",i.UNSPECIFIED_HLSJS_ERROR="3401",i.UNSPECIFIED_DASHJS_ERROR="3402",i.UNSPECIFIED_WEBMAF_ERROR="3403",i.UNSPECIFIED_SHAKA_ERROR="3404",i.UNSPECIFIED_TWITCH_ERROR="3405",i.AD_STALLED="4000",i.IMA_INIT_FAILURE="4100",i.IMA_AD_ERROR="4101",i.DAI_DATA_ERROR="4200",i.DAI_NETWORK_ERROR="4201",i.AD_BLOCKING_DETECTED="4300",i.UNEXPECTED_CONDITION="9999"},{}],103:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ImaVpaidMode=void 0,(i=r.ImaVpaidMode||(r.ImaVpaidMode={})).DISABLED="DISABLED",i.ENABLED="ENABLED",i.INSECURE="INSECURE"},{}],104:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.KeyboardScope=void 0,(i=r.KeyboardScope||(r.KeyboardScope={})).NONE="none",i.DOCUMENT="document",i.PLAYER="player"},{}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LocalizationId=void 0,(r.LocalizationId||(r.LocalizationId={})).MEDIA_PLAYER="media-player"},{}],106:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.LocalizedLanguage=void 0,(i=r.LocalizedLanguage||(r.LocalizedLanguage={})).EN="English",i.ES="Espaol",i.FR="Franais",i.PT="Portugus",i.DE="Deutsche",i.PL="Polski",i.JA="",i.KO="",i.ZH="",i.IT="Italiano",i.RU=" "},{}],107:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.LogLevel=void 0,(i=r.LogLevel||(r.LogLevel={})).OFF="off",i.ERROR="error",i.WARN="warn",i.INFO="info",i.DEBUG="debug"},{}],108:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.MediaError=void 0,(i=r.MediaError||(r.MediaError={}))[i.MEDIA_ERR_ABORTED=1]="MEDIA_ERR_ABORTED",i[i.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",i[i.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",i[i.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"},{}],109:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.MediatorName=void 0,(i=r.MediatorName||(r.MediatorName={})).APPLICATION="AppMediator",i.UI="UiMediator",i.FULLSCREEN="FullscreenMediator",i.TRACKING_MEDIATOR="TrackingMediator",i.TIMER_MEDIATOR="TimerMediator",i.PRESENTATION_MEDIATOR="PresentationMediator",i.PLUGIN_MEDIATOR="pluginMediator",i.KEY_COMMAND="keyCommandMediator",i.ACC_KEY_CMD_MEDIATOR="accessibilityKeyCommandMediator"},{}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MimeType=void 0;var i=e("../util/enum/MediaCapabilitiesMimeType");r.MimeType={VTT:"text/vtt",XML:"application/ttml+xml",M3U8:i.MediaCapabilitiesMimeType.HLS,MPD:i.MediaCapabilitiesMimeType.DASH,TS:i.MediaCapabilitiesMimeType.TS_VIDEO,MP4:i.MediaCapabilitiesMimeType.MP4_VIDEO,MPV:i.MediaCapabilitiesMimeType.MP4_VIDEO,MPA:i.MediaCapabilitiesMimeType.MP4_AUDIO,WEBM:i.MediaCapabilitiesMimeType.WEBM_VIDEO}},{"../util/enum/MediaCapabilitiesMimeType":225}],111:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ModelName=void 0,(i=r.ModelName||(r.ModelName={})).AdBreakInfo="AdBreakInfo",i.AdItem="AdItem",i.BuildInfo="BuildInfo",i.ContentPlaybackState="ContentPlaybackState",i.PlayerDom="PlayerDom",i.PlayerOptions="PlayerOptions",i.PresentationState="PresentationState"},{}],112:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.NativePlugin=void 0,(i=r.NativePlugin||(r.NativePlugin={})).REPLAY="replay",i.DIAGNOSTIC="diagnostic"},{}],113:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.NonPrintingKey=void 0,(i=r.NonPrintingKey||(r.NonPrintingKey={})).SPACE=" ",i.ENTER="Enter",i.TAB="Tab",i.CONTROL="Control",i.SHIFT="Shift",i.ESCAPE="Escape",i.META="Meta",i.ARROW_LEFT="ArrowLeft",i.ARROW_RIGHT="ArrowRight",i.ARROW_UP="ArrowUp",i.ARROW_DOWN="ArrowDown"},{}],114:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationName=void 0,(i=r.NotificationName||(r.NotificationName={})).DEFAULT="default",i.BOOT_APP="bootApp",i.BOOT_WEBMAF_APP="bootWebMafApp",i.PREP_TRACKING="prepTracking",i.PREP_SERVICE="prepService",i.TIMER_TIC="timerTic",i.APP_EVENT="appEvent",i.APP_ERROR_EVENT="appErrorEvent",i.READY="ready",i.RESOURCE_ERROR="resourceError",i.VIDEO_START_ERROR="videoStartError",i.VIDEO_PLAYBACK_ERROR="videoPlaybackError",i.PREP_RESOURCE_COLLECTION="prepResourceCollection",i.VALIDATE_RESOURCE="validateResource",i.RETRIEVE_RESOURCE="retrieveResource",i.TRANSFORM_RESOURCE="transformResourceData",i.REGISTER_RESOURCE="registerResource",i.PLAY_RESOURCE="playResource",i.PREP_PLUGINS="prepPlugins",i.LOAD_PLUGINS="loadPlugins",i.REMOVE_PLUGIN="removePlugin",i.START_PRESENTATION="startPresentation",i.RESOURCE_START="resourceStart",i.RESOURCE_END="resourceEnd",i.RESOURCE_PLAYING="resourcePlaying",i.RESOURCE_PAUSED="resourcePaused",i.RESOURCE_COMPLETE="resourceComplete",i.ADVANCE_PLAYLIST="advancePlaylist",i.PLAYLIST_CHANGE="playlistChanged",i.PLAYLIST_ADVANCED="playlistAdvanced",i.PLAYLIST_COMPLETE="playlistComplete",i.PLAYLIST_CLEARED="playlistCleared",i.PLAYLIST_CURRENT_RESOURCE_CLEARED="playlistCurrentResourceCleared",i.PLAYLIST_OUT_OF_RANGE="playlistOutOfRange",i.RESOURCE_INTERRUPTED="resourceInterrupted",i.CONTENT_COMPLETE="contentComplete",i.LIVE_PRESENTATION_STOPPED="livePresentationStopped",i.KILL_RESOURCE_PRESENTATION="killResourcePresentation",i.POSTER_CLICK="posterClick",i.SUSPEND_PLAYBACK="suspendPlayback",i.RESUME_PLAYBACK="resumePlayback",i.PLAYBACK_SUSPENDED="playbackSuspended",i.PLAYBACK_RESUMED="playbackResumed",i.FULLSCREEN_ENTER="fullscreenEnter",i.FULLSCREEN_EXIT="fullscreenExit",i.PRESENTATION_SIZE_CHANGE="presentationSizeChange",i.MOUSE_ENTER_PRESENTATION="mouseEnterPresentation",i.MOUSE_LEAVE_PRESENTATION="mouseLeavePresentation",i.USER_PAUSE="userPause",i.METADATA_CUEPOINT="metadataCuepoint",i.TEXT_CUEPOINT="textCuepoint",i.TEXT_TRACK_CHANGE="textTrackChange",i.TEXT_TRACK_DISPLAY_MODE_CHANGE="textTrackDisplayModeChange",i.TEXT_TRACK_AVAILABLE="textTrackAvailable",i.TEXT_TRACK_INFO_CHANGE="textTrackInfoChange",i.AUDIO_TRACK_CHANGE="audioTrackSwitched",i.AUDIO_TRACK_INFO_CHANGE="audioTrackInfoChange",i.QUALITY_INFO_CHANGE="qualityInfoChange",i.THUMBNAIL_TRACK_AVAILABLE="thumbnailTrackAvailable",i.AUTO_QUALITY_SWITCHING="autoQualitySwitching",i.MIN_BITRATE="minBitrate",i.MAX_BITRATE="maxBitrate",i.PLAY_ON_USER_GESTURE="playOnUSerGesture",i.PLAY="play",i.PAUSE="pause",i.STOP="stop",i.SEEK="seek",i.SEEK_FORWARD="seekForward",i.SEEK_BACK="seekBack",i.SEEK_TO_LIVE="seekToLive",i.SWITCH_BITRATE="switchBitrate",i.SWITCH_QUALITY_CATEGORY="switchQualityCategory",i.SWITCH_AUDIO_TRACK="switchAudioTrack",i.SWITCH_TEXT_TRACK="switchTextTrack",i.SWITCH_TEXT_MODE="switchTextMode",i.CONTENT_START="contentStart",i.CONTENT_DURATION_AVAILABLE="contentDurationAvailable",i.CONTENT_SEGMENT_START="contentSegmentStart",i.CONTENT_SEEKING="contentSeeking",i.CONTENT_SEEKED="contentSeeked",i.SEEK_REDIRECT_START="seekRedirectStart",i.SEEK_REDIRECT_COMPLETE="seekRedirectComplete",i.CONTENT_BUFFERING="contentBuffering",i.CONTENT_PLAYING="contentPlaying",i.CONTENT_PAUSED="contentPaused",i.QUALITY_CHANGE="contentQualityChange",i.CDN_CHANGE="contentCdnChange",i.DRM_KEYSYSTEM_CREATED="drmKeySystemCreated",i.CONTENT_SEGMENT_END="contentSegmentEnd",i.CONTENT_TIME_UPDATE="contentTimeupdate",i.CONTENT_IS_LIVE_CHANGED="contentIsLiveChanged",i.STREAM_TYPE_CHANGE="streamTypeChange",i.STREAM_METADATA="streamMetadata",i.VIDEO_PROGRESS="contentVideoProgress",i.VIDEO_LOAD_START="videoLoadStart",i.VIDEO_LOAD_COMPLETE="videoLoadComplete",i.VIDEO_LOADED_METADATA="videoLoadedMetadata",i.AUTOPLAY_BLOCKED="autoplayBlocked",i.AD_BUFFERING="adBuffering",i.AD_CUEPOINTS_AVAILABLE="adCuepointsAvailable",i.AD_BREAK_START="adBreakStart",i.AD_BREAK_METADATA="adBreakMetadata",i.AD_START="adStart",i.AD_TIME_UPDATE="adProgress",i.AD_FIRST_QUARTILE="adFirstQuartile",i.AD_MIDPOINT="adMidpoint",i.AD_THIRD_QUARTILE="adThirdQuartile",i.AD_COMPLETE="adComplete",i.AD_BREAK_COMPLETE="adBreakEnd",i.AD_PAUSED="adPaused",i.AD_PLAYING="adPlaying",i.AD_ERROR="adError",i.AD_STALLED="adStalled",i.AD_BREAK_DISCARDED="adBreakDiscarded",i.AD_CLICK="adClick",i.AD_SKIPPED="adSkipped",i.ENABLE_UI="enableUi",i.DISABLE_UI="disableUi",i.FULLSCREEN_AVAILABLE="fullscreenAvailable",i.FULLSCREEN_CHANGE="fullscreenChange",i.ENTER_FULLSCREEN_REQUEST="enterFullscreenRequest",i.EXIT_FULLSCREEN_REQUEST="exitFullscreenRequest",i.BEFORE_CONTROLS_VISIBLE="beforeControlsVisible",i.CONTROLS_VISIBLE="controlsVisible",i.BEFORE_CONTROLS_HIDDEN="beforeControlsHidden",i.CONTROLS_HIDDEN="controlsHidden",i.MUTE="mute",i.UNMUTE="unmute",i.VOLUME_CHANGE="volumeChange",i.USER_KEY_COMMAND="userKeyCommand",i.USER_KEYBOARD_COMMAND="userKeyboardCommand",i.TT_OFFSET_REQUEST="ttOffsetRequest",i.USER_SETTINGS_REQUEST="userSettingsRequest",i.CHANGE_LANGUAGE="changeLanguage",i.LANGUAGE_CHANGE="languageChange"},{}],115:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.NotificationType=void 0,(i=r.NotificationType||(r.NotificationType={})).EXTERNAL="external",i.INTERNAL="internal",i.UI="ui"},{}],116:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Os=void 0,(i=r.Os||(r.Os={})).OSX="OS X",i.WINDOWS="Windows",i.WINDOWS7="Windows 7",i.WINDOWS8="Windows 8",i.WINDOWS10="Windows 10",i.WINDOWS_VISTA="Windows Vista",i.WINDOWS_PHONE="Windows Phone",i.IOS="iOS",i.ANDROID="Android",i.CHROMIUM="Chromium",i.WEBOS="Web0S",i.SMARTCAST="SmartCast",i.TIZEN="Tizen",i.UNKNOWN="Unknown"},{}],117:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PerformanceMode=void 0,(i=r.PerformanceMode||(r.PerformanceMode={})).AUTO="auto",i.DESKTOP="desktop",i.MOBILE="mobile",i.TV="tv"},{}],118:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Platform=void 0,(i=r.Platform||(r.Platform={})).MAC="Macintosh",i.WINDOWS="Windows",i.LINUX="Linux",i.UNKNOWN="Unknown"},{}],119:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackState=void 0,(i=r.PlaybackState||(r.PlaybackState={}))[i.EMPTY=-2]="EMPTY",i[i.LOADING=-1]="LOADING",i[i.STOPPED=0]="STOPPED",i[i.PLAYING=1]="PLAYING",i[i.PAUSED=2]="PAUSED",i[i.BUFFERING=3]="BUFFERING"},{}],120:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerDom=void 0,(i=r.PlayerDom||(r.PlayerDom={})).MAIN_CONTAINER="main",i.VIDEO_EL="video",i.VIDEO_CONTAINER="videoContainer",i.CC_CONTAINER="ccContainer",i.AD_CONTAINER="adContainer",i.PANEL_CONTAINER="panelContainer",i.AD_CLICK_EL="adClickEl"},{}],121:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerEvent=void 0,(i=r.PlayerEvent||(r.PlayerEvent={})).READY="ready",i.AD_CUEPOINTS_AVAILABLE="adCuepointsAvailable",i.AD_BREAK_START="adBreakStart",i.AD_BREAK_METADATA="adBreakMetadata",i.AD_BREAK_COMPLETE="adBreakComplete",i.AD_START="adStart",i.AD_COMPLETE="adComplete",i.AD_FIRST_QUARTILE="adFirstQuartile",i.AD_MIDPOINT="adMidPoint",i.AD_THIRD_QUARTILE="adThirdQuartile",i.AD_ERROR="adError",i.AD_CLICK="adClick",i.AD_SKIPPED="adSkipped",i.AD_PROGRESS="adProgress",i.AD_PAUSED="adPaused",i.AD_PLAYING="adPlaying",i.AD_STALLED="adStalled",i.AD_BREAK_DISCARDED="adBreakDiscarded",i.AUDIO_TRACK_INFO_CHANGE="audioTrackInfoChange",i.AUDIO_TRACK_CHANGE="audioTrackChange",i.QUALITY_CHANGE="qualityChange",i.QUALITY_INFO_CHANGE="qualityInfoChange",i.CDN_CHANGE="cdnChange",i.CONTENT_START="contentStart",i.CONTENT_DURATION_AVAILABLE="contentDurationAvailable",i.CONTENT_SEGMENT_START="contentSegmentStart",i.CONTENT_PLAYING="contentPlaying",i.CONTENT_PROGRESS="contentProgress",i.CONTENT_PAUSED="contentPaused",i.CONTENT_SEGMENT_END="contentSegmentEnd",i.CONTENT_COMPLETE="contentComplete",i.CONTENT_IS_PLAYING_LIVE="contentIsPlayingLive",i.STREAM_TYPE_CHANGE="streamTypeChange",i.STREAM_METADATA="streamMetadata",i.DRM_KEYSYSTEM_CREATED="drmKeySystemCreated",i.FATAL_ERROR="fatalError",i.ERROR="error",i.PLAYLIST_ADVANCED="playlistAdvanced",i.PLAYLIST_COMPLETE="playlistComplete",i.PLAYLIST_CHANGE="playlistChange",i.PLAYLIST_CLEARED="playlistCleared",i.PLAYLIST_OUT_OF_RANGE="playlistOutOfRange",i.PLAYLIST_CURRENT_RESOURCE_CLEARED="playlistCurrentResourceCleared",i.POSTER_CLICK="posterClick",i.PLAYBACK_SUSPENDED="playbackSuspended",i.PLAYBACK_RESUMED="playbackResumed",i.RESOURCE_START="resourceStart",i.RESOURCE_END="resourceEnd",i.RESOURCE_INTERRUPTED="resourceInterrupted",i.RESOURCE_ERROR="resourceError",i.RESOURCE_BUFFERING="resourceBuffering",i.SEEK_COMPLETE="seekComplete",i.SEEK_START="seekStart",i.SEEK_REDIRECT_START="seekRedirectStart",i.SEEK_REDIRECT_COMPLETE="seekRedirectComplete",i.METADATA_CUEPOINT="metadataCuepoint",i.TEXT_CUEPOINT="textCuepoint",i.TEXT_TRACK_CHANGE="textTrackChange",i.TEXT_TRACK_INFO_CHANGE="textTrackInfoChange",i.TEXT_TRACK_DISPLAY_MODE_CHANGE="textTrackDisplayModeChange",i.TEXT_TRACK_AVAILABLE="textTrackAvailable",i.THUMBNAIL_TRACK_AVAILABLE="thumbnailTrackAvailable",i.VIDEO_START_ERROR="videoStartError",i.VIDEO_PLAYBACK_ERROR="videoPlaybackError",i.VIDEO_LOAD_COMPLETE="videoLoadComplete",i.BEFORE_CONTROLS_VISIBLE="beforeControlsVisible",i.BEFORE_CONTROLS_HIDDEN="beforeControlsHidden",i.CONTROLS_VISIBLE="controlsVisible",i.CONTROLS_HIDDEN="controlsHidden",i.LIVE_PRESENTATION_STOPPED="livePresentationStopped",i.PRESENTATION_SIZE_CHANGE="presentationSizeChange",i.FULLSCREEN_ENTER="fullscreenEnter",i.FULLSCREEN_EXIT="fullscreenExit",i.MOUSE_ENTER_PRESENTATION="mouseEnterPresentation",i.MOUSE_LEAVE_PRESENTATION="mouseLeavePresentation",i.USER_PAUSE="userPause",i.USER_SETTINGS="userSettings",i.LOG_EVENT="logEvent",i.PLUGIN_EVENT="pluginEvent",i.LANGUAGE_CHANGE="languageChange",i.USER_KEYBOARD_COMMAND="userKeyboardCommand",i.AUTOPLAY_BLOCKED="autoplayBlocked"},{}],122:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PluginPriority=void 0,(i=r.PluginPriority||(r.PluginPriority={})).LOW="low",i.HIGH="high"},{}],123:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ProxyName=void 0,(i=r.ProxyName||(r.ProxyName={})).AdDataProxy="AdDataProxy",i.ContentPlaybackStateProxy="ContentPlaybackStateProxy",i.PlayerDomProxy="PlayerDomProxy",i.Playlist="PlaylistProxy",i.ModelCollectionProxy="ModelCollectionProxy",i.ResourceProxy="ResourceProxy",i.TrackingConfigProxy="TrackingConfigProxy",i.PerformanceProxy="PerformanceProxy",i.TextTrackProxy="TextTrackProxy",i.LocalizationProxy="LocalizationProxy"},{}],124:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.QualityCategory=void 0,(i=r.QualityCategory||(r.QualityCategory={})).SD="SD",i.HD="HD",i.UHD="UHD"},{}],125:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ServiceName=void 0,(i=r.ServiceName||(r.ServiceName={})).ImaAd="ImaAd",i.DaiAd="DaiAd",i.System="System",i.MediaCapabilities="MediaCapabilities",i.Logging="Logging",i.Tracking="Tracking",i.BuildInfo="BuildInfo",i.TrackingService="TrackingService",i.AutoplayCapabilities="AutoplayCapabilities"},{}],126:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.StreamType=void 0,(i=r.StreamType||(r.StreamType={})).VOD="VOD",i.LIVE="LIVE",i.DVR="DVR"},{}],127:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.VideoFormat=void 0,(i=r.VideoFormat||(r.VideoFormat={})).HLS="hls",i.DASH="dash",i.MP4="mp4",i.UNKNOWN="unknown"},{}],128:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.VideoMode=void 0,(i=r.VideoMode||(r.VideoMode={}))[i.AD=0]="AD",i[i.CONTENT=1]="CONTENT",i[i.IDLE=2]="IDLE"},{}],129:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.XhrResponseType=void 0,(i=r.XhrResponseType||(r.XhrResponseType={})).ARRAY_BUFFER="arraybuffer",i.TEXT="text",i.JSON="json",i.DOCUMENT="document",i.DEFAULT=""},{}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdErrorEvent=void 0;var a,n=e("../enum/PlayerEvent"),i=e("./PlayerErrorEvent"),o=(a=i.PlayerErrorEvent,_(s,a),Object.defineProperty(s.prototype,"errorCode",{get:function(){return this.eInfo.errorCode||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"innerErrorMessage",{get:function(){return this.eInfo.innerErrorMessage||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sdkVersion",{get:function(){return this.eInfo.sdkVersion||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"vastErrorCode",{get:function(){return this.eInfo.vastErrorCode||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"requestContext",{get:function(){return this.eInfo.requestContext||null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"adInfo",{get:function(){return this.eInfo.adInfo||null},enumerable:!1,configurable:!0}),s);function s(e,t,r,i){var o=a.call(this,n.PlayerEvent.AD_ERROR,e,t,r,i)||this;return o.eInfo=o.data||{},o}r.AdErrorEvent=o},{"../enum/PlayerEvent":121,"./PlayerErrorEvent":131}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerErrorEvent=void 0;var n,i=e("../core/CoreEvent"),s=e("../core/Util"),o=(n=i.CoreEvent,_(a,n),Object.defineProperty(a.prototype,"code",{get:function(){return this.pCode},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"message",{get:function(){return this.pMessage},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"fatal",{get:function(){return this.pFatal},enumerable:!1,configurable:!0}),a);function a(e,t,r,i,o){void 0===o&&(o=!1);var a=n.call(this,e,null,s.Util.assign({},i))||this;return a.pCode=t,a.pMessage=r,a.pFatal=o,a}r.PlayerErrorEvent=o},{"../core/CoreEvent":83,"../core/Util":88}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdDataProxy=void 0;var i,o=e("../enum/ModelName"),a=e("../enum/ProxyName"),n=e("../mvc/Proxy"),s=(i=n.Proxy,_(c,i),c.prototype.onRegister=function(){var e=this.facade.retrieveProxy(a.ProxyName.ModelCollectionProxy);this.breakModel=e.getModel(o.ModelName.AdBreakInfo),this.adItemModel=e.getModel(o.ModelName.AdItem)},c.prototype.onRemove=function(){this.breakModel=null,this.adItemModel=null,i.prototype.onRemove.call(this)},c.prototype.resetAll=function(){this.breakModel.reset(),this.resetAd()},c.prototype.resetAd=function(){this.adItemModel.reset()},Object.defineProperty(c.prototype,"breakInfo",{get:function(){return this.breakModel.data},set:function(e){var t=this.breakModel.model;for(var r in t)e.hasOwnProperty(r)&&(t[r]=e[r])},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"adInfo",{get:function(){return this.adItemModel.data},set:function(e){var t=this.adItemModel.model;for(var r in t)e.hasOwnProperty(r)&&(t[r]=e[r])},enumerable:!1,configurable:!0}),c);function c(e,t){return i.call(this,e,t)||this}r.AdDataProxy=s},{"../enum/ModelName":111,"../enum/ProxyName":123,"../mvc/Proxy":171}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContentPlaybackStateProxy=void 0;var i,o=e("../core/Util"),a=e("../enum/ProxyName"),n=e("../mvc/Proxy"),s=e("../playback/enum/Playback"),c=e("./vo/ContentPlaybackState"),l=e("../util/Utils"),u=(i=n.Proxy,_(d,i),d.prototype.onRegister=function(){i.prototype.onRegister.call(this);var e=this.facade.retrieveProxy(a.ProxyName.ModelCollectionProxy);this.contentPlaybackState=e.getModel(c.ContentPlaybackState.modelName),this.contentPlaybackState.qualityInfo={mode:s.Playback.ABR_SWITCHING_MODE_AUTO,quality:null,qualities:[]},this.contentPlaybackState.textTracks={track:null,tracks:[]},this.contentPlaybackState.audioTracks={track:null,tracks:[]},this.pTextTracks={}},d.prototype.onRemove=function(){this.contentPlaybackState=null,this.pTextTracks=null,this.thumbnailTrack=null,i.prototype.onRemove.call(this)},d.prototype.processQualityProfile=function(e){this.tagQualities(e),this.contentPlaybackState.qualityInfo.qualities=e},d.prototype.updateQualityProfile=function(e,t,r){var i=r.slice(e,t+1);this.processQualityProfile(i)},d.prototype.updateAudioTracks=function(e,t){var r=this.contentPlaybackState.audioTracks;r.track=e,t&&(r.tracks=t)},d.prototype.addTextTrack=function(e){var t=e.id?e.id.toString():o.Util.uid8(),r=Object.freeze({id:t,language:e.language,kind:e.kind,label:e.label});this.pTextTracks[t]=e,this.contentPlaybackState.textTracks.tracks.push(r)},d.prototype.getTextTrackId=function(t){return o.Util.entries(this.pTextTracks).filter(function(e){return e[1]==t}).map(function(e){return e[0]})[0]},d.prototype.getTextTrackById=function(e){return this.pTextTracks[e]},d.prototype.tagQualities=function(e){e.forEach(function(e){e.category||(e.category=[""+String(l.Utils.getQualityCategoryForVideoHeight(e.height)),e.height+"p"])})},d.prototype.getThumbnail=function(e){var t;return null===(t=this.thumbnailTrack)||void 0===t?void 0:t.getCueAt(e)},Object.defineProperty(d.prototype,"nativeTextTrack",{get:function(){return this.pTextTrack},set:function(e){this.pTextTrack=e;var t=this.getTextTrackId(e),r=o.Util.find(this.contentPlaybackState.textTracks.tracks,function(e){return e.id==t});this.contentPlaybackState.textTracks.track=r},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"textTrackInfo",{get:function(){return this.contentPlaybackState.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"textTrack",{get:function(){return this.contentPlaybackState.textTracks.track},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isAbrSwitchingAvailable",{get:function(){return!!this.manifestQualities&&1<this.manifestQualities.length},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"userQualityCategory",{get:function(){return this.pUserQualityCategory},set:function(e){this.pUserQualityCategory=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"qualitySwitchingMode",{get:function(){return this.contentPlaybackState.qualityInfo.mode},set:function(e){this.contentPlaybackState.qualityInfo.mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"manifestQualities",{get:function(){return this.contentPlaybackState.manifestQualities},set:function(e){this.contentPlaybackState.manifestQualities=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"maxBandwidth",{set:function(e){this.contentPlaybackState.maxBandwidth=isNaN(this.contentPlaybackState.maxBandwidth)?e:Math.max(e,this.contentPlaybackState.maxBandwidth)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"model",{get:function(){return this.contentPlaybackState},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"minIndex",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"maxIndex",{get:function(){return this.contentPlaybackState.qualityInfo.qualities?this.contentPlaybackState.qualityInfo.qualities.length-1:0},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"minBitrate",{get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.minIndex].bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"maxBitrate",{get:function(){return this.contentPlaybackState.qualityInfo.qualities[this.maxIndex].bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"qualityInfo",{get:function(){return this.contentPlaybackState.qualityInfo},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"quality",{set:function(e){this.contentPlaybackState.qualityInfo.quality=e},enumerable:!1,configurable:!0}),d);function d(e,t){var r=i.call(this,e,t)||this;return r.pUserQualityCategory=null,r}r.ContentPlaybackStateProxy=u},{"../core/Util":88,"../enum/ProxyName":123,"../mvc/Proxy":171,"../playback/enum/Playback":188,"../util/Utils":220,"./vo/ContentPlaybackState":153}],134:[function(e,t,r){"use strict";var i,o;Object.defineProperty(r,"__esModule",{value:!0}),r.LocalizationProxy=void 0;var a,n=e("es6-promise"),s=e("../app/ApiDecorators"),c=e("../core/Util"),l=e("../dataservice/AsyncDataRequest"),u=e("../enum/LocalizationId"),d=e("../enum/LogLevel"),p=e("../enum/XhrResponseType"),m=e("../mvc/Proxy"),f=(a=m.Proxy,_(y,a),y.load=function(e){return null==this.pExternalData[e]&&(this.pExternalData[e]=l.AsyncDataRequest.load({url:e,responseType:p.XhrResponseType.JSON})),this.pExternalData[e].then(function(e){return e.response})},y.prototype.onRemove=function(){this.pLocale=null,this.pLocalizationData=null,this.pLanguageTag=null,this.pLanguage=null},y.prototype.getApi=function(){return s.apiCollection({},this)},Object.defineProperty(y.prototype,"defaultLanguage",{get:function(){return navigator&&navigator.language?navigator.language:"en"},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"language",{get:function(){return this.pLanguage||this.defaultLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"languageTag",{get:function(){return this.pLanguageTag},enumerable:!1,configurable:!0}),y.prototype.changeLanguage=function(e){var o=this;void 0===e&&(e=this.defaultLanguage),this.pLanguage=e,this.pLanguageTag=c.Util.parseLanguageTag(this.language);var r=new RegExp("^"+this.pLanguageTag.language,"i"),t=this.pLocalizationData.map(function(e){var t=c.Util.entries(e).filter(function(e){return r.test(e[0])}).map(function(e){return"string"==typeof e[1]?(r=(t=e)[0],i=t[1],y.load(i).then(function(e){return[r,e]}).catch(function(e){return o.facade.log(d.LogLevel.ERROR,"Could not load locale file "+i,e),[r,{}]})):e;var t,r,i});return n.Promise.all(t)});return n.Promise.all(t).then(function(e){var t=e.map(function(e){return c.Util.fromEntries(e)}),r=c.Util.merge.apply(c.Util,t);return o.pLocale=r})},y.prototype.registerLocalizationData=function(e){c.Util.isEmpty(e)||this.pLocalizationData.push(e)},y.prototype.localize=function(e,t){var r=this.lookup(e);return c.Util.template(r,t)},y.prototype.lookup=function(t,e){var r=this;function i(e){return(r.pLocale[e]||{})[t]}return void 0===e&&(e=this.language),i(e)||i(this.pLanguageTag.language)||t},y.pExternalData={},y.LocalizationData={en:((i={})[u.LocalizationId.MEDIA_PLAYER]="Media Player",i),es:((o={})[u.LocalizationId.MEDIA_PLAYER]="Reproductor multimedia",o)},b([s.apiAccessor(!0)],y.prototype,"defaultLanguage",null),b([s.apiAccessor(!0)],y.prototype,"language",null),b([s.apiMethod()],y.prototype,"languageTag",null),b([s.apiMethod()],y.prototype,"changeLanguage",null),b([s.apiMethod()],y.prototype,"registerLocalizationData",null),b([s.apiMethod()],y.prototype,"localize",null),y);function y(e,t){var r=a.call(this,e,{})||this;return r.pLocalizationData=[],r.pLocale={},r.pLanguage=t,r.registerLocalizationData(y.LocalizationData),r}r.LocalizationProxy=f},{"../app/ApiDecorators":46,"../core/Util":88,"../dataservice/AsyncDataRequest":90,"../enum/LocalizationId":105,"../enum/LogLevel":107,"../enum/XhrResponseType":129,"../mvc/Proxy":171,"es6-promise":25}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModelCollectionProxy=void 0;var i,o=e("../enum/ModelName"),a=e("../enum/ProxyName"),n=e("../mvc/Proxy"),s=(i=n.Proxy,_(c,i),c.prototype.onRemove=function(){this.resettables=null;var e=this.facade.retrieveProxy(a.ProxyName.PlayerDomProxy);e&&e.removeDom(),i.prototype.onRemove.call(this)},Object.defineProperty(c.prototype,"collection",{get:function(){return this.data},enumerable:!1,configurable:!0}),c.prototype.getSnapshot=function(){return this.collection.getSnapshot()},c.prototype.getModel=function(e){return this.data.getModel(e)},c.prototype.reset=function(){for(var e=this.resettables,t=e.length;t--;)this.getModel(e[t]).reset();var r=this.getModel(o.ModelName.PresentationState);r.skipAutoplayCheck=!r.isAutoplay||null!==r.autoplaySupport,r.isAutoplay=!0,r.isCurrentVideoAd=!1,r.started=!1,r.streamDuration=NaN,r.streamTime=NaN},c);function c(e,t){var r=i.call(this,e,t)||this;return r.resettables=[o.ModelName.AdBreakInfo,o.ModelName.AdItem,o.ModelName.ContentPlaybackState],r}r.ModelCollectionProxy=s},{"../enum/ModelName":111,"../enum/ProxyName":123,"../mvc/Proxy":171}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PerformanceProxy=void 0;var i,o=e("../enum/ModelName"),a=e("../enum/PerformanceMode"),n=e("../enum/ProxyName"),s=e("../enum/ServiceName"),c=e("../mvc/Proxy"),l=(i=c.Proxy,_(u,i),u.prototype.onRegister=function(){var e=this.facade.retrieveProxy(n.ProxyName.ModelCollectionProxy).getModel(o.ModelName.PlayerOptions);this.pMode=e.performanceMode==a.PerformanceMode.AUTO?this.calculatePerformanceMode():e.performanceMode},u.prototype.calculatePerformanceMode=function(){var e=this.facade.retrieveService(s.ServiceName.System);switch(!0){case e.isTv:case e.isEmbedded:return a.PerformanceMode.TV;case e.isMobile:return a.PerformanceMode.MOBILE;default:return a.PerformanceMode.DESKTOP}},Object.defineProperty(u.prototype,"mode",{get:function(){return this.pMode},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"forwardBufferLength",{get:function(){switch(this.pMode){case a.PerformanceMode.MOBILE:case a.PerformanceMode.TV:return 20;default:return null}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"backBufferLength",{get:function(){switch(this.pMode){case a.PerformanceMode.MOBILE:case a.PerformanceMode.TV:return 30;default:return 60}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"topQualityForwardBufferLength",{get:function(){switch(this.pMode){case a.PerformanceMode.MOBILE:case a.PerformanceMode.TV:return 60;default:return null}},enumerable:!1,configurable:!0}),u);function u(e,t){return i.call(this,e,t)||this}r.PerformanceProxy=l},{"../enum/ModelName":111,"../enum/PerformanceMode":117,"../enum/ProxyName":123,"../enum/ServiceName":125,"../mvc/Proxy":171}],137:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerDomProxy=void 0;var i,o=e("es6-promise"),a=e("../app/AppResources"),n=e("../enum/PlayerDom"),s=e("../mvc/Proxy"),c=(i=s.Proxy,_(l,i),l.prototype.setModel=function(e){for(var t in e)this.model[t]=e[t]},l.prototype.removeDom=function(){for(var e=this.getMain(),t=e.childNodes,r=t.length;r--;)e.removeChild(t[r])},l.prototype.setControlVisibility=function(e){var t,r=this.getMain();r&&(t=e?"add":"remove",r.classList[t](this.controlVisCssClass))},l.prototype.getElement=function(e){return this.model[e]||null},l.prototype.getSafeZIndex=function(){var e=this.getElement(n.PlayerDom.AD_CONTAINER);return e?Number(e.style.zIndex)+10:10},l.prototype.getVideo=function(){return this.getElement(n.PlayerDom.VIDEO_EL)},l.prototype.getTextTrackContainer=function(){return this.getElement(n.PlayerDom.CC_CONTAINER)||null},l.prototype.setVideoVolume=function(e){var t=this.getVideo();t&&this.getVideoVolume()!=e&&(t.volume=e)},l.prototype.getVideoVolume=function(){var e=this.getVideo();return e?e.volume:null},l.prototype.getMain=function(){return this.getElement(n.PlayerDom.MAIN_CONTAINER)},l.prototype.showAdClickElement=function(e){var t=this.getElement(n.PlayerDom.AD_CLICK_EL);t&&(t.style.display=!1!==e?"block":"none")},l.prototype.getDimensions=function(){var e=this.getPresentationRect();return e?{width:e.width,height:e.height}:null},l.prototype.showContainer=function(e,t){var r=this.getElement(e);r&&(r.style.display=t?"inline-block":"none")},l.prototype.showAdContainer=function(e){this.showContainer(n.PlayerDom.AD_CONTAINER,e)},l.prototype.getPresentationRect=function(){var e=this.getMain();return e&&e.getBoundingClientRect()||null},l.prototype.muteVideo=function(e){var t=this.getVideo(),r="muted";t&&((t.muted=e)&&t.setAttribute(r,r),e||t.removeAttribute(r))},l.prototype.primeVideo=function(){var t=this;return o.Promise.resolve().then(function(){var e=t.getVideo();if(e)return e.src=a.AppResources.blankVideoUrl,e.load(),e.play()})},l.prototype.setVideoAttribute=function(e,t){var r=this.getVideo();r&&r.setAttribute(e,t)},l.prototype.removeVideoAttribute=function(e){var t=this.getVideo();t&&t.removeAttribute(e)},Object.defineProperty(l.prototype,"model",{get:function(){return this.data},enumerable:!1,configurable:!0}),l);function l(e,t){var r=i.call(this,e,t)||this;return r.controlVisCssClass="cvui-ctrlbar-vis",r}r.PlayerDomProxy=c},{"../app/AppResources":47,"../enum/PlayerDom":120,"../mvc/Proxy":171,"es6-promise":25}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaylistProxy=void 0;var i,o=e("../app/ApiDecorators"),a=e("../app/ResourceConfiguration"),n=e("../core/Util"),s=e("../enum/NotificationName"),c=e("../enum/NotificationType"),l=e("../mvc/Proxy"),u=(i=l.Proxy,_(d,i),d.prototype.onRemove=function(){this.clear(),this.pList=null,this.cachedApi=null,i.prototype.onRemove.call(this)},d.prototype.getApi=function(){return this.cachedApi||(this.cachedApi=o.apiCollection({},this)),this.cachedApi},Object.defineProperty(d.prototype,"list",{get:function(){for(var e=[],t=this.pList.length;t--;)e.unshift(n.Util.merge({},this.pList[t]));return e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"length",{get:function(){return this.pList.length},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"currentIndex",{get:function(){return this.pCurrentIndex},set:function(e){var t;e<0||e>=this.pList.length?this.notify(s.NotificationName.PLAYLIST_OUT_OF_RANGE):(t=Math.max(this.pCurrentIndex,0),this.advance(e-t))},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"currentResource",{get:function(){var e=this.find(this.pCurrentIndex);return e?n.Util.merge({},e):null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"nextResource",{get:function(){var e=this.find(this.pCurrentIndex+1);return e?n.Util.merge({},e):null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"prevResource",{get:function(){var e=this.find(this.pCurrentIndex-1);return e?n.Util.merge({},e):null},enumerable:!1,configurable:!0}),d.prototype.next=function(){this.advance(1)},d.prototype.prev=function(){this.advance(-1)},d.prototype.start=function(e){void 0===e&&(e=0),this.pCurrentIndex=isNaN(e)?-1:e-1,this.advance()},d.prototype.addResources=function(e,i){var o=this;void 0===i&&(i=null),(Array.isArray(e)?e:[e]).forEach(function(e,t){var r=new a.ResourceConfiguration(e);null!==i?o.pList.splice(i+t,0,r):o.pList.push(r)}),this.notifyChanged()},d.prototype.removeResourceAtIndex=function(e){var t=this.length;if(e===this.currentIndex&&1===t)return this.clear(),null;if(0<=e&&e<t){var r=this.pList.splice(e,1);return e===this.currentIndex&&this.notify(s.NotificationName.PLAYLIST_CURRENT_RESOURCE_CLEARED,{interruptedResource:r}),this.notifyChanged(),r&&r[0]||null}return null},d.prototype.clear=function(){var e=this.find(this.pCurrentIndex);this.pList=[],this.pCurrentIndex=-1,this.notify(s.NotificationName.PLAYLIST_CLEARED,{interruptedResource:e})},d.prototype.advance=function(e){void 0===e&&(e=1);var t=this.pCurrentIndex+e,r=this.find(t),i=null,o=null,i=r?(o={resource:r,currentIndex:this.pCurrentIndex=t},s.NotificationName.PLAYLIST_ADVANCED):t<0?s.NotificationName.PLAYLIST_OUT_OF_RANGE:s.NotificationName.PLAYLIST_COMPLETE;this.notify(i,o)},d.prototype.find=function(e){return 0<=e&&e<this.pList.length&&this.pList[e]||null},d.prototype.notify=function(e,t){void 0===t&&(t=null),this.facade&&this.facade.sendNotification(e,t||null,c.NotificationType.INTERNAL)},d.prototype.notifyChanged=function(){this.notify(s.NotificationName.PLAYLIST_CHANGE,null)},b([o.apiAccessor(!0)],d.prototype,"list",null),b([o.apiAccessor()],d.prototype,"length",null),b([o.apiAccessor()],d.prototype,"currentIndex",null),b([o.apiAccessor()],d.prototype,"currentResource",null),b([o.apiAccessor()],d.prototype,"nextResource",null),b([o.apiAccessor()],d.prototype,"prevResource",null),b([o.apiMethod()],d.prototype,"next",null),b([o.apiMethod()],d.prototype,"prev",null),b([o.apiMethod()],d.prototype,"start",null),b([o.apiMethod()],d.prototype,"addResources",null),b([o.apiMethod()],d.prototype,"removeResourceAtIndex",null),b([o.apiMethod()],d.prototype,"clear",null),d);function d(e,t){var r=i.call(this,e,t)||this;return r.pCurrentIndex=-1,r.cachedApi=null,r.pList=[],r}r.PlaylistProxy=u},{"../app/ApiDecorators":46,"../app/ResourceConfiguration":49,"../core/Util":88,"../enum/NotificationName":114,"../enum/NotificationType":115,"../mvc/Proxy":171}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ResourceProxy=void 0;var i,o=e("../core/Util"),a=e("../mvc/Proxy"),n=(i=a.Proxy,_(s,i),s.prototype.mock=function(e){this.pResource=e},s.prototype.onRemove=function(){this.pResource=null,i.prototype.onRemove.call(this)},s.prototype.onRegister=function(){i.prototype.onRegister.call(this),this.pResource=this.data},Object.defineProperty(s.prototype,"resource",{get:function(){return this.pResource},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"location",{get:function(){return this.pResource.location},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"playback",{get:function(){return this.pResource.playback},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"metadata",{get:function(){return this.pResource.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ad",{get:function(){return this.pResource.ad},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"adTrackingSettings",{get:function(){return this.pResource.ad.viewabilityTracking},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"hasValidMediaUrl",{get:function(){return!o.Util.isEmpty(this.location.mediaUrl)},enumerable:!1,configurable:!0}),s);function s(e,t){return i.call(this,e,t)||this}r.ResourceProxy=n},{"../core/Util":88,"../mvc/Proxy":171}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackProxy=void 0;var i,o=e("../mvc/Proxy"),a=e("../playback/enum/TextTrackMode"),n=(i=o.Proxy,_(s,i),Object.defineProperty(s.prototype,"mode",{get:function(){return this.data.mode},set:function(e){this.data.mode=e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enabled",{get:function(){return this.data.mode!=a.TextTrackMode.DISABLED},set:function(e){this.mode=e?this.enabledMode:a.TextTrackMode.DISABLED},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"enabledMode",{get:function(){return this.data.native?a.TextTrackMode.SHOWING:a.TextTrackMode.HIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"native",{get:function(){return this.data.native},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"language",{get:function(){return this.data.language},set:function(e){this.data.language=e},enumerable:!1,configurable:!0}),s);function s(e,t){return void 0===t&&(t={}),i.call(this,e,{native:!1!==t.native,mode:a.TextTrackMode.DISABLED,language:null!=t.language?t.language:navigator.language})||this}r.TextTrackProxy=n},{"../mvc/Proxy":171,"../playback/enum/TextTrackMode":194}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ad_break_info_config=void 0;var i=e("../../enum/AdBreakType"),o=e("../vo/Validator");r.ad_break_info_config={adBreakDuration:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adTotal:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adBreakPosition:{type:"number",defaultValue:-1,setterTransformer:function(e){return"number"!=typeof e?-1:e}},adBreakType:{type:"string",defaultValue:null,setterTransformer:function(e){return e===i.AdBreakType.MID||e===i.AdBreakType.POST||e===i.AdBreakType.PRE?e:null}},adServerName:{type:"string",defaultValue:null,validator:o.Validator.notEmpty}}},{"../../enum/AdBreakType":95,"../vo/Validator":160}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ad_item_config=void 0;var i=e("../vo/Validator");r.ad_item_config={adDuration:{type:"number",defaultValue:-1,setterTransformer:function(e){return i.Validator.validNumber(e,-1)}},adTitle:{type:"string",defaultValue:null},adId:{type:"string",defaultValue:null},adPosition:{type:"number",defaultValue:-1,setterTransformer:function(e){return i.Validator.validNumber(e,-1)}},adAssetUrl:{type:"string",defaultValue:null},isVpaid:{type:"boolean",defaultValue:!1,setterTransformer:function(e){return"boolean"==typeof e&&e}},wrapperAdId:{type:"string",defaultValue:null},creativeId:{type:"string",defaultValue:null},wrapperCreativeId:{type:"string",defaultValue:null},vastMediaWidth:{type:"number",defaultValue:null},vastMediaHeight:{type:"number",defaultValue:null},vastMediaBitrate:{type:"number",defaultValue:null}}},{"../vo/Validator":160}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.build_info_config=void 0,r.build_info_config={env:{type:"string",defaultValue:null},playerName:{type:"string",defaultValue:null},playerVersion:{type:"string",defaultValue:null},buildTime:{type:"string",defaultValue:null}}},{}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.content_playback_state_config=void 0;var i=e("../../enum/StreamType"),o=e("../vo/Validator");r.content_playback_state_config={manifestQualities:{type:"object",defaultValue:null},qualityInfo:{type:"object",defaultValue:null},audioTracks:{type:"object",defaultValue:null},textTracks:{type:"object",defaultValue:null},streamType:{type:"string",defaultValue:i.StreamType.VOD},liveStreamInfo:{type:"object",defaultValue:null},bufferLength:{type:"number",defaultValue:0},cdn:{type:"string",defaultValue:null,validator:o.Validator.notEmpty},drmType:{type:"string",defaultValue:null,validator:o.Validator.notEmpty},contentSegment:{type:"number",defaultValue:NaN},maxBandwidth:{type:"number",defaultValue:NaN},time:{type:"number",defaultValue:NaN},state:{type:"number",defaultValue:NaN},duration:{type:"number",defaultValue:NaN},bitrate:{type:"number",defaultValue:NaN},started:{type:"boolean",defaultValue:!1},averageDroppedFps:{type:"number",defaultValue:NaN},framerate:{type:"number",defaultValue:NaN}}},{"../../enum/StreamType":126,"../vo/Validator":160}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.config=void 0;var i=e("./ad_break_info_config"),o=e("./ad_item_config"),a=e("./build_info_config"),n=e("./content_playback_state_config"),s=e("./player_dom_config"),c=e("./player_options_config"),l=e("./presentation_state_config"),u={build_info_config:a.build_info_config,ad_break_info_config:i.ad_break_info_config,ad_item_config:o.ad_item_config,content_playback_state_config:n.content_playback_state_config,player_dom_config:s.player_dom_config,player_options_config:c.player_options_config,presentation_state_config:l.presentation_state_config};r.config=u},{"./ad_break_info_config":141,"./ad_item_config":142,"./build_info_config":143,"./content_playback_state_config":144,"./player_dom_config":146,"./player_options_config":147,"./presentation_state_config":148}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.player_dom_config=void 0,r.player_dom_config={main:{type:"object",defaultValue:null},video:{type:"object",defaultValue:null},videoContainer:{type:"object",defaultValue:null},ccContainer:{type:"object",defaultValue:null},adContainer:{type:"object",defaultValue:null},panelContainer:{type:"object",defaultValue:null},adClickEl:{type:"object",defaultValue:null}}},{}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.player_options_config=void 0;var i=e("../../enum/Autoplay"),o=e("../../enum/LogLevel"),a=e("../../enum/PerformanceMode");r.player_options_config={container:{type:["object","string"],defaultValue:null},dataTransformers:{type:"object",defaultValue:null},plugins:{type:"object",defaultValue:null},autoplay:{type:"string",defaultValue:i.Autoplay.NONE},offsetTextOnControlsVisible:{type:"boolean",defaultValue:!1},id:{type:"string",defaultValue:null},networkErrorRecovery:{type:"object",defaultValue:null},performanceMode:{type:"string",defaultValue:a.PerformanceMode.AUTO},renderTextTrackNatively:{type:"boolean",defaultValue:!0},nativePlugins:{type:"object",defaultValue:null},playsInline:{type:"boolean",defaultValue:!1},uiConfig:{type:"object",defaultValue:null},useNativeControls:{type:"boolean",defaultValue:!1},overrides:{type:"object",defaultValue:{}},logLevel:{type:"string",defaultValue:o.LogLevel.OFF},language:{type:"string",defaultValue:null}}},{"../../enum/Autoplay":97,"../../enum/LogLevel":107,"../../enum/PerformanceMode":117}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.presentation_state_config=void 0;var i=e("../vo/Transformer"),o=e("../vo/Validator");r.presentation_state_config={skipAutoplayCheck:{type:"boolean",defaultValue:!1},streamTime:{type:"number",defaultValue:NaN,setterTransformer:function(e){return o.Validator.isPositiveNumber(e)?e:NaN}},streamDuration:{type:"number",defaultValue:NaN,setterTransformer:function(e){return o.Validator.isPositiveNumber(e)?e:NaN}},autoplaySupport:{type:"object",defaultValue:null},isAutoplay:{type:"boolean",defaultValue:!1},isCurrentVideoAd:{type:"boolean",defaultValue:!1},isFullscreen:{type:"boolean",defaultValue:!1},isMuted:{type:"boolean",defaultValue:!1},isMuteAtPlayStart:{type:"boolean",defaultValue:!1},started:{type:"boolean",defaultValue:!1},userHasUnmuted:{type:"boolean",defaultValue:!1},volume:{type:"number",defaultValue:.35,setterTransformer:function(e){return i.Transformer.clampValue(e,0,1)}},usesSsai:{type:"boolean",defaultValue:!1},streamId:{type:"string",defaultValue:null},suspended:{type:"boolean",defaultValue:!1}}},{"../vo/Transformer":159,"../vo/Validator":160}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdBreakInfo=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"AdBreakInfo"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"adBreakDuration",{get:function(){return this.model.adBreakDuration},set:function(e){this.model.adBreakDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adBreakPosition",{get:function(){return this.model.adBreakPosition},set:function(e){this.model.adBreakPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adBreakType",{get:function(){return this.model.adBreakType},set:function(e){this.model.adBreakType=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adServerName",{get:function(){return this.model.adServerName},set:function(e){this.model.adServerName=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adTotal",{get:function(){return this.model.adTotal},set:function(e){this.model.adTotal=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.AdBreakInfo=o},{"./ConfigurablePropertyContainer":152}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AdItem=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"AdItem"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"adDuration",{get:function(){return this.model.adDuration},set:function(e){this.model.adDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adTitle",{get:function(){return this.model.adTitle},set:function(e){this.model.adTitle=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adId",{get:function(){return this.model.adId},set:function(e){this.model.adId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adPosition",{get:function(){return this.model.adPosition},set:function(e){this.model.adPosition=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adAssetUrl",{get:function(){return this.model.adAssetUrl},set:function(e){this.model.adAssetUrl=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isVpaid",{get:function(){return this.model.isVpaid},set:function(e){this.model.isVpaid=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wrapperAdId",{get:function(){return this.model.wrapperAdId},set:function(e){this.model.wrapperAdId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"creativeId",{get:function(){return this.model.creativeId},set:function(e){this.model.creativeId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"wrapperCreativeId",{get:function(){return this.model.wrapperCreativeId},set:function(e){this.model.wrapperCreativeId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vastMediaWidth",{get:function(){return this.model.vastMediaWidth},set:function(e){this.model.vastMediaWidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vastMediaHeight",{get:function(){return this.model.vastMediaHeight},set:function(e){this.model.vastMediaHeight=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"vastMediaBitrate",{get:function(){return this.model.vastMediaBitrate},set:function(e){this.model.vastMediaBitrate=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.AdItem=o},{"./ConfigurablePropertyContainer":152}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BuildInfo=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"BuildInfo"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"buildTime",{get:function(){return this.model.buildTime},set:function(e){this.model.buildTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"env",{get:function(){return this.model.env},set:function(e){this.model.env=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playerName",{get:function(){return this.model.playerName},set:function(e){this.model.playerName=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playerVersion",{get:function(){return this.model.playerVersion},set:function(e){this.model.playerVersion=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.BuildInfo=o},{"./ConfigurablePropertyContainer":152}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConfigurablePropertyContainer=void 0;var i=e("../../core/Util"),o=e("./Generator"),a=(Object.defineProperty(n.prototype,"data",{get:function(){return i.Util.assign({},this.pData)},enumerable:!1,configurable:!0}),n.prototype.reset=function(){for(var e in this.defaultValues)this.pData[e]=this.defaultValues[e]},n);function n(e){this.pData={},this.defaultValues={},o.Generator.generateModel(this,e,this.pData,this.defaultValues)}r.ConfigurablePropertyContainer=a},{"../../core/Util":88,"./Generator":154}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContentPlaybackState=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"ContentPlaybackState"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"manifestQualities",{get:function(){return this.model.manifestQualities},set:function(e){this.model.manifestQualities=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"qualityInfo",{get:function(){return this.model.qualityInfo},set:function(e){this.model.qualityInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"audioTracks",{get:function(){return this.model.audioTracks},set:function(e){this.model.audioTracks=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"textTracks",{get:function(){return this.model.textTracks},set:function(e){this.model.textTracks=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"streamType",{get:function(){return this.model.streamType},set:function(e){this.model.streamType=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"liveStreamInfo",{get:function(){return this.model.liveStreamInfo},set:function(e){this.model.liveStreamInfo=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bufferLength",{get:function(){return this.model.bufferLength},set:function(e){this.model.bufferLength=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"cdn",{get:function(){return this.model.cdn},set:function(e){this.model.cdn=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"drmType",{get:function(){return this.model.drmType},set:function(e){this.model.drmType=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"contentSegment",{get:function(){return this.model.contentSegment},set:function(e){this.model.contentSegment=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"maxBandwidth",{get:function(){return this.model.maxBandwidth},set:function(e){this.model.maxBandwidth=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"time",{get:function(){return this.model.time},set:function(e){this.model.time=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"state",{get:function(){return this.model.state},set:function(e){this.model.state=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){return this.model.duration},set:function(e){this.model.duration=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"bitrate",{get:function(){return this.model.bitrate},set:function(e){this.model.bitrate=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"started",{get:function(){return this.model.started},set:function(e){this.model.started=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"averageDroppedFps",{get:function(){return this.model.averageDroppedFps},set:function(e){this.model.averageDroppedFps=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"framerate",{get:function(){return this.model.framerate},set:function(e){this.model.framerate=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.ContentPlaybackState=o},{"./ConfigurablePropertyContainer":152}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Generator=void 0;var d=e("./Validator"),i=(o.generateModel=function(e,t,r,i){for(var o in t)this.createProperty(o,t[o],e,r,i)},o.createProperty=function(i,e,t,o,r){var a=e.validator,n=e.type,s=e.defaultValue,c=!1!==e.enumerable,l=this.getTransformer(e,"setter",t),u=this.getTransformer(e,"getter",t);!1===e.writable?Object.defineProperty(t,i,{enumerable:c,value:s,writable:!1}):Object.defineProperty(t,i,{enumerable:c,set:function(e){var t=console&&console.warn,r=l(e);!a||a(r)?d.Validator.checkType(r,n,null===s)?o[i]=r:t&&console.warn("Invalid type supplied for property "+i):t&&console.warn("Invalid value '"+r+"' for property "+i)},get:function(){return u(o[i])}}),o[i]=s,r[i]=s},o.getTransformer=function(e,t,r){var i=e[t+"Transformer"];return i&&"function"==typeof i?i.bind(r):this.blankTransformer},o.blankTransformer=function(e){return e},o);function o(){}r.Generator=i},{"./Validator":160}],155:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ModelCollection=void 0;var a=e("../cfg"),n=e("./AdBreakInfo"),s=e("./AdItem"),c=e("./BuildInfo"),l=e("./ContentPlaybackState"),u=e("./PlayerDom"),d=e("./PlayerOptions"),p=e("./PresentationState"),i=(o.prototype.destroy=function(){for(var e in this.mdlCollection)delete this.mdlCollection[e];this.mdlCollection=null},o.prototype.getModel=function(e){return this.mdlCollection[e]},o.prototype.getSnapshot=function(){var e={};for(var t in this.mdlCollection)"PlayerDom"!=t&&"PlayerOptions"!=t&&"BuildInfo"!=t&&(e[t]=this.mdlCollection[t].data);return e},Object.defineProperty(o.prototype,"AdBreakInfo",{get:function(){return this.mdlCollection.AdBreakInfo},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"AdItem",{get:function(){return this.mdlCollection.AdItem},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"BuildInfo",{get:function(){return this.mdlCollection.BuildInfo},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ContentPlaybackState",{get:function(){return this.mdlCollection.ContentPlaybackState},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"PlayerDom",{get:function(){return this.mdlCollection.PlayerDom},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"PlayerOptions",{get:function(){return this.mdlCollection.PlayerOptions},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"PresentationState",{get:function(){return this.mdlCollection.PresentationState},enumerable:!1,configurable:!0}),o.prototype.createModels=function(){for(var e=[n.AdBreakInfo,s.AdItem,c.BuildInfo,l.ContentPlaybackState,u.PlayerDom,d.PlayerOptions,p.PresentationState],t=e.length;t--;){var r=e[t],i=r.modelName,o=a.config[this.classToCfgName(i)];this.mdlCollection[i]=new r(o)}},o.prototype.classToCfgName=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")+"_config"},o);function o(){this.mdlCollection={},this.createModels()}r.ModelCollection=i},{"../cfg":145,"./AdBreakInfo":149,"./AdItem":150,"./BuildInfo":151,"./ContentPlaybackState":153,"./PlayerDom":156,"./PlayerOptions":157,"./PresentationState":158}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerDom=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"PlayerDom"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"main",{get:function(){return this.model.main},set:function(e){this.model.main=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"video",{get:function(){return this.model.video},set:function(e){this.model.video=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"videoContainer",{get:function(){return this.model.videoContainer},set:function(e){this.model.videoContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ccContainer",{get:function(){return this.model.ccContainer},set:function(e){this.model.ccContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adContainer",{get:function(){return this.model.adContainer},set:function(e){this.model.adContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"panelContainer",{get:function(){return this.model.panelContainer},set:function(e){this.model.panelContainer=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"adClickEl",{get:function(){return this.model.adClickEl},set:function(e){this.model.adClickEl=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.PlayerDom=o},{"./ConfigurablePropertyContainer":152}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayerOptions=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"PlayerOptions"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"container",{get:function(){return this.model.container},set:function(e){this.model.container=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataTransformers",{get:function(){return this.model.dataTransformers},set:function(e){this.model.dataTransformers=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"plugins",{get:function(){return this.model.plugins},set:function(e){this.model.plugins=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"autoplay",{get:function(){return this.model.autoplay},set:function(e){this.model.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"offsetTextOnControlsVisible",{get:function(){return this.model.offsetTextOnControlsVisible},set:function(e){this.model.offsetTextOnControlsVisible=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"id",{get:function(){return this.model.id},set:function(e){this.model.id=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isEmbedded",{get:function(){return this.model.isEmbedded},set:function(e){this.model.isEmbedded=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"networkErrorRecovery",{get:function(){return this.model.networkErrorRecovery},set:function(e){this.model.networkErrorRecovery=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"performanceMode",{get:function(){return this.model.performanceMode},set:function(e){this.model.performanceMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"nativePlugins",{get:function(){return this.model.nativePlugins},set:function(e){this.model.nativePlugins=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"renderTextTrackNatively",{get:function(){return this.model.renderTextTrackNatively},set:function(e){this.model.renderTextTrackNatively=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"playsInline",{get:function(){return this.model.playsInline},set:function(e){this.model.playsInline=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"uiConfig",{get:function(){return this.model.uiConfig},set:function(e){this.model.uiConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"useNativeControls",{get:function(){return this.model.useNativeControls},set:function(e){this.model.useNativeControls=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"overrides",{get:function(){return this.model.overrides},set:function(e){this.model.overrides=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"logLevel",{get:function(){return this.model.logLevel},set:function(e){this.model.logLevel=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.PlayerOptions=o},{"./ConfigurablePropertyContainer":152}],158:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PresentationState=void 0;var i=e("./ConfigurablePropertyContainer"),o=(Object.defineProperty(a,"modelName",{get:function(){return"PresentationState"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"data",{get:function(){return this.model.data},enumerable:!1,configurable:!0}),a.prototype.reset=function(){this.model.reset()},Object.defineProperty(a.prototype,"skipAutoplayCheck",{get:function(){return this.model.skipAutoplayCheck},set:function(e){this.model.skipAutoplayCheck=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"streamTime",{get:function(){return this.model.streamTime},set:function(e){this.model.streamTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"streamDuration",{get:function(){return this.model.streamDuration},set:function(e){this.model.streamDuration=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"autoplaySupport",{get:function(){return this.model.autoplaySupport},set:function(e){this.model.autoplaySupport=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isAutoplay",{get:function(){return this.model.isAutoplay},set:function(e){this.model.isAutoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isCurrentVideoAd",{get:function(){return this.model.isCurrentVideoAd},set:function(e){this.model.isCurrentVideoAd=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isFullscreen",{get:function(){return this.model.isFullscreen},set:function(e){this.model.isFullscreen=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isMuted",{get:function(){return this.model.isMuted},set:function(e){this.model.isMuted=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isMuteAtPlayStart",{get:function(){return this.model.isMuteAtPlayStart},set:function(e){this.model.isMuteAtPlayStart=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"started",{get:function(){return this.model.started},set:function(e){this.model.started=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"userHasUnmuted",{get:function(){return this.model.userHasUnmuted},set:function(e){this.model.userHasUnmuted=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"volume",{get:function(){return this.model.volume},set:function(e){this.model.volume=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"usesSsai",{get:function(){return this.model.usesSsai},set:function(e){this.model.usesSsai=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"streamId",{get:function(){return this.model.streamId},set:function(e){this.model.streamId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"suspended",{get:function(){return this.model.suspended},set:function(e){this.model.suspended=e},enumerable:!1,configurable:!0}),a);function a(e){this.model=new i.ConfigurablePropertyContainer(e)}r.PresentationState=o},{"./ConfigurablePropertyContainer":152}],159:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Transformer=void 0;var i=(o.clampValue=function(e,t,r){return"number"!=typeof e?null:Math.max(t,Math.min(e,r))},o.lowerCase=function(e){return"string"==typeof e?e.toLowerCase():e},o.strToNum=function(e){if("number"==typeof e)return e;if("string"!=typeof e)return e;var t=parseFloat(e);return isNaN(t)?e:t},o);function o(){}r.Transformer=i},{}],160:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Validator=void 0;var i=(o.checkType=function(t,e,r){return"string"==typeof e&&(e=[e]),!(!r||null!==t)||e.some(function(e){return typeof t===e})},o.notEmpty=function(e){return!(null==e||Array.isArray(e)&&0===e.length||"object"==typeof e&&e.constructor===Object&&0===Object.keys(e).length||"string"==typeof e&&""===e)},o.isArray=function(e){return Array.isArray(e)},o.validNumber=function(e,t){return"number"!=typeof e?t:e},o.isTypedArray=function(e,t){if(this.isArray(e)&&this.notEmpty(e)){for(var r=e.length;r--;)if(typeof e[r]!==t)return!1;return!0}return!1},o.isType=function(e,t){return e instanceof t},o.isPositiveNumber=function(e){return"number"==typeof e&&0<=e},o);function o(){}r.Validator=i},{}],161:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMacroCommand=void 0;var i,o=e("./Notifier"),a=(i=o.Notifier,_(n,i),n.prototype.addSubCommand=function(e){this.subCommands.push(e)},n.prototype.execute=function(e){for(var t;0<this.subCommands.length;)(t=new(this.subCommands.shift())).initializeNotifier(this.multiCoreKey),t.execute(e)},n);function n(){var e=i.call(this)||this;return e.subCommands=null,e.subCommands=[],e.initializeMacroCommand(),e}r.AbstractMacroCommand=a},{"./Notifier":169}],162:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractMediator=void 0;var i,o=e("../enum/ProxyName"),a=e("../enum/ServiceName"),n=e("./Notifier"),s=(i=n.Notifier,_(c,i),Object.defineProperty(c.prototype,"name",{get:function(){return this.mediatorName},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"viewControl",{get:function(){return this.pViewControl},set:function(e){this.pViewControl=e},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"systemService",{get:function(){return this.facade.retrieveService(a.ServiceName.System)},enumerable:!1,configurable:!0}),c.prototype.getService=function(e){return this.facade?this.facade.retrieveService(e):null},c.prototype.getModel=function(e){return this.getModelCollection().getModel(e)},c.prototype.getProxy=function(e){return this.facade?this.facade.retrieveProxy(e):null},c.prototype.getModelCollection=function(){return this.facade?this.facade.retrieveProxy(o.ProxyName.ModelCollectionProxy):null},c.prototype.listNotificationInterests=function(){return[]},c.prototype.onRegister=function(){},c.prototype.onRemove=function(){this.pViewControl=null,i.prototype.onRemove.call(this)},c);function c(e,t){var r=i.call(this)||this;return r.pViewControl=null,r.mediatorName=e,t&&(r.viewControl=t),r}r.AbstractMediator=s},{"../enum/ProxyName":123,"../enum/ServiceName":125,"./Notifier":169}],163:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractSimpleCommand=void 0;var i,o=e("../enum/ProxyName"),a=e("./Notifier"),n=(i=a.Notifier,_(s,i),s.prototype.getModel=function(e){return this.getModelCollection().getModel(e)},s.prototype.getProxy=function(e){return this.facade?this.facade.retrieveProxy(e):null},s.prototype.getService=function(e){return this.facade?this.facade.retrieveService(e):null},s.prototype.getModelCollection=function(){return this.facade?this.facade.retrieveProxy(o.ProxyName.ModelCollectionProxy):null},s);function s(){return i.call(this)||this}r.AbstractSimpleCommand=n},{"../enum/ProxyName":123,"./Notifier":169}],164:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Controller=void 0;var i=e("./MvcMessages"),o=e("./View"),a=e("./Observer"),n=e("../core/Logger"),s=(c.getInstance=function(e){return e?(this.controllerMap[e]||(this.controllerMap[e]=new c(e)),this.controllerMap[e]):null},c.removeController=function(e){this.controllerMap[e]&&this.controllerMap[e].destroy(),delete this.controllerMap[e]},c.prototype.destroy=function(){for(var e in this.commandMap)this.removeCommand(e);this.commandMap=null,this.view=null},c.prototype.initializeController=function(){this.view=o.View.getInstance(this.multiCoreKey)},c.prototype.executeCommand=function(e){var t,r=this.commandMap[e.name];r&&((t=new r).initializeNotifier(this.multiCoreKey),t.execute(e))},c.prototype.registerCommand=function(e,t){this.commandMap[e]||this.view.registerObserver(e,new a.Observer(this.executeCommand,this)),this.commandMap[e]=t},c.prototype.hasCommand=function(e){return!!this.commandMap[e]},c.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},c.controllerMap={},c);function c(e){c.controllerMap[e]?n.Logger.error(i.MvcMessages.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Controller")):(this.multiCoreKey=e,(c.controllerMap[this.multiCoreKey]=this).commandMap={},this.view=null,this.initializeController())}r.Controller=s},{"../core/Logger":86,"./MvcMessages":167,"./Observer":170,"./View":172}],165:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Facade=void 0;var i=e("../enum/ServiceName"),o=e("../service/ServiceContainer"),a=e("./Controller"),n=e("./Model"),s=e("./MvcMessages"),c=e("./Notification"),l=e("./View"),u=e("../core/Logger"),d=(p.removeCore=function(e){this.facadeMap[e]&&(n.Model.removeModel(e),l.View.removeView(e),a.Controller.removeController(e),o.ServiceContainer.removeServiceContainer(e),this.facadeMap[e].destroy(),delete this.facadeMap[e])},p.hasCore=function(e){return null!=p.facadeMap[e]},p.getInstance=function(e){return e?this.facadeMap[e]:(u.Logger.error(s.MvcMessages.ERROR_NO_KEY),null)},p.createFacade=function(e,t){return e?(this.facadeMap[e]?u.Logger.warn('Not creating facade - key "'+e+'" already exists!'):this.facadeMap[e]=new p(e,t),this.facadeMap[e]):(u.Logger.error(s.MvcMessages.ERROR_NO_KEY),null)},p.prototype.destroy=function(){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null},Object.defineProperty(p.prototype,"key",{get:function(){return this.multiCoreKey},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"appId",{get:function(){return this.multiCoreKey},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"logger",{get:function(){return this.retrieveService(i.ServiceName.Logging).logger},enumerable:!1,configurable:!0}),p.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},p.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},p.prototype.removeCommand=function(e){this.controller.removeCommand(e)},p.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},p.prototype.registerProxy=function(e){this.model.registerProxy(e)},p.prototype.retrieveProxy=function(e){return this.model?this.model.retrieveProxy(e):null},p.prototype.removeProxy=function(e){this.model&&this.model.removeProxy(e)},p.prototype.hasProxy=function(e){return this.model.hasProxy(e)},p.prototype.registerMediator=function(e){this.view.registerMediator(e)},p.prototype.retrieveMediator=function(e){return this.view?this.view.retrieveMediator(e):null},p.prototype.removeMediator=function(e){this.view&&this.view.removeMediator(e)},p.prototype.hasMediator=function(e){return this.view.hasMediator(e)},p.prototype.registerService=function(e){this.serviceContainer.registerService(e)},p.prototype.retrieveService=function(e){return this.serviceContainer?this.serviceContainer.retrieveService(e):null},p.prototype.removeService=function(e){this.model&&this.serviceContainer.removeService(e)},p.prototype.hasService=function(e){return this.serviceContainer.hasService(e)},p.prototype.registerGlobalServices=function(e){for(var t in e)this.registerService(e[t])},p.prototype.sendNotification=function(e,t,r){var i="string"==typeof t?new c.Notification(e,{},t):new c.Notification(e,t,r);this.notifyObservers(i)},p.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},p.prototype.registerCommands=function(e){if(e)for(var t in e)e[t]&&this.registerCommand(t,e[t])},p.prototype.initializeServiceContainer=function(){this.serviceContainer=o.ServiceContainer.getInstance(this.multiCoreKey)},p.prototype.initializeController=function(){this.controller=a.Controller.getInstance(this.multiCoreKey)},p.prototype.initializeModel=function(){this.model=n.Model.getInstance(this.multiCoreKey)},p.prototype.initializeView=function(){this.view=l.View.getInstance(this.multiCoreKey)},p.prototype.initializeFacade=function(){this.initialized?u.Logger.error("Unexpected Condition: Facade already initialized"):(this.initializeModel(),this.initializeController(),this.initializeView(),this.initializeServiceContainer(),this.initialized=!0)},p.facadeMap={},p);function p(e,t){this.model=null,this.view=null,this.controller=null,this.serviceContainer=null,this.initialized=!1,this.multiCoreKey=e,this.initializeFacade(),this.registerCommands(t)}r.Facade=d},{"../core/Logger":86,"../enum/ServiceName":125,"../service/ServiceContainer":213,"./Controller":164,"./Model":166,"./MvcMessages":167,"./Notification":168,"./View":172}],166:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Model=void 0;var i=e("./MvcMessages"),o=e("../core/Logger"),a=(n.getInstance=function(e){return e?(null==this.modelMap[e]&&(this.modelMap[e]=new n(e)),this.modelMap[e]):null},n.removeModel=function(e){this.modelMap[e]&&this.modelMap[e].destroy(),delete this.modelMap[e]},n.prototype.destroy=function(){for(var e in this.proxyMap)this.removeProxy(e);this.proxyMap=null},n.prototype.initializeModel=function(){},n.prototype.registerProxy=function(e){(this.proxyMap[e.name]=e).initializeNotifier(this.multiCoreKey),e.onRegister()},n.prototype.retrieveProxy=function(e){return this.proxyMap[e]||null},n.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},n.prototype.removeProxy=function(e){var t=this.proxyMap[e];t&&(t.onRemove(),this.proxyMap[e]=null)},n.modelMap={},n);function n(e){this.proxyMap=null,n.modelMap[e]?o.Logger.error(i.MvcMessages.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","Model")):(this.multiCoreKey=e,(n.modelMap[e]=this).proxyMap={},this.initializeModel())}r.Model=a},{"../core/Logger":86,"./MvcMessages":167}],167:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MvcMessages=void 0;function i(){}r.MvcMessages=i},{}],168:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Notification=void 0;var i=(Object.defineProperty(o.prototype,"name",{get:function(){return this.pName||null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"body",{get:function(){return this.pBody||null},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this.pType||null},enumerable:!1,configurable:!0}),o.prototype.toString=function(){var e="\nBody: "+(null==this.pBody?"null":JSON.stringify(this.body)),t="\nType: "+(null==this.pType?"null":this.type);return"Notification Name: "+this.name+e+t},o);function o(e,t,r){this.pName=e,this.pBody=t,this.pType=r}r.Notification=i},{}],169:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Notifier=void 0;var i=e("./Facade"),o=(a.prototype.destroy=function(){},a.prototype.onRemove=function(){this.multiCoreKey=null},Object.defineProperty(a.prototype,"facade",{get:function(){return i.Facade.getInstance(this.multiCoreKey)},enumerable:!1,configurable:!0}),a.prototype.sendNotification=function(e,t,r){var i=this.facade;i&&i.sendNotification(e,t,r)},a.prototype.initializeNotifier=function(e){this.multiCoreKey=e},a);function a(){this.multiCoreKey=null}r.Notifier=o},{"./Facade":165}],170:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Observer=void 0;var i=(o.prototype.destroy=function(){this.context=null,this.notify=null},o.prototype.setNotifyMethod=function(e){this.notify=e},o.prototype.setNotifyContext=function(e){this.context=e},o.prototype.getNotifyMethod=function(){return this.notify},o.prototype.getNotifyContext=function(){return this.context},o.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},o.prototype.compareNotifyContext=function(e){return e===this.context},o);function o(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}r.Observer=i},{}],171:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Proxy=void 0;var i,o=e("./Notifier"),a=(i=o.Notifier,_(n,i),Object.defineProperty(n.prototype,"name",{get:function(){return this.proxyName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this.pData},enumerable:!1,configurable:!0}),n.prototype.onRegister=function(){},n.prototype.onRemove=function(){this.pData=null,i.prototype.onRemove.call(this)},n);function n(e,t){var r=i.call(this)||this;return r.proxyName=null,r.pData=null,r.proxyName=e,r.pData=t||{},r}r.Proxy=a},{"./Notifier":169}],172:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.View=void 0;var i=e("./MvcMessages"),n=e("./Observer"),o=e("../core/Logger"),a=(s.getInstance=function(e){return e?(this.viewMap[e]||(this.viewMap[e]=new s(e)),this.viewMap[e]):null},s.removeView=function(e){this.viewMap[e]&&this.viewMap[e].destroy(),delete this.viewMap[e]},s.prototype.destroy=function(){for(var e in this.mediatorMap)this.removeMediator(this.mediatorMap[e].name);this.mediatorMap=null,this.observerMap=null},s.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},s.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.name]){for(var t=this.observerMap[e.name],r=[],i=void 0,o=0,a=t.length;o<a;o++)i=t[o],r.push(i);for(o=0,a=r.length;o<a;o++)(i=r[o]).notifyObserver(e)}},s.prototype.removeObserver=function(e,t){if(this.observerMap){for(var r=this.observerMap[e],i=r.length;i--;)if(!0===r[i].compareNotifyContext(t)){r.splice(i,1);break}0==r.length&&delete this.observerMap[e]}},s.prototype.registerMediator=function(e){var t,r,i,o,a=e.name;if(!this.mediatorMap[a]){if(e.initializeNotifier(this.multiCoreKey),0<(t=(this.mediatorMap[a]=e).listNotificationInterests()).length)for(o=new n.Observer(e.handleNotification,e),r=0,i=t.length;r<i;r++)this.registerObserver(t[r],o);e.onRegister()}},s.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},s.prototype.removeMediator=function(e){var t,r,i=this.mediatorMap[e];if(i){for(r=(t=i.listNotificationInterests()).length;r--;)this.removeObserver(t[r],i);delete this.mediatorMap[e],i.onRemove()}},s.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},s.prototype.initializeView=function(){},s.viewMap={},s);function s(e){null==s.viewMap[e]?(this.multiCoreKey=e,this.mediatorMap={},this.observerMap={},(s.viewMap[this.multiCoreKey]=this).initializeView()):o.Logger.error(i.MvcMessages.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","View"))}r.View=a},{"../core/Logger":86,"./MvcMessages":167,"./Observer":170}],173:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BaseHtml5Adapter=void 0;var i,o=e("../../core/Util"),a=e("./BasePlaybackAdapter"),n=(i=a.BasePlaybackAdapter,_(s,i),s.prototype.seek=function(e){var t;this.pIsLiveStream&&(t=this.liveStreamInfoVO,e=o.Util.mapToRange(e,0,t.relativeDuration,t.safeSeekingTime,t.safeSeekingDuration)),i.prototype.seek.call(this,e)},Object.defineProperty(s.prototype,"time",{get:function(){return this.pIsLiveStream?this.liveStreamInfoVO.relativeTime:this.videoSurface.time},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"duration",{get:function(){return this.pIsLiveStream?this.liveStreamInfoVO.relativeDuration:this.videoSurface.duration},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"seekable",{get:function(){var e={start:0,end:0},t=this.videoSurface.video.seekable,r=t.length-1;return 0<=r&&(e.start=t.start(r),e.end=t.end(r)),e},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"segmentDuration",{get:function(){return 6},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"liveStreamInfo",{get:function(){var e=this.liveStreamInfoVO,t=this.videoSurface.video,r=this.seekable,i=r.start,o=r.end,a=t.currentTime,n=o-i,s=this.segmentDuration,c=this.playback.liveEdgeSyncFragmentCount;e.relativeTime=Math.max(a-i,0),e.relativeDuration=n,e.absoluteDuration=Date.now(),e.dvrWindowSize=Math.floor(n),e.liveEdgeOffset=s*c+s,e.safeSeekingTime=Math.ceil(i),e.safeSeekingDuration=Math.floor(o),e.isPlayingLive=Math.ceil(a+e.liveEdgeOffset)>=e.safeSeekingDuration,o!=this.lastKnownTimes.end&&(this.lastKnownTimes.end=o,this.lastKnownTimes.absolute=Math.round(e.absoluteDuration-1e3*e.relativeTime),this.lastKnownTimes.relative=a);var l=Math.round(1e3*(a-this.lastKnownTimes.relative));return e.absoluteTime=this.lastKnownTimes.absolute+l,e},enumerable:!1,configurable:!0}),s);function s(){var e=null!==i&&i.apply(this,arguments)||this;return e.lastKnownTimes={absolute:NaN,relative:NaN,end:NaN},e}r.BaseHtml5Adapter=n},{"../../core/Util":88,"./BasePlaybackAdapter":174}],174:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BasePlaybackAdapter=void 0;var a,i=e("es6-promise"),o=e("../../core/Emitter"),n=e("../../core/Util"),s=e("../../enum/ErrorCode"),c=e("../../enum/LogLevel"),l=e("../../util/Utils"),u=e("../enum/PlaybackAdapterEvents"),d=e("../enum/TextTrackSurfaceEvents"),p=e("../enum/VideoSurfaceEvents"),m=(a=o.Emitter,_(f,a),f.prototype.initialize=function(){this.addEvents(this.videoSurface,p.VideoSurfaceEvents,this.videoSurfaceEventHandler),this.addEvents(this.videoSurface,d.TextTrackSurfaceEvents,this.videoSurfaceEventHandler)},f.prototype.destroy=function(){return this.removeEvents(this.videoSurface,p.VideoSurfaceEvents,this.videoSurfaceEventHandler),this.removeEvents(this.videoSurface,d.TextTrackSurfaceEvents,this.videoSurfaceEventHandler),this.videoSurface.destroy(),this.videoSurface=null,this.logger=null,this.config=null,this.playback=null,this.liveStreamInfoVO=null,this.lowLevelDvrDetails=null,this.normalizedAudioTracks=null,a.prototype.destroy.call(this),i.Promise.resolve()},f.prototype.play=function(){var e=this;this.load().then(function(){e.videoSurface.play()})},f.prototype.pause=function(){this.videoSurface.pause()},f.prototype.suspend=function(){},f.prototype.resume=function(){},f.prototype.seek=function(e){this.videoSurface.seek(e)},f.prototype.load=function(e){var t=this;if(!0===this.loaded)return i.Promise.resolve();if(this.pendingLoad)return this.pendingLoad;this.videoSurface.addEvents();var r=this.config.resource.location.textTrackUrl;return n.Util.isEmpty(r)||(this.videoSurface.textTrackSrc=r),e&&(this.mediaUrl=e),this.pendingLoad=this.loadMediaUrl().then(function(){t.loadComplete()}),this.pendingLoad},f.prototype.resize=function(){},Object.defineProperty(f.prototype,"audioTrack",{set:function(e){this.videoSurface.video.audioTracks[e.index].enabled=!0},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrackMode",{set:function(e){this.videoSurface.textTrackMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrack",{set:function(e){this.videoSurface.textTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"bufferLength",{get:function(){return this.videoSurface.bufferLength},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"time",{get:function(){return this.videoSurface.time},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){return this.videoSurface.duration},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"isLiveStream",{get:function(){return this.pIsLiveStream},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"droppedVideoFrames",{get:function(){return this.videoSurface.metrics.droppedVideoFrames},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"framerate",{get:function(){return this.videoSurface.framerate},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"buffering",{get:function(){return this.videoSurface.buffering},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"type",{get:function(){return this.pType},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"fragmentType",{get:function(){return""},enumerable:!1,configurable:!0}),f.prototype.loadMediaUrl=function(){var a=this,n=this.videoSurface;return new i.Promise(function(e,t){function r(t){return function(e){n.off(p.VideoSurfaceEvents.LOADED_METADATA,i),n.off(p.VideoSurfaceEvents.ERROR,o),t()}}var i=r(function(){a.loadedMetadata(),e()}),o=r(t);n.on(p.VideoSurfaceEvents.LOADED_METADATA,i),n.on(p.VideoSurfaceEvents.ERROR,o)})},f.prototype.getStreamMetadata=function(){return{manifest:{mimeType:n.Util.getMimeType(this.mediaUrl)},fragment:{mimeType:this.fragmentType}}},f.prototype.loadedMetadata=function(){var e=this.getStreamMetadata();this.emit(u.PlaybackAdapterEvents.LOADED_METADATA,e)},f.prototype.loadComplete=function(){this.pendingLoad=null,this.loaded=!0},f.prototype.checkAbrConstraints=function(e){var t;0<this.manifestQualities.length&&(t=this.getCurrentAbrConstraints(e),this.updateAbrConstraints(t.min,t.max,this.manifestQualities))},f.prototype.updateAbrConstraints=function(e,t,r){e===this.minAutoLevel&&t===this.maxAutoLevel||(this.minAutoLevel=e,this.maxAutoLevel=t,this.emit(u.PlaybackAdapterEvents.ABR_CONSTRAINTS_CHANGE,{minIndex:this.minAutoLevel,maxIndex:this.maxAutoLevel,manifestQualities:r}))},f.prototype.getCurrentAbrConstraints=function(e){return{min:e?l.Utils.getIndexForBitrate(this.manifestQualities,this.minBitrate,!0):0,max:e}},f.prototype.onVideoSurfaceEvent=function(e){if(e.type===p.VideoSurfaceEvents.ERROR||e.type===p.VideoSurfaceEvents.STALLED||e.type===p.VideoSurfaceEvents.ABORT)this.handleVideoSurfaceError(e);else if(e.type===p.VideoSurfaceEvents.TIME_UPDATE&&this.blockTimeUpdateEvent)return;this.emit(e.type,e.data)},f.prototype.handleVideoSurfaceError=function(e){var t=this.videoSurface.video.error;if(t)switch(t.code){case MediaError.MEDIA_ERR_ABORTED:this.throwError(s.ErrorCode.MEDIA_ABORTED,t,t)}},f.prototype.mapEvent=function(e,t){return{type:e,callback:t.bind(this)}},f.prototype.addEvents=function(e,t,r){var i=n.Util.isFunction(e.on);for(var o in t){var a=t[o];if(i)e.on(a.type||a,a.callback||r);else try{e.addEventListener(a.type||a,a.callback||r)}catch(e){}}},f.prototype.removeEvents=function(e,t,r){var i=n.Util.isFunction(e.on);for(var o in t){var a=t[o];if(i)e.off(a.type||a,a.callback||r);else try{e.removeEventListener(a.type||a,a.callback||r)}catch(e){}}},f.prototype.throwError=function(e,t,r,i){void 0===i&&(i=!0),this.log(c.LogLevel.ERROR,t),this.emit(u.PlaybackAdapterEvents.ERROR,{code:e,message:t,data:r,fatal:i})},f.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},f.prototype.getErrorMessage=function(e,t,r){return void 0===r&&(r="n/a"),e+" fatal: "+t+" retry: "+r},f.prototype.normalizeAudioTracks=function(e,r){return e.map(function(e,t){return{index:t,id:isNaN(e[r.id])?isNaN(e.id)?"":e.id.toString():e[r.id].toString(),type:e[r.type]||e.type||"",lang:e[r.lang]||e.lang||"",codec:e[r.codec]||e.codec||"",label:e[r.label]||e.label||""}}).filter(function(e){var t=e.codec;return""===t||-1!==t.indexOf("mp4a")})},f.prototype.normalizeQuality=function(e,t){return{index:t,bitrate:e.bitrate,height:e.height,width:e.width,codec:e.codec||e.codecs}},f);function f(e,t,r){var i=a.call(this)||this;i.enableLogger=!1,i.networkErrorRetryCount=0,i.mediaErrorRetryCount=0,i.minAutoLevel=NaN,i.maxAutoLevel=NaN,i.multiCdnHeaderPresent=!0,i.pIsLiveStream=!1,i.lowLevelDvrDetails=null,i.liveStreamInfoVO={isPlayingLive:!1,liveEdgeOffset:NaN,dvrWindowSize:NaN,safeSeekingDuration:NaN,safeSeekingTime:NaN,relativeTime:NaN,relativeDuration:NaN,absoluteTime:NaN,absoluteDuration:NaN},i.blockTimeUpdateEvent=!1,i.loaded=!1,i.videoSurfaceEventHandler=function(e){return i.onVideoSurfaceEvent(e)},i.videoSurface=e,i.config=t,i.playback=i.config.resource.playback,i.logger=r,i.mediaUrl=t.resource.location.mediaUrl;var o=i.config.playerOptions.overrides;return n.Util.isEmpty(o.enableLowLevelStreamingLogs)||(i.enableLogger=o.enableLowLevelStreamingLogs),i}r.BasePlaybackAdapter=m},{"../../core/Emitter":84,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../util/Utils":220,"../enum/PlaybackAdapterEvents":189,"../enum/TextTrackSurfaceEvents":195,"../enum/VideoSurfaceEvents":197,"es6-promise":25}],175:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DashjsAdapter=void 0;var o,i=e("../../app/AppResources"),n=e("../../core/Util"),a=e("../../enum/ErrorCode"),s=e("../../enum/LogLevel"),c=e("../../util/enum/DrmType"),l=e("../enum/DashEmsg"),u=e("../enum/DashjsRobustness"),d=e("../enum/Playback"),p=e("../enum/PlaybackAdapterEvents"),m=e("../enum/PlaybackAdapterType"),f=e("../enum/TextTrackSurfaceEvents"),y=e("../enum/VideoSurfaceEvents"),h=e("./BasePlaybackAdapter"),E=(o=h.BasePlaybackAdapter,_(A,o),A.prototype.initialize=function(){o.prototype.initialize.call(this);var e=this.config.resource.location;this.player=this.dashFactory.MediaPlayer().create(),this.logger.log(s.LogLevel.INFO,"Dashjs version: "+this.player.getVersion()),e.drm&&e.drm.enabled&&this.player.setProtectionData(this.getProtectionData(e.drm)),this.player.initialize(this.videoSurface.video,null,!1),this.configurePlayer(this.playback),this.addEvents(this.player,this.dashjsEventMap)},A.prototype.destroy=function(){return clearTimeout(this.periodSwitchTimeout),this.removeEvents(this.player,this.dashjsEventMap),this.player.reset(),this.player=null,this.dash=null,this.dashFactory=null,o.prototype.destroy.call(this)},A.prototype.configurePlayer=function(e){var t;this.player.setLimitBitrateByPortal(e.abr.capQualityToScreenSize),this.player.setLiveDelayFragmentCount(e.liveEdgeSyncFragmentCount),this.player.getDebug().setLogToBrowserConsole(this.enableLogger),this.player.setManifestLoaderRetryAttempts(u.DashjsRobustness.MANIFEST_RETRY_ATTEMPTS),this.player.setManifestLoaderRetryInterval(u.DashjsRobustness.MANIFEST_RETRY_INTERVAL),this.player.setFragmentLoaderRetryAttempts(u.DashjsRobustness.FRAGMENT_RETRY_ATTEMPTS),this.player.setFragmentLoaderRetryInterval(u.DashjsRobustness.FRAGMENT_RETRY_INTERVAL),this.player.enableForcedTextStreaming(!0),isNaN(e.abr.startBitrate)||this.player.setInitialBitrateFor(d.Playback.VIDEO,e.abr.startBitrate/1e3),isNaN(e.abr.minBitrate)||(this.minBitrate=e.abr.minBitrate),isNaN(e.abr.maxBitrate)||(this.maxBitrate=e.abr.maxBitrate),this.startTime=e.startTime;var r=this.config.performanceSettings;null!=r.forwardBufferLength&&this.player.setStableBufferTime(r.forwardBufferLength),null!=r.backBufferLength&&this.player.setBufferToKeep(r.backBufferLength),null!=r.topQualityForwardBufferLength&&(this.player.setBufferTimeAtTopQuality(r.topQualityForwardBufferLength),this.player.setBufferTimeAtTopQualityLongForm(r.topQualityForwardBufferLength));var i=null===(t=this.config.resource.overrides)||void 0===t?void 0:t.dashjs,o=!0,a=!0;n.Util.isEmpty(i)||(n.Util.isBoolean(i.fastSwitchEnabled)&&i.fastSwitchEnabled!==o&&(this.logger.log(s.LogLevel.INFO,"Overriding fastSwitchEnabled default value of "+o+" with "+i.fastSwitchEnabled),o=i.fastSwitchEnabled),n.Util.isBoolean(i.jumpGaps)&&i.jumpGaps!==a&&(this.logger.log(s.LogLevel.INFO,"Overriding jumpGaps default value of "+a+" with "+i.jumpGaps),a=i.jumpGaps)),this.player.setFastSwitchEnabled(o),this.player.setJumpGaps(a)},A.prototype.loadMediaUrl=function(){return this.blockTimeUpdateEvent=!0,this.player.attachSource(this.mediaUrl),o.prototype.loadMediaUrl.call(this)},A.prototype.seek=function(e){this.seekTime=e,this.blockTimeUpdateEvent=!0,this.player.seek(e)},A.prototype.play=function(){this.player.play()},A.prototype.suspend=function(){this.player.scheduleWhilePaused=!1},A.prototype.resume=function(){this.player.scheduleWhilePaused=!0},Object.defineProperty(A.prototype,"audioTrack",{set:function(t){var e=n.Util.find(this.audioTracks,function(e){return t.id==e.id});e&&this.player.setCurrentTrack(e)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"textTrack",{set:function(e){this.videoSurface.textTrack=e,this.player.setTextTrack(this.getTextTrackIndex(e))},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"time",{get:function(){return this.player.time()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"duration",{get:function(){return this.player.duration()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"currentIndex",{get:function(){return this.player.getQualityFor(d.Playback.VIDEO)},set:function(e){this.player.setQualityFor(d.Playback.VIDEO,e)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"autoQualitySwitching",{get:function(){return this.player.getAutoSwitchQualityFor(d.Playback.VIDEO)},set:function(e){this.player.setAutoSwitchQualityFor(d.Playback.VIDEO,e)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"minBitrate",{get:function(){return 1e3*this.player.getMinAllowedBitrateFor(d.Playback.VIDEO)},set:function(e){this.player.setMinAllowedBitrateFor(d.Playback.VIDEO,e/1e3-1)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"maxBitrate",{get:function(){return 1e3*this.player.getMaxAllowedBitrateFor(d.Playback.VIDEO)},set:function(e){this.player.setMaxAllowedBitrateFor(d.Playback.VIDEO,e/1e3)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"manifestQualities",{get:function(){return this.player.getBitrateInfoListFor(d.Playback.VIDEO).map(function(e,t){return{index:t,bitrate:e.bitrate,width:e.width,height:e.height,codec:null}})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"liveStreamInfo",{get:function(){var e,t=this.liveStreamInfoVO;return this.pIsLiveStream&&this.lowLevelDvrDetails&&0<=this.time&&(e=this.lowLevelDvrDetails,t.relativeTime=this.time,t.relativeDuration=this.duration,t.absoluteTime=Math.round(1e3*this.player.timeAsUTC()),t.absoluteDuration=Math.round(1e3*this.player.durationAsUTC()),t.dvrWindowSize=this.player.getDVRWindowSize(),t.liveEdgeOffset=Math.floor(this.player.getLiveDelay()+e.duration),t.safeSeekingTime=Math.max(t.relativeDuration-t.dvrWindowSize,0),t.safeSeekingDuration=Math.floor(t.relativeDuration-t.liveEdgeOffset),t.safeSeekingDuration<t.relativeTime&&(t.safeSeekingDuration=Math.floor(t.relativeTime)),t.isPlayingLive=Math.ceil(t.relativeTime)>=t.safeSeekingDuration),t},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"fragmentType",{get:function(){var e=this.player.getCurrentTrackFor("video");return e?e.mimeType:""},enumerable:!1,configurable:!0}),A.prototype.onStreamInitialized=function(e){this.networkErrorRetryCount=0,this.pIsLiveStream=this.player.isDynamic(),this.emit(p.PlaybackAdapterEvents.MANIFEST_PARSED,{profile:this.manifestQualities}),this.audioTracks=this.player.getTracksFor("audio"),this.updateAudioTracks(),0<this.startTime&&(this.blockTimeUpdateEvent=!0,this.videoSurface.once(y.VideoSurfaceEvents.LOADED_METADATA,this.seek.bind(this,this.startTime)),this.startTime=NaN)},A.prototype.onSeekComplete=function(e){var t=this.videoSurface.time,r=this.seekTime;if(0<r){var i=this.lowLevelDvrDetails&&this.lowLevelDvrDetails.duration||6;if(Math.abs(r-t)>i)return void this.seek(r);this.seekTime=NaN}0<t&&(this.blockTimeUpdateEvent=!1,this.emit(y.VideoSurfaceEvents.TIME_UPDATE))},A.prototype.onPeriodSwitchStarted=function(e){0<this.videoSurface.time&&(this.blockTimeUpdateEvent=!0);var t=this.config.textTrackSettings,r=t.mode;r==t.enabledMode&&(this.ccMode=r)},A.prototype.onEmsgDai=function(e){var t;(e||e.event)&&(t={id:l.DashEmsg.GOOGLE_DAI,info:e.event.messageData,data:e.event},this.logger.log(s.LogLevel.DEBUG,"DAI - Event ID: "+e.event.id+" Start time: "+e.event.presentationTime+" Impression ID: "+e.event.messageData),this.emit(f.TextTrackSurfaceEvents.METADATA_CUEPOINT,t))},A.prototype.onPeriodSwitchCompleted=function(e){var t,r=this;this.ccMode&&(t=this.getTextTrackIndex(this.videoSurface.textTrack),this.player.setTextTrack(-1),this.periodSwitchTimeout=setTimeout(function(){r.textTrackMode=r.ccMode,r.ccMode=null,r.player.setTextTrack(t)},1e3)),0<this.seekTime||1<e.toStreamInfo.index&&0==this.videoSurface.time||(this.blockTimeUpdateEvent=!1)},A.prototype.onKeySystemAccessComplete=function(e){e.data&&this.emit(p.PlaybackAdapterEvents.DRM_KEYSYSTEM_CREATED,{keysystem:e.data.mksa.keySystem})},A.prototype.updateAudioTracks=function(){var e=this.getCurrentAudioTrackInfo(this.player.getCurrentTrackFor("audio").id);this.normalizedAudioTracks=this.normalizeAudioTracks(this.audioTracks,{type:"roles",label:"lang"}),this.normalizedAudioTracks.forEach(function(e){Array.isArray(e.type)&&(e.type=e.type.join(","))}),e&&this.emit(p.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[e.index]})},A.prototype.onTrackChangeRendered=function(e){var t;e.mediaType===d.Playback.AUDIO&&(t=this.getCurrentAudioTrackInfo(this.player.getCurrentTrackFor("audio").id),this.emit(p.PlaybackAdapterEvents.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[t.index]}))},A.prototype.getCurrentAudioTrackInfo=function(e){for(var t={index:0,track:this.audioTracks[0]},r=this.audioTracks.length;r--;)if(this.audioTracks[r].id===e)return t={index:r,track:this.audioTracks[r]};return t},A.prototype.onQualityChangeRequested=function(e){e.mediaType===d.Playback.VIDEO&&this.emit(p.PlaybackAdapterEvents.ABR_QUALITY_SWITCHING,{index:e.newQuality})},A.prototype.onQualityChangeRendered=function(e){e.mediaType===d.Playback.VIDEO&&(this.checkAbrConstraints(this.player.getTopBitrateInfoFor(d.Playback.VIDEO).qualityIndex),this.emit(p.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:e.newQuality}))},A.prototype.onFragmentLoadComplete=function(e){var t,r,i;this.networkErrorRetryCount=0,e.request.mediaType===d.Playback.VIDEO&&(this.lowLevelDvrDetails=e.request,(t=this.player.getTopBitrateInfoFor(d.Playback.VIDEO))&&this.checkAbrConstraints(t.qualityIndex),!this.multiCdnHeaderPresent||(r=this.player.getMetricsFor(d.Playback.VIDEO).HttpList)&&0<r.length&&(i=this.getCdnResponseHeader(r[r.length-1]._responseHeaders),this.multiCdnHeaderPresent=!!i,this.multiCdnHeaderPresent&&this.emit(p.PlaybackAdapterEvents.MULTI_CDN,{cdn:i})),this.emit(p.PlaybackAdapterEvents.FRAGMENT_LOADED,{bandwidth:this.player.getAverageThroughput(d.Playback.VIDEO)}))},A.prototype.onError=function(e){if(e.error.code)switch(e.error.code){case this.dash.MediaPlayer.errors.DOWNLOAD_ERROR_ID_CONTENT_CODE:case this.dash.MediaPlayer.errors.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case this.dash.MediaPlayer.errors.DOWNLOAD_ERROR_ID_MANIFEST_CODE:this.handleNetworkErrors(e);break;case this.dash.MediaPlayer.errors.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:this.throwError(a.ErrorCode.DASHJS_PARSE_ERROR,i.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.error.message,e.error);break;case this.dash.MediaPlayer.errors.MEDIASOURCE_TYPE_UNSUPPORTED_CODE:this.throwError(a.ErrorCode.DASHJS_SRC_NOT_SUPPORTED,i.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.error.message,e.error);break;case this.dash.MediaPlayer.errors.MEDIA_KEYERR_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_UNKNOWN_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_CLIENT_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_SERVICE_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_OUTPUT_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_HARDWARECHANGE_CODE:case this.dash.MediaPlayer.errors.MEDIA_KEYERR_DOMAIN_CODE:case this.dash.MediaPlayer.errors.CAPABILITY_MEDIAKEYS_ERROR_CODE:this.throwError(a.ErrorCode.DASHJS_DRM_ERROR,i.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.error.message,e.error);break;default:this.throwError(a.ErrorCode.UNSPECIFIED_DASHJS_ERROR,e.error.message,e.error,!1)}},A.prototype.handleNetworkErrors=function(e){var t=u.DashjsRobustness.FATAL_ERROR_RECOVERY_ATTEMPTS;this.networkErrorRetryCount<t?(e.error.code===this.dash.MediaPlayer.errors.DOWNLOAD_ERROR_ID_MANIFEST_CODE&&(this.player.setManifestLoaderRetryAttempts(1),this.player.setManifestLoaderRetryInterval(u.DashjsRobustness.FATAL_ERROR_RECOVERY_ATTEMPTS*this.networkErrorRetryCount)),this.player.attachSource(this.mediaUrl+="#s="+this.player.time()),this.player.play(),this.networkErrorRetryCount++,this.log(s.LogLevel.ERROR,this.getErrorMessage(i.AppResources.messages.RETRY_PLAYBACK_NETWORK_ERROR,!1,this.networkErrorRetryCount+" / "+t),e.error)):this.throwError(a.ErrorCode.DASHJS_NETWORK_ERROR,i.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR+" : "+e.error.message,e.error)},A.prototype.getCdnResponseHeader=function(e){if(e){var o={};return(e=e.trim().split(/[\r\n]+/)).forEach(function(e){var t=e.split(": "),r=t.shift(),i=t.join(": ");o[r]=i}),o[d.Playback.MULTI_CDN]||null}return null},A.prototype.getProtectionData=function(e){var t={};return n.Util.isEmpty(e.widevine)||(t[c.DrmType.WIDEVINE]={serverURL:e.widevine.url,httpRequestHeaders:e.widevine.header,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}),n.Util.isEmpty(e.playready)||(t[c.DrmType.PLAYREADY]={serverURL:e.playready.url,httpRequestHeaders:e.playready.header,audioRobustness:"SW_SECURE_CRYPTO",videoRobustness:"SW_SECURE_CRYPTO"}),t},A.prototype.getTextTrackIndex=function(t){return n.Util.findIndex(this.videoSurface.textTracks,function(e){return t==e})},A);function A(e,t,r){var i=o.call(this,e,t,r)||this;return i.dash=window.dashjs,i.dashFactory=window.dashjs,i.pType=m.PlaybackAdapterType.DASHJS,i.startTime=NaN,i.seekTime=NaN,i.dashjsEventMap=[{type:i.dash.MediaPlayer.events.STREAM_INITIALIZED,callback:function(e){return i.onStreamInitialized(e)}},{type:i.dash.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,callback:function(e){return i.onQualityChangeRequested(e)}},{type:i.dash.MediaPlayer.events.QUALITY_CHANGE_RENDERED,callback:function(e){return i.onQualityChangeRendered(e)}},{type:i.dash.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED,callback:function(e){return i.onFragmentLoadComplete(e)}},{type:i.dash.MediaPlayer.events.TRACK_CHANGE_RENDERED,callback:function(e){return i.onTrackChangeRendered(e)}},{type:i.dash.MediaPlayer.events.ERROR,callback:function(e){return i.onError(e)}},{type:i.dash.MediaPlayer.events.PLAYBACK_SEEKED,callback:function(e){return i.onSeekComplete(e)}},{type:i.dash.MediaPlayer.events.PERIOD_SWITCH_STARTED,callback:function(e){return i.onPeriodSwitchStarted(e)}},{type:i.dash.MediaPlayer.events.PERIOD_SWITCH_COMPLETED,callback:function(e){return i.onPeriodSwitchCompleted(e)}},{type:"public_keySystemAccessComplete",callback:function(e){return i.onKeySystemAccessComplete(e)}},{type:l.DashEmsg.GOOGLE_DAI,callback:function(e){return i.onEmsgDai(e)}}],i.logger.log(s.LogLevel.INFO,"DashjsAdapter created"),i}r.DashjsAdapter=E},{"../../app/AppResources":47,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../util/enum/DrmType":223,"../enum/DashEmsg":182,"../enum/DashjsRobustness":183,"../enum/Playback":188,"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"../enum/TextTrackSurfaceEvents":195,"../enum/VideoSurfaceEvents":197,"./BasePlaybackAdapter":174}],176:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HlsjsAdapter=void 0;var o,i=e("../../app/AppResources"),a=e("../../core/Util"),n=e("../../enum/ErrorCode"),s=e("../../enum/LogLevel"),c=e("../../util/Utils"),l=e("../enum/HlsjsRobustness"),u=e("../enum/Playback"),d=e("../enum/PlaybackAdapterEvents"),p=e("../enum/PlaybackAdapterType"),m=e("../enum/TextTrackMode"),f=e("../enum/TextTrackSurfaceEvents"),y=e("./BaseHtml5Adapter"),h=(o=y.BaseHtml5Adapter,_(E,o),E.prototype.initialize=function(){o.prototype.initialize.call(this);var e=this.Hls.DefaultConfig;e.debug=this.enableLogger,e.capLevelToPlayerSize=this.playback.abr.capQualityToScreenSize,e.autoStartLoad=!1,e.liveSyncDurationCount=this.playback.liveEdgeSyncFragmentCount,e.manifestLoadingMaxRetry=l.HlsjsRobustness.MANIFEST_RETRY_ATTEMPTS,e.manifestLoadingRetryDelay=l.HlsjsRobustness.MANIFEST_RETRY_DELAY,e.levelLoadingRetryDelay=l.HlsjsRobustness.LEVEL_RETRY_DELAY,e.levelLoadingTimeOut=l.HlsjsRobustness.LEVEL_RETRY_TIMEOUT,e.fragLoadingRetryDelay=l.HlsjsRobustness.FRAGMENT_RETRY_DELAY,e.fragLoadingTimeOut=l.HlsjsRobustness.FRAGMENT_RETRY_TIMEOUT,e.enableCEA708Captions=!0,e.xhrSetup=this.onRequest.bind(this);var t=this.config.performanceSettings;null!=t.forwardBufferLength&&(e.maxBufferLength=t.forwardBufferLength),null!=t.backBufferLength&&(e.liveBackBufferLength=t.backBufferLength),null!=t.topQualityForwardBufferLength&&(e.maxMaxBufferLength=t.topQualityForwardBufferLength),this.logger.log(s.LogLevel.INFO,"Hlsjs version: "+this.Hls.version),this.player=new this.Hls(e),this.player.subtitleDisplay=this.config.textTrackSettings.native,this.player.attachMedia(this.videoSurface.video),this.addEvents(this.player,this.hlsjsEventMap)},E.prototype.loadMediaUrl=function(){return this.player.loadSource(this.mediaUrl),o.prototype.loadMediaUrl.call(this)},E.prototype.destroy=function(){var e=this;return o.prototype.destroy.call(this).then(function(){e.removeEvents(e.player,e.hlsjsEventMap),e.player.destroy(),e.player=null,e.Hls=null})},E.prototype.play=function(){this.player.config.maxMaxBufferLength!=l.HlsjsRobustness.BUFFER_LEVEL_PLAYBACK&&(this.player.config.maxMaxBufferLength=l.HlsjsRobustness.BUFFER_LEVEL_PLAYBACK),o.prototype.play.call(this)},E.prototype.suspend=function(){this.player.stopLoad()},E.prototype.resume=function(){this.player.startLoad()},Object.defineProperty(E.prototype,"audioTrack",{set:function(e){this.player.audioTrack=e.index},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"currentIndex",{get:function(){return this.player.loadLevel},set:function(e){this.player.loadLevel=e},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"autoQualitySwitching",{get:function(){return-1===this.player.loadLevel},set:function(e){this.player.loadLevel=e?-1:this.player.nextLoadLevel},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"minBitrate",{get:function(){return this.player.config.minAutoBitrate},set:function(e){this.player.config.minAutoBitrate=e},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"maxBitrate",{get:function(){return this.player.levels[this.player.autoLevelCapping].bitrate},set:function(e){this.player.config.capLevelToPlayerSize?this.logger.log(s.LogLevel.WARN,i.AppResources.messages.CAP_LEVEL_MAXBITRATE):this.player.autoLevelCapping=isNaN(e)?-1:c.Utils.getIndexForBitrate(this.player.levels,e,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"manifestQualities",{get:function(){return this.player.levels.map(function(e,t){return{index:t,bitrate:e.bitrate,width:e.width,height:e.height,codec:e.attrs?e.attrs.CODECS:void 0}})},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"seekable",{get:function(){var e=this.videoSurface.video.duration;return{start:e-(this.lowLevelDvrDetails?this.lowLevelDvrDetails.totalduration:0),end:e}},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"segmentDuration",{get:function(){return this.lowLevelDvrDetails?this.lowLevelDvrDetails.averagetargetduration:o.prototype.segmentDuration},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"framerate",{get:function(){return this.pFramerate},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"fragmentType",{get:function(){return this.pFragmentType},enumerable:!1,configurable:!0}),E.prototype.onVideoSurfaceEvent=function(e){switch(e.type){case f.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE:case f.TextTrackSurfaceEvents.TEXT_TRACK_DISPLAY_MODE_CHANGE:var t,r=this.videoSurface.textTrack;r.mode!=m.TextTrackMode.DISABLED&&(t=a.Util.findIndex(this.player.subtitleTracks,function(e){return e.lang==r.language&&e.name==r.label}),this.player.subtitleTrack!=t&&(this.player.subtitleTrack=t))}o.prototype.onVideoSurfaceEvent.call(this,e)},E.prototype.onManifestParsed=function(e,t){this.emit(d.PlaybackAdapterEvents.MANIFEST_PARSED,{profile:this.manifestQualities})},E.prototype.onManifestLoaded=function(e,t){var r=this.playback.startTime;this.player.startLoad(isNaN(r)?-1:r),0<this.player.subtitleTracks.length&&(this.player.subtitleTrack=-1),this.setBitrateRestrictionAtStartup(),this.emit(d.PlaybackAdapterEvents.MANIFEST_LOADED)},E.prototype.onLevelLoaded=function(e,t){this.lowLevelDvrDetails=t.details,this.pIsLiveStream=this.lowLevelDvrDetails.live,this.emit(d.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:t.level})},E.prototype.onLevelUpdated=function(e,t){this.checkAbrConstraints(this.player.maxAutoLevel)},E.prototype.onLevelSwitching=function(e,t){this.emit(d.PlaybackAdapterEvents.ABR_QUALITY_SWITCHING,{index:t.level})},E.prototype.onLevelSwitched=function(e,t){this.emit(d.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:t.level})},E.prototype.onFragmentLoaded=function(e,t){this.networkErrorRetryCount=0,this.mediaErrorRetryCount=0,this.pFragmentType||(this.pFragmentType=a.Util.getMimeType(t.frag.url)),this.checkAbrConstraints(this.player.maxAutoLevel);var r=8e3*t.stats.loaded/Number(window.performance.now()-t.stats.trequest);this.emit(d.PlaybackAdapterEvents.FRAGMENT_LOADED,{bandwidth:r})},E.prototype.onFragmentParsingData=function(e,t){this.pFramerate=t.nb/(t.endPTS-t.startPTS),this.emit(d.PlaybackAdapterEvents.FRAGMENT_PARSED,{rate:this.pFramerate})},E.prototype.onAudioTrackUpdated=function(e,t){this.normalizedAudioTracks=this.normalizeAudioTracks(this.player.audioTracks,{codec:"audioCodec",label:"name"}),this.emit(d.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[this.player.audioTrack]})},E.prototype.onAudioTrackSwitched=function(e,t){this.emit(d.PlaybackAdapterEvents.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[parseInt(t.id)]})},E.prototype.onRequest=function(r,i){var o=this;r.withCredentials=-1<i.indexOf("akamaihd")&&-1<i.indexOf("csmil"),this.multiCdnHeaderPresent&&r.addEventListener("readystatechange",function(e){var t;-1!==i.indexOf(".ts")&&r.readyState===XMLHttpRequest.HEADERS_RECEIVED&&o.multiCdnHeaderPresent&&(t=r.getAllResponseHeaders(),o.multiCdnHeaderPresent=-1!==t.indexOf(u.Playback.MULTI_CDN),o.multiCdnHeaderPresent&&o.emit(d.PlaybackAdapterEvents.MULTI_CDN,{cdn:r.getResponseHeader(u.Playback.MULTI_CDN.toUpperCase())}))})},E.prototype.onError=function(e,t){var r=n.ErrorCode.UNSPECIFIED_HLSJS_ERROR;switch(t.type){case this.Hls.ErrorTypes.NETWORK_ERROR:t.fatal&&this.handleNetworkErrors(t);break;case this.Hls.ErrorTypes.MEDIA_ERROR:t.fatal&&this.handleMediaErrors(t);break;case this.Hls.ErrorTypes.MUX_ERROR:r=n.ErrorCode.HLSJS_MUX_ERROR;default:var i=this.getErrorMessage(""+t.details,t.fatal);this.log(s.LogLevel.ERROR,i,t),this.throwError(r,i,t,t.fatal)}},E.prototype.handleNetworkErrors=function(e){var t=l.HlsjsRobustness.FATAL_ERROR_RECOVERY_ATTEMPTS,r=this.Hls.ErrorDetails;switch(e.details){case r.LEVEL_LOAD_ERROR:case r.FRAG_LOAD_ERROR:if(this.networkErrorRetryCount<t){this.player.startLoad(),this.networkErrorRetryCount++,this.log(s.LogLevel.ERROR,this.getErrorMessage(i.AppResources.messages.RETRY_PLAYBACK_NETWORK_ERROR,!1,this.networkErrorRetryCount+" / "+t));break}this.throwError(n.ErrorCode.HLSJS_NETWORK_ERROR,i.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR,e);break;case r.MANIFEST_PARSING_ERROR:this.throwError(n.ErrorCode.HLSJS_PARSE_ERROR,i.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR+" : "+e.details,e);break;default:this.throwError(n.ErrorCode.HLSJS_NETWORK_ERROR,i.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR+" : "+e.details,e,e.fatal)}},E.prototype.handleMediaErrors=function(e){var t=l.HlsjsRobustness.FATAL_ERROR_RECOVERY_ATTEMPTS,r=this.Hls.ErrorDetails;switch(e.details){case r.MANIFEST_INCOMPATIBLE_CODECS_ERROR:this.throwError(n.ErrorCode.HLSJS_SRC_NOT_SUPPORTED,i.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.details,e);break;default:if(this.mediaErrorRetryCount<t){1===this.mediaErrorRetryCount&&this.player.swapAudioCodec(),this.player.recoverMediaError(),this.mediaErrorRetryCount++,this.log(s.LogLevel.ERROR,this.getErrorMessage(i.AppResources.messages.RETRY_PLAYBACK_MEDIA_ERROR,!1,this.mediaErrorRetryCount+" / "+t));break}this.throwError(n.ErrorCode.HLSJS_MEDIA_ERROR,i.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.details,e)}},E.prototype.setBitrateRestrictionAtStartup=function(){var e,t,r=this.playback.abr;isNaN(r.minBitrate)||(this.minBitrate=r.minBitrate-1),isNaN(r.maxBitrate)||(this.maxBitrate=r.maxBitrate),isNaN(r.startBitrate)||(e=this.player.levels,t=c.Utils.getIndexForBitrate(e,r.startBitrate,!1),a.Util.inRange(t,0,e.length-1)&&(this.player.config.startLevel=t))},E);function E(e,t,r){var i=o.call(this,e,t,r)||this;return i.pType=p.PlaybackAdapterType.HLSJS,i.Hls=window.Hls,i.pFramerate=Number.NaN,i.pFragmentType="",i.hlsjsEventMap=[{type:i.Hls.Events.MANIFEST_PARSED,callback:function(e,t){return i.onManifestParsed(e,t)}},{type:i.Hls.Events.MANIFEST_LOADED,callback:function(e,t){return i.onManifestLoaded(e,t)}},{type:i.Hls.Events.LEVEL_LOADED,callback:function(e,t){return i.onLevelLoaded(e,t)}},{type:i.Hls.Events.LEVEL_UPDATED,callback:function(e,t){return i.onLevelUpdated(e,t)}},{type:i.Hls.Events.LEVEL_SWITCHING,callback:function(e,t){return i.onLevelSwitching(e,t)}},{type:i.Hls.Events.LEVEL_SWITCHED,callback:function(e,t){return i.onLevelSwitched(e,t)}},{type:i.Hls.Events.FRAG_LOADED,callback:function(e,t){return i.onFragmentLoaded(e,t)}},{type:i.Hls.Events.FRAG_PARSING_DATA,callback:function(e,t){return i.onFragmentParsingData(e,t)}},{type:i.Hls.Events.AUDIO_TRACKS_UPDATED,callback:function(e,t){return i.onAudioTrackUpdated(e,t)}},{type:i.Hls.Events.AUDIO_TRACK_SWITCHED,callback:function(e,t){return i.onAudioTrackSwitched(e,t)}},{type:i.Hls.Events.ERROR,callback:function(e,t){return i.onError(e,t)}}],i.logger.log(s.LogLevel.INFO,"HlsjsAdapter created"),i}r.HlsjsAdapter=h},{"../../app/AppResources":47,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../util/Utils":220,"../enum/HlsjsRobustness":186,"../enum/Playback":188,"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"../enum/TextTrackMode":194,"../enum/TextTrackSurfaceEvents":195,"./BaseHtml5Adapter":173}],177:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Html5Adapter=void 0;var o,i=e("../../app/AppResources"),a=e("../../core/Util"),n=e("../../enum/ErrorCode"),s=e("../../enum/LogLevel"),c=e("../../enum/MediaError"),l=e("../../util/enum/DrmType"),u=e("../enum/PlaybackAdapterEvents"),d=e("../enum/PlaybackAdapterType"),p=e("../enum/VideoSurfaceEvents"),m=e("../util/FairPlay"),f=e("./BaseHtml5Adapter"),y=(o=f.BaseHtml5Adapter,_(h,o),h.prototype.initialize=function(){o.prototype.initialize.call(this),this.hasFairplayDrm(this.config.resource.location.drm)&&(this.fairplay=new m.FairPlay(this.videoSurface,this.config,this.logger),this.fairplay.on(u.PlaybackAdapterEvents.ERROR,this.fairPlayEventHandler),this.fairplay.initialize(),this.emit(u.PlaybackAdapterEvents.DRM_KEYSYSTEM_CREATED,{keysystem:l.DrmType.FAIRPLAY_1_0}))},h.prototype.destroy=function(){return this.videoSurface.video.removeAttribute("src"),this.videoSurface.video.load(),this.fairplay&&(this.fairplay.off(u.PlaybackAdapterEvents.ERROR,this.fairPlayEventHandler),this.fairplay.destroy()),o.prototype.destroy.call(this)},Object.defineProperty(h.prototype,"currentIndex",{set:function(e){this.logger.log(s.LogLevel.INFO,i.AppResources.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"autoQualitySwitching",{set:function(e){this.logger.log(s.LogLevel.INFO,i.AppResources.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"minBitrate",{set:function(e){this.logger.log(s.LogLevel.INFO,i.AppResources.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"maxBitrate",{set:function(e){this.logger.log(s.LogLevel.INFO,i.AppResources.messages.MANUAL_ABR_SWITCHING_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"manifestQualities",{get:function(){return[]},enumerable:!1,configurable:!0}),h.prototype.onVideoSurfaceEvent=function(e){switch(e.type){case p.VideoSurfaceEvents.DURATION_CHANGE:this.pIsLiveStream=this.videoSurface.duration==1/0}o.prototype.onVideoSurfaceEvent.call(this,e),this.updateAudioTracks(e)},h.prototype.loadMediaUrl=function(){return this.videoSurface.src=this.mediaUrl,o.prototype.loadMediaUrl.call(this)},h.prototype.updateAudioTracks=function(e){var t=-1!==this.audioTrackIdx,r=this.videoSurface&&this.videoSurface.video&&this.videoSurface.video.audioTracks;if(r){var i=this.getEnabledAudioTrackId(r);switch(e.type){case p.VideoSurfaceEvents.CAN_PLAY:t||(this.audioTrackIdx=i,this.normalizedAudioTracks=this.normalizeAudioTracks(a.Util.toArray(r),{type:"kind",lang:"language"}),this.emit(u.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[this.audioTrackIdx]}));break;case p.VideoSurfaceEvents.PROGRESS:t&&this.audioTrackIdx!==i&&(this.audioTrackIdx=i,this.emit(u.PlaybackAdapterEvents.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[this.audioTrackIdx]}))}}},h.prototype.onFairplayEvent=function(e){this.emit(e.type,e.data)},h.prototype.getEnabledAudioTrackId=function(e){for(var t=e.length;t--;)if(e[t].enabled)return t;return t},h.prototype.hasFairplayDrm=function(e){return null!==e&&!a.Util.isEmpty(e.fairplay)},h.prototype.handleVideoSurfaceError=function(e){o.prototype.handleVideoSurfaceError.call(this,e);var t=this.videoSurface.video.error;if(t)switch(t.code){case c.MediaError.MEDIA_ERR_NETWORK:this.throwError(n.ErrorCode.HTML5_NETWORK_ERROR,t,t);break;case c.MediaError.MEDIA_ERR_DECODE:this.throwError(n.ErrorCode.HTML5_MEDIA_ERROR,t,t);break;case c.MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:this.throwError(n.ErrorCode.HTML5_SRC_NOT_SUPPORTED,t,t);break;default:this.throwError(n.ErrorCode.UNSPECIFIED_VIDEO_PLAYBACK_ERROR,t,t)}},h);function h(e,t,r){var i=o.call(this,e,t,r)||this;return i.pType=d.PlaybackAdapterType.HTML5,i.audioTrackIdx=-1,i.fairPlayEventHandler=function(e){return i.onFairplayEvent(e)},i.logger.log(s.LogLevel.INFO,"Html5Adapter created"),i}r.Html5Adapter=y},{"../../app/AppResources":47,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../enum/MediaError":108,"../../util/enum/DrmType":223,"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"../enum/VideoSurfaceEvents":197,"../util/FairPlay":202,"./BaseHtml5Adapter":173}],178:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlayStationAdapter=void 0;var o,i=e("es6-promise"),a=e("../enum/PlaybackAdapterEvents"),n=e("../enum/PlaybackAdapterType"),s=e("./BasePlaybackAdapter"),c=(o=s.BasePlaybackAdapter,_(l,o),l.prototype.initialize=function(){o.prototype.initialize.call(this);var e=this.playback,t=this.videoSurface;isNaN(e.abr.startBitrate)||(t.startingBitrate=e.abr.startBitrate),isNaN(e.abr.minBitrate)||(t.minBitrate=e.abr.minBitrate),isNaN(e.abr.maxBitrate)||(t.maxBitrate=e.abr.maxBitrate),isNaN(e.startTime)||(t.startTime=e.startTime),this.addEvents(this.videoSurface,this.psEventMap)},l.prototype.loadMediaUrl=function(){var t=this;return i.Promise.resolve().then(function(){var e=t.config.resource.location.drm;t.videoSurface.src='{"command":"load", "contentUri":"'+t.mediaUrl+'", "licenseUri":"'+e.playready.url+'","customData": "","sourceType":0}'})},l.prototype.destroy=function(){return this.removeEvents(this.videoSurface,this.psEventMap),this.videoSurface.destroy(),o.prototype.destroy.call(this)},l.prototype.play=function(){this.videoSurface.play()},l.prototype.pause=function(){this.videoSurface.pause()},l.prototype.seek=function(e){this.videoSurface.seek(e)},Object.defineProperty(l.prototype,"audioTrack",{set:function(e){this.videoSurface.audioTrack=e},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"type",{get:function(){return this.pType},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"time",{get:function(){return this.videoSurface.time},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"duration",{get:function(){return this.videoSurface.duration},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"droppedVideoFrames",{get:function(){return this.videoSurface.metrics.droppedFrame},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"buffering",{get:function(){return this.videoSurface.buffering},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"currentIndex",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"currentBitrate",{get:function(){return this.videoSurface.metrics.bitrate},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"autoQualitySwitching",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minBitrate",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"maxBitrate",{set:function(e){},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"manifestQualities",{get:function(){return this.videoSurface.masterBitrateProfile.map(this.normalizeQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"liveStreamInfo",{get:function(){return this.liveStreamInfoVO},enumerable:!1,configurable:!0}),l.prototype.onManifestParsed=function(e){this.emit(a.PlaybackAdapterEvents.MANIFEST_PARSED,{profile:this.manifestQualities})},l.prototype.onBubble=function(e){this.emit(e.type,e.data)},l);function l(e,t,r){var i=o.call(this,e,t,r)||this;return i.pType=n.PlaybackAdapterType.PLAY_STATION,i.psEventMap=[{type:a.PlaybackAdapterEvents.MANIFEST_PARSED,callback:function(e){return i.onManifestParsed(e)}},{type:a.PlaybackAdapterEvents.ABR_QUALITY_LOADED,callback:function(e){return i.onBubble(e)}},{type:a.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,callback:function(e){return i.onBubble(e)}}],i.log(i.pType,i.videoSurface.video.version,i.videoSurface.video.TTYLevel,i.videoSurface.metrics),i}r.PlayStationAdapter=c},{"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"./BasePlaybackAdapter":174,"es6-promise":25}],179:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackAdapterFactory=void 0;var s=e("es6-promise"),c=e("../../app/AppResources"),d=e("../../core/Util"),n=e("../../dataservice/ScriptLoader"),p=e("../../enum/Browser"),l=e("../../enum/ErrorCode"),u=e("../../enum/LogLevel"),m=e("../../enum/Os"),f=e("../../util/enum/MediaCapabilitiesMimeType"),y=e("../enum/ExtLibEndpoint"),h=e("../enum/PlaybackAdapterType"),E=e("../enum/StreamingLibraryVersion"),a=e("../surface/Html5VideoSurface"),A=e("../surface/WebMafVideoSurface"),T=e("./DashjsAdapter"),v=e("./HlsjsAdapter"),g=e("./Html5Adapter"),P=e("./PlayStationAdapter"),N=e("./ShakaAdapter"),S=e("./TwitchLowLatencyAdapter"),i=(b.getAdapterOverride=function(e){var t;return null===(t=e.resource.overrides)||void 0===t?void 0:t.adapter},b.getAdapterType=function(e){var t=this.getAdapterOverride(e);if(!d.Util.isEmpty(t)){if(t!=h.PlaybackAdapterType.SHAKA)return t;if(b.isShakaAdapter(e))return h.PlaybackAdapterType.SHAKA}return b.isTwitchLowLatencyAdapter(e)?h.PlaybackAdapterType.TWITCH_LOW_LATENCY:b.isPlayStationAdapter(e)?h.PlaybackAdapterType.PLAY_STATION:b.isHTML5Adapter(e)?h.PlaybackAdapterType.HTML5:b.isDashAdapter(e)?h.PlaybackAdapterType.DASHJS:b.isHlsAdapter(e)?h.PlaybackAdapterType.HLSJS:h.PlaybackAdapterType.UNKNOWN},b.getUrl=function(e,t){function r(e,t,r){return void 0===r&&(r={}),d.Util.template(e,C({VERSION:t},r))}var i,o=t.playerOptions.overrides||{};if(null!==(i=o.dependencies)&&void 0!==i&&i[e])return o.dependencies[e];switch(e){case h.PlaybackAdapterType.HLSJS:return r(y.ExtLibEndpoint.HLSJS_GZIP_CDN,E.StreamingLibraryVersion.HLSJS);case h.PlaybackAdapterType.DASHJS:return r(y.ExtLibEndpoint.DASHJS_GZIP_CDN,E.StreamingLibraryVersion.DASHJS);case h.PlaybackAdapterType.SHAKA:var a=!0===o.enableLowLevelStreamingLogs?".debug":"";return r(y.ExtLibEndpoint.SHAKA_GZIP_CDN,E.StreamingLibraryVersion.SHAKA,{DEBUG:a});case h.PlaybackAdapterType.TWITCH_LOW_LATENCY:return r(y.ExtLibEndpoint.TWITCH_GZIP_CDN,E.StreamingLibraryVersion.TWITCH);default:return null}},b.loadLib=function(e,t,o){var a=this;return new s.Promise(function(r,i){try{if(null!=o())return r()}catch(e){}new n.ScriptLoader({url:a.checkSslForUrl(t.system,e),urls:[],timeout:b.getScriptLoaderTimeout(t.playerOptions.overrides),onComplete:function(e){var t=e.data;t.error||t.timedOut?i(t):r()},errorRecovery:b.getErrorRecoveryFromConfig(t)})})},b.getAdapter=function(e,t,r){function i(e){return{target:o,code:e,message:c.AppResources.messages.ADAPTER_LIB_UNAVAILABLE}}var o=b.getAdapterType(t),a=b.getVideoSurface(o,e,t,r),n=this.getUrl(o,t);switch(o){case h.PlaybackAdapterType.HLSJS:return this.loadLib(n,t,function(){return window.Hls}).then(function(){return r.log(u.LogLevel.INFO,"Loading "+h.PlaybackAdapterType.HLSJS+" external library version: "+E.StreamingLibraryVersion.HLSJS),new v.HlsjsAdapter(a,t,r)}).catch(function(e){throw i(l.ErrorCode.HLS_SDK_MISSING)});case h.PlaybackAdapterType.DASHJS:return this.loadLib(n,t,function(){return window.dashjs.MediaPlayer}).then(function(){return r.log(u.LogLevel.INFO,"Loading "+h.PlaybackAdapterType.DASHJS+" external library version: "+E.StreamingLibraryVersion.DASHJS),new T.DashjsAdapter(a,t,r)}).catch(function(e){throw i(l.ErrorCode.DASH_SDK_MISSING)});case h.PlaybackAdapterType.SHAKA:return this.loadLib(n,t,function(){return window.shaka.Player}).then(function(){return r.log(u.LogLevel.INFO,"Loading "+h.PlaybackAdapterType.SHAKA+" external library version: "+E.StreamingLibraryVersion.SHAKA),new N.ShakaAdapter(a,t,r)}).catch(function(e){throw i(l.ErrorCode.SHAKA_SDK_MISSING)});case h.PlaybackAdapterType.TWITCH_LOW_LATENCY:return this.loadLib(n,t,function(){return window.MediaPlayer}).then(function(){return r.log(u.LogLevel.INFO,"Loading "+h.PlaybackAdapterType.TWITCH_LOW_LATENCY+" external library version: "+E.StreamingLibraryVersion.TWITCH),new S.TwitchLowLatencyAdapter(a,t,r)}).catch(function(e){throw i(l.ErrorCode.TWITCH_SDK_MISSING)});case h.PlaybackAdapterType.HTML5:return s.Promise.resolve(new g.Html5Adapter(a,t,r));case h.PlaybackAdapterType.PLAY_STATION:return s.Promise.resolve(new P.PlayStationAdapter(a,t,r));default:return s.Promise.reject(i(l.ErrorCode.UNEXPECTED_CONDITION))}},b.isPlayStationAdapter=function(e){return e.system.isWebMaf},b.isHTML5Adapter=function(e){var t,r,i=!d.Util.isEmpty(null===(r=null===(t=e.resource.location.drm)||void 0===t?void 0:t.fairplay)||void 0===r?void 0:r.appCertUrl),o=e.system.info.browser===p.Browser.SAFARI,a=e.system.os===m.Os.IOS,n=e.system.os==m.Os.ANDROID,s=e.system.osVersionInfo,c=e.resource.location.mediaUrl,l=d.Util.getMimeType(c),u=l==f.MediaCapabilitiesMimeType.HLS;if(!u&&l==f.MediaCapabilitiesMimeType.MP4_VIDEO)return!0;if(u&&i&&o)return!0;if(u&&a){if(i&&o)return!0;if(!i)return!0}return u&&!i&&n&&s.majorVersion<5},b.isDashAdapter=function(e){var t=e.resource.location.mediaUrl;return d.Util.getMimeType(t)==f.MediaCapabilitiesMimeType.DASH},b.isTwitchLowLatencyAdapter=function(e){return this.getAdapterOverride(e)===h.PlaybackAdapterType.TWITCH_LOW_LATENCY},b.isHlsAdapter=function(e){var t=e.resource.location.mediaUrl,r=e.system.info.browser===p.Browser.SAFARI,i=e.system.os===m.Os.IOS,o=d.Util.getMimeType(t)==f.MediaCapabilitiesMimeType.HLS;return(!o||!i||r)&&o},b.isShakaAdapter=function(e){var t=e.resource.location.mediaUrl,r=this.getAdapterOverride(e);return d.Util.getMimeType(t)==f.MediaCapabilitiesMimeType.DASH&&r===h.PlaybackAdapterType.SHAKA},b.checkSslForUrl=function(e,t){return e.isWebOs?d.Util.makeUrl(!0,t):t},b.getScriptLoaderTimeout=function(e){var t=5e3;return 0<e.streamingLibLoaderTimeout&&(t=e.streamingLibLoaderTimeout),t},b.getVideoSurface=function(e,t,r,i){var o=e!=h.PlaybackAdapterType.SHAKA;return e===h.PlaybackAdapterType.PLAY_STATION?new A.WebMafVideoSurface(r,i):new a.Html5VideoSurface(t,r,i,o)},b.getErrorRecoveryFromConfig=function(e){var t=null,r=e.playerOptions.networkErrorRecovery;return d.Util.isEmpty(r)||(t={retryAttempts:r.retryAttempts,retryIntervals:r.retryIntervals}),t},b);function b(){}r.PlaybackAdapterFactory=i},{"../../app/AppResources":47,"../../core/Util":88,"../../dataservice/ScriptLoader":93,"../../enum/Browser":98,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../enum/Os":116,"../../util/enum/MediaCapabilitiesMimeType":225,"../enum/ExtLibEndpoint":185,"../enum/PlaybackAdapterType":190,"../enum/StreamingLibraryVersion":192,"../surface/Html5VideoSurface":198,"../surface/WebMafVideoSurface":201,"./DashjsAdapter":175,"./HlsjsAdapter":176,"./Html5Adapter":177,"./PlayStationAdapter":178,"./ShakaAdapter":180,"./TwitchLowLatencyAdapter":181,"es6-promise":25}],180:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ShakaAdapter=void 0;var a,s=e("../../app/AppResources"),o=e("../../core/Util"),c=e("../../enum/ErrorCode"),n=e("../../enum/LogLevel"),i=e("../../util/Utils"),l=e("../enum/Playback"),u=e("../enum/PlaybackAdapterEvents"),d=e("../enum/PlaybackAdapterType"),p=e("../enum/ShakaRobustness"),m=e("../enum/TextTrackEvents"),f=e("../enum/TextTrackMode"),y=e("../enum/TextTrackSurfaceEvents"),h=e("./BaseHtml5Adapter"),E=(a=h.BaseHtml5Adapter,_(A,a),A.prototype.initialize=function(){a.prototype.initialize.call(this),"undefined"==typeof VTTCue&&(this.cleanUpVtt=!0),this.shaka.polyfill.installAll(),this.player=new this.shaka.Player(this.videoSurface.video),this.logger.log(n.LogLevel.INFO,"Shaka version: "+this.shaka.Player.version),this.playerConfig=this.player.getConfiguration(),this.addEvents(this.player,this.playerEventMap);var e=this.playerConfig.streaming.retryParameters;e.maxAttempts=p.ShakaRobustness.FATAL_ERROR_RECOVERY_ATTEMPTS,e.baseDelay=p.ShakaRobustness.FATAL_ERROR_RECOVERY_DELAY,e.backoffFactor=p.ShakaRobustness.FATAL_ERROR_RECOVERY_BACKOFF,e.fuzzFactor=p.ShakaRobustness.FATAL_ERROR_RECOVERY_FUZZ,(e=this.playerConfig.manifest.retryParameters).maxAttempts=p.ShakaRobustness.MANIFEST_RETRY_ATTEMPTS,e.baseDelay=p.ShakaRobustness.MANIFEST_RETRY_INTERVAL,this.networkEngine=this.player.getNetworkingEngine(),this.networkEngine.registerRequestFilter(this.onRequest.bind(this)),this.networkEngine.registerResponseFilter(this.onResponse.bind(this));var t=this.config.resource.location.drm;t.widevine&&t.widevine.url&&(this.playerConfig.drm.servers["com.widevine.alpha"]=t.widevine.url),t.playready&&t.playready.url&&(this.playerConfig.drm.servers["com.microsoft.playready"]=t.playready.url);var r=this.playback.abr,i=this.playerConfig.abr;isNaN(r.minBitrate)||(i.restrictions.minBandwidth=r.minBitrate),isNaN(r.maxBitrate)||(i.restrictions.maxBandwidth=r.maxBitrate),isNaN(r.startBitrate)||(i.defaultBandwidthEstimate=1.15*r.startBitrate);var o=this.config.performanceSettings;null!=o.forwardBufferLength&&(this.playerConfig.streaming.bufferingGoal=o.forwardBufferLength),null!=o.backBufferLength&&(this.playerConfig.streaming.bufferBehind=o.backBufferLength),this.renderTextTrackNatively=this.config.playerOptions.renderTextTrackNatively,0==this.renderTextTrackNatively&&(this.playerConfig.streaming.alwaysStreamText=!0),this.configure()},A.prototype.resize=function(){var e,t,r,i;!this.playback.abr.capQualityToScreenSize||(e=this.getVariantTracks()[0])&&(r=(t=this.videoSurface.video).clientWidth,i=t.clientHeight,(r<e.width||i<e.height)&&(r=e.width,i=e.height),this.playerConfig.restrictions.maxWidth=r,this.playerConfig.restrictions.maxHeight=i,this.configure())},A.prototype.destroy=function(){var e=this;return this.removeEvents(this.player,this.playerEventMap),this.pTextTrack&&this.pTextTrack.removeEventListener(m.TextTrackEvents.CUE_CHANGE,this.onCueChangeHandler),this.player.destroy().then(function(){return e.player=null,e.networkEngine=null,e.playerConfig=null,e.shaka=null,e.textTracks=null,e.audioTracks=null,e.variant=null,e.pTextTrack=null,e.currentTextTrack=null,e.cleanUpVtt&&delete window.VTTCue,a.prototype.destroy.call(e)})},A.prototype.suspend=function(){this.playerConfig.streaming.bufferingGoal=1,this.playerConfig.streaming.rebufferingGoal=1},A.prototype.resume=function(){this.playerConfig.streaming.bufferingGoal=10,this.playerConfig.streaming.rebufferingGoal=10},Object.defineProperty(A.prototype,"seekable",{get:function(){return this.player.seekRange()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"autoQualitySwitching",{get:function(){return this.playerConfig.abr.enabled},set:function(e){this.playerConfig.abr.enabled=e,this.configure()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"currentIndex",{get:function(){return o.Util.findIndex(this.getVariantTracks(),this.isActive)},set:function(e){var t=this.getVariantTracks()[e];this.player.selectVariantTrack(t,!0)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"segmentDuration",{get:function(){return this.player.getManifest().presentationTimeline.getMaxSegmentDuration()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"manifestQualities",{get:function(){return this.getVariantTracks().map(function(e,t){return{index:t,bitrate:e.bandwidth,width:e.width,height:e.height,codec:e.codecs}})},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"maxBitrate",{get:function(){return this.playerConfig.abr.restrictions.maxBandwidth},set:function(e){isNaN(e)&&(e=1/0),this.playerConfig.abr.restrictions.maxBandwidth=e,this.configure(),this.constrainAbr()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"minBitrate",{get:function(){return this.playerConfig.abr.restrictions.minBandwidth},set:function(e){isNaN(e)&&(e=-1/0),this.playerConfig.abr.restrictions.minBandwidth=e,this.configure(),this.constrainAbr()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"audioTrack",{set:function(e){this.audioSwitching=!0,this.player.selectAudioLanguage(e.lang,e.type)},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"droppedVideoFrames",{get:function(){return this.player.getStats().droppedFrames},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"framerate",{get:function(){var e=this.variant;return e?e.frameRate:Number.NaN},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"textTrackMode",{set:function(e){this.currentTextTrackMode=e,this.renderTextTrackNatively?(this.player.setTextTrackVisibility(e!=f.TextTrackMode.DISABLED),this.pTextTrack.mode=e):this.onTextTrackVisibility()},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"textTrack",{set:function(e){this.currentTextTrack&&e.id==this.currentTextTrack.id||(this.currentTextTrack=e,this.emit(y.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE,this.currentTextTrack),this.player.selectTextTrack(e))},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"fragmentType",{get:function(){var e=this.getVariantTrack();return e?e.mimeType:""},enumerable:!1,configurable:!0}),A.prototype.loadMediaUrl=function(){var r=this,e=this.playback.startTime;return this.player.load(this.mediaUrl,isNaN(e)||e<0?0:e).then(function(){r.pIsLiveStream=r.player.isLive(),r.loadedMetadata();var e,t=r.config.resource.location.textTrackUrl;o.Util.isEmpty(t)||(e=o.Util.getMimeType(t),r.player.addTextTrack(t,"en","captions",e))}).catch(function(e){return r.onError({detail:e})})},A.prototype.onError=function(e){function t(e){var t=o.code;for(var r in a){var i=a[r];if(i==t){e+=" : "+r+" / "+i;break}}return e}var o=e.detail,r=this.shaka.util.Error,i=r.Category,a=r.Code;switch(o.category){case i.NETWORK:this.throwError(c.ErrorCode.SHAKA_NETWORK_ERROR,t(s.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR),o);break;case i.MANIFEST:this.throwError(c.ErrorCode.SHAKA_PARSE_ERROR,t(s.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR),o);break;case i.MEDIA:var n=o.code==a.VIDEO_ERROR&&o.data[0]==MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?c.ErrorCode.SHAKA_SRC_NOT_SUPPORTED:c.ErrorCode.SHAKA_MEDIA_ERROR;this.throwError(n,t(s.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR),o);break;case i.DRM:this.throwError(c.ErrorCode.SHAKA_DRM_ERROR,t(s.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR),o);break;default:this.throwError(c.ErrorCode.UNSPECIFIED_SHAKA_ERROR,t(s.AppResources.messages.UNSPECIFIED_ERROR),o,!1)}},A.prototype.onManifestParsed=function(e){this.emit(u.PlaybackAdapterEvents.MANIFEST_PARSED,{profile:this.manifestQualities})},A.prototype.onBitrateChanged=function(e){this.constrainAbr(),this.emit(u.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:this.currentIndex})},A.prototype.onRequest=function(e,t){var r=this.config.resource.location.drm;e===this.shaka.net.NetworkingEngine.RequestType.LICENSE&&r.enabled&&(r.widevine&&r.widevine.header&&o.Util.assign(t.headers,r.widevine.header),r.playready&&r.playready.header&&o.Util.assign(t.headers,r.playready.header))},A.prototype.onResponse=function(e,t){var r,i;this.multiCdnHeaderPresent&&(r=t.headers[l.Playback.MULTI_CDN],this.multiCdnHeaderPresent=null!=r,this.multiCdnHeaderPresent&&this.emit(u.PlaybackAdapterEvents.MULTI_CDN,{cdn:r})),e===this.shaka.net.NetworkingEngine.RequestType.SEGMENT&&(i=this.player.getStats().estimatedBandwidth,this.emit(u.PlaybackAdapterEvents.FRAGMENT_LOADED,{bandwidth:i}))},A.prototype.onEmsg=function(e){var t=e.detail,r={id:t.schemeIdUri,info:t.value,data:t.messageData};this.emit(y.TextTrackSurfaceEvents.METADATA_CUEPOINT,r)},A.prototype.onTracksChanged=function(e){this.resize(),this.updateAudioTracks(),this.updateTextTracks()},A.prototype.onAdaptation=function(e){this.variant=this.getVariantTrack()},A.prototype.onVariantChanged=function(e){this.audioSwitching&&(this.audioSwitching=!1,this.emit(u.PlaybackAdapterEvents.AUDIO_TRACK_CHANGE,{track:this.normalizedAudioTracks[this.getAudioTrackIndex()]})),this.variant=this.getVariantTrack()},A.prototype.onDrmSessionUpdate=function(e){this.emit(u.PlaybackAdapterEvents.DRM_KEYSYSTEM_CREATED,{keysystem:this.player.keySystem()})},A.prototype.onTextTrackVisibility=function(){this.currentTextTrackMode&&this.emit(y.TextTrackSurfaceEvents.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:this.currentTextTrackMode})},A.prototype.onCueChange=function(e){var t;!this.renderTextTrackNatively&&this.config.textTrackSettings.enabled&&(t=event.target,this.emit(y.TextTrackSurfaceEvents.TEXT_CUEPOINT,{activeCues:t.activeCues}))},A.prototype.onTimelineRegionEnter=function(e){var t,r;this.videoSurface.video.seeking||(r={id:(t=e.detail).schemeIdUri,info:t.value||t.eventElement.getAttribute("messageData"),data:t},this.emit(y.TextTrackSurfaceEvents.METADATA_CUEPOINT,r))},A.prototype.isActive=function(e){return e.active},A.prototype.getAudioTrackIndex=function(){var e=this.getVariantTracks()[this.currentIndex],t=e.language,r=e.audioRoles.join(",");return o.Util.findIndex(this.audioTracks,function(e){return e.language==t&&e.role==r})},A.prototype.configure=function(){this.player.configure(this.playerConfig)},A.prototype.constrainAbr=function(){var e=i.Utils.getIndexForBitrate(this.manifestQualities,this.maxBitrate,!1);this.checkAbrConstraints(e)},A.prototype.getVariantTracks=function(){return this.player.getVariantTracks().sort(function(e,t){return e.bandwidth-t.bandwidth})},A.prototype.getVariantTrack=function(){return o.Util.find(this.player.getVariantTracks(),this.isActive)},A.prototype.updateAudioTracks=function(){this.audioTracks=this.player.getAudioLanguagesAndRoles(),this.normalizedAudioTracks=this.normalizeAudioTracks(this.audioTracks,{type:"role",lang:"language",label:"language"}),this.emit(u.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,{tracks:this.normalizedAudioTracks,track:this.normalizedAudioTracks[this.getAudioTrackIndex()]})},A.prototype.updateTextTracks=function(){var e=this;this.player.getTextTracks().forEach(function(t){e.textTracks.some(function(e){return e.id==t.id})||(e.textTracks.push(t),e.emit(y.TextTrackSurfaceEvents.TEXT_TRACK_ADDED,t))});var t,r=!this.currentTextTrack,i=o.Util.find(this.textTracks,this.isActive);i&&i!=this.currentTextTrack&&(this.textTrack=i),r&&(this.pTextTrack=o.Util.find(this.videoSurface.video.textTracks,function(e){return"Shaka Player TextTrack"==e.label}),this.pTextTrack.addEventListener(m.TextTrackEvents.CUE_CHANGE,this.onCueChangeHandler),(t=i||this.textTracks[0])&&(this.currentTextTrack=t,this.emit(y.TextTrackSurfaceEvents.TEXT_TRACK_AVAILABLE))),this.renderTextTrackNatively&&this.player.setTextTrackVisibility(this.config.textTrackSettings.enabled)},A);function A(e,t,r){var i=a.call(this,e,t,r)||this;return i.pType=d.PlaybackAdapterType.SHAKA,i.shaka=window.shaka,i.textTracks=[],i.playerEventMap=[i.mapEvent("error",i.onError),i.mapEvent("streaming",i.onManifestParsed),i.mapEvent("variantchanged",i.onBitrateChanged),i.mapEvent("adaptation",i.onBitrateChanged),i.mapEvent("emsg",i.onEmsg),i.mapEvent("trackschanged",i.onTracksChanged),i.mapEvent("variantchanged",i.onVariantChanged),i.mapEvent("adaptation",i.onAdaptation),i.mapEvent("drmsessionupdate",i.onDrmSessionUpdate),i.mapEvent("texttrackvisibility",i.onTextTrackVisibility),i.mapEvent("timelineregionenter",i.onTimelineRegionEnter)],i.onCueChangeHandler=function(e){return i.onCueChange(e)},i.audioSwitching=!1,i.renderTextTrackNatively=!0,i.cleanUpVtt=!1,i.logger.log(n.LogLevel.INFO,"ShakaAdapter created"),i.updateAudioTracks=o.Util.debounce(i.updateAudioTracks.bind(i),25),i.updateTextTracks=o.Util.debounce(i.updateTextTracks.bind(i),25),i}r.ShakaAdapter=E},{"../../app/AppResources":47,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../util/Utils":220,"../enum/Playback":188,"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"../enum/ShakaRobustness":191,"../enum/TextTrackEvents":193,"../enum/TextTrackMode":194,"../enum/TextTrackSurfaceEvents":195,"./BaseHtml5Adapter":173}],181:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TwitchLowLatencyAdapter=void 0;var o,i=e("es6-promise"),a=e("../../app/AppResources"),n=e("../../core/Util"),s=e("../../enum/ErrorCode"),c=e("../../enum/LogLevel"),l=e("../../util/Utils"),u=e("../enum/PlaybackAdapterEvents"),d=e("../enum/PlaybackAdapterType"),p=e("../enum/VideoSurfaceEvents"),m=e("./BasePlaybackAdapter"),f=(o=m.BasePlaybackAdapter,_(y,o),y.prototype.initialize=function(){var e;o.prototype.initialize.call(this),this.player=this.twitch.create(),this.player.attachHTMLVideoElement(this.videoSurface.video),this.player.setAutoplay(!1);var t=this.enableLogger?"debug":"error";this.player.setLogLevel(t);var r=(null===(e=this.config.resource.overrides)||void 0===e?void 0:e.twitch)||{},i=!n.Util.isBoolean(r.rebufferToLive)||r.rebufferToLive;this.player.setRebufferToLive(i),this.addEvents(this.player,this.twitchEventMap),isNaN(this.playback.abr.maxBitrate)||(this.maxBitrate=this.playback.abr.maxBitrate),isNaN(this.playback.abr.minBitrate)||(this.minBitrate=this.playback.abr.minBitrate),this.logger.log(c.LogLevel.INFO,"Twitch Version",this.player.getVersion())},y.prototype.seek=function(e){},y.prototype.destroy=function(){return this.removeEvents(this.player,this.twitchEventMap),this.player.delete(),this.player=null,this.twitch=null,o.prototype.destroy.call(this)},y.prototype.play=function(){this.player.play()},Object.defineProperty(y.prototype,"duration",{get:function(){return this.player.getDuration()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"time",{get:function(){return this.player.getPosition()},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"autoQualitySwitching",{get:function(){return this.player.getAutoSwitchQuality()},set:function(e){this.player.setAutoSwitchQuality(e)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"currentIndex",{get:function(){var e=this.player.getQuality();return l.Utils.getIndexForBitrate(this.manifestQualities,e.bitrate,!1)},set:function(e){var t=this.player.getQualities();this.player.setQuality(t[e])},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"minBitrate",{get:function(){return this.manifestQualities[0].bitrate},set:function(e){this.logger.log(c.LogLevel.INFO,a.AppResources.messages.ABR_MIN_BITRATE_RESTRICTION_UNAVAILABLE)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"maxBitrate",{get:function(){var e=isNaN(this.autoMaxBitrate)?this.manifestQualities.length-1:l.Utils.getIndexForBitrate(this.manifestQualities,this.autoMaxBitrate,!1);return this.manifestQualities[e].bitrate},set:function(e){this.autoMaxBitrate=isNaN(e)?this.MAX_BITRATE_CLEAR_VALUE:e,this.player.setAutoMaxBitrate(this.autoMaxBitrate)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"manifestQualities",{get:function(){return this.player.getQualities().sort(function(e,t){return e.bitrate-t.bitrate}).map(this.normalizeQuality)},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"liveStreamInfo",{get:function(){var e=this.liveStreamInfoVO;return this.pIsLiveStream&&(e.isPlayingLive=!0,e.relativeDuration=this.duration,e.relativeTime=this.time,e.liveEdgeOffset=this.player.getLiveLatency()),e},enumerable:!1,configurable:!0}),y.prototype.onVideoSurfaceEvent=function(e){switch(e.type){case p.VideoSurfaceEvents.DURATION_CHANGE:this.pIsLiveStream=this.duration===1/0}o.prototype.onVideoSurfaceEvent.call(this,e)},y.prototype.loadMediaUrl=function(){var e=this;return i.Promise.resolve().then(function(){e.player.load(e.mediaUrl)})},y.prototype.onReady=function(e){this.emit(u.PlaybackAdapterEvents.MANIFEST_PARSED,{profile:this.manifestQualities})},y.prototype.onQualityChange=function(e){var t=l.Utils.getIndexForBitrate(this.manifestQualities,e.bitrate,!1);this.checkAbrConstraints(l.Utils.getIndexForBitrate(this.manifestQualities,this.maxBitrate,!1)),this.emit(u.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:t})},y.prototype.onError=function(e){switch(void 0===e&&(e={}),e.type){case this.twitch.ErrorType.NETWORK_IO:case this.twitch.ErrorType.NETWORK:case this.twitch.ErrorType.NOT_AVAILABLE:this.throwError(s.ErrorCode.TWITCH_NETWORK_ERROR,a.AppResources.messages.FATAL_PLAYBACK_NETWORK_ERROR+" : "+e.message,e);break;case this.twitch.ErrorType.INVALID_DATA:this.throwError(s.ErrorCode.TWITCH_PARSE_ERROR,a.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.message,e);break;case this.twitch.ErrorType.NOT_SUPPORTED:this.throwError(s.ErrorCode.TWITCH_SRC_NOT_SUPPORTED,a.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.message,e);break;default:switch(e.source){case this.twitch.ErrorSource.DECODER:case this.twitch.ErrorSource.RENDERER:case this.twitch.ErrorSource.SEGMENT:this.throwError(s.ErrorCode.TWITCH_MEDIA_ERROR,a.AppResources.messages.FATAL_PLAYBACK_MEDIA_ERROR+" : "+e.message,e);break;default:this.throwError(s.ErrorCode.UNSPECIFIED_TWITCH_ERROR,e.message,e,!1)}}},y);function y(e,t,r){var i=o.call(this,e,t,r)||this;return i.MAX_BITRATE_CLEAR_VALUE=1e8,i.pType=d.PlaybackAdapterType.TWITCH_LOW_LATENCY,i.twitch=window.MediaPlayer,i.autoMaxBitrate=Number.POSITIVE_INFINITY,i.twitchEventMap=[{type:i.twitch.PlayerState.READY,callback:function(e){return i.onReady(e)}},{type:i.twitch.PlayerEventType.QUALITY_CHANGED,callback:function(e){return i.onQualityChange(e)}},{type:i.twitch.PlayerEventType.ERROR,callback:function(e){return i.onError(e)}},{type:i.twitch.PlayerEventType.AUDIO_BLOCKED,callback:function(e){return i.onError(e)}},{type:i.twitch.PlayerEventType.PLAYBACK_BLOCKED,callback:function(e){return i.onError(e)}}],i.logger.log(c.LogLevel.INFO,"TwitchLowLatencyAdapter created"),i}r.TwitchLowLatencyAdapter=f},{"../../app/AppResources":47,"../../core/Util":88,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../util/Utils":220,"../enum/PlaybackAdapterEvents":189,"../enum/PlaybackAdapterType":190,"../enum/VideoSurfaceEvents":197,"./BasePlaybackAdapter":174,"es6-promise":25}],182:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DashEmsg=void 0,(r.DashEmsg||(r.DashEmsg={})).GOOGLE_DAI="urn:google:dai:2018"},{}],183:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.DashjsRobustness=void 0,(i=r.DashjsRobustness||(r.DashjsRobustness={}))[i.MANIFEST_RETRY_ATTEMPTS=2]="MANIFEST_RETRY_ATTEMPTS",i[i.MANIFEST_RETRY_INTERVAL=1e3]="MANIFEST_RETRY_INTERVAL",i[i.FRAGMENT_RETRY_ATTEMPTS=6]="FRAGMENT_RETRY_ATTEMPTS",i[i.FRAGMENT_RETRY_INTERVAL=2e3]="FRAGMENT_RETRY_INTERVAL",i[i.FATAL_ERROR_RECOVERY_ATTEMPTS=3]="FATAL_ERROR_RECOVERY_ATTEMPTS"},{}],184:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.DrmVendor=void 0,(i=r.DrmVendor||(r.DrmVendor={})).IRDETO="irdeto",i.DRM_TODAY="drmtoday",i.UNKNOWN="unknown"},{}],185:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ExtLibEndpoint=void 0,(i=r.ExtLibEndpoint||(r.ExtLibEndpoint={})).DASHJS_GZIP_CDN="//vidtech.cbsinteractive.com/cvp/lib/dashjs/{{VERSION}}/dash.all.min.js",i.HLSJS_GZIP_CDN="//cdnjs.cloudflare.com/ajax/libs/hls.js/{{VERSION}}/hls.min.js",i.SHAKA_GZIP_CDN="//vidtech.cbsinteractive.com/cvp/lib/shaka/{{VERSION}}/shaka-player.compiled{{DEBUG}}.js",i.TWITCH_GZIP_CDN="//player.live-video.net/{{VERSION}}/mediaplayer.min.js"},{}],186:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.HlsjsRobustness=void 0,(i=r.HlsjsRobustness||(r.HlsjsRobustness={}))[i.BUFFER_LEVEL_PRELOAD=12]="BUFFER_LEVEL_PRELOAD",i[i.BUFFER_LEVEL_PLAYBACK=60]="BUFFER_LEVEL_PLAYBACK",i[i.MANIFEST_RETRY_ATTEMPTS=2]="MANIFEST_RETRY_ATTEMPTS",i[i.MANIFEST_RETRY_DELAY=1e3]="MANIFEST_RETRY_DELAY",i[i.LEVEL_RETRY_TIMEOUT=2e3]="LEVEL_RETRY_TIMEOUT",i[i.LEVEL_RETRY_DELAY=500]="LEVEL_RETRY_DELAY",i[i.FRAGMENT_RETRY_TIMEOUT=2e3]="FRAGMENT_RETRY_TIMEOUT",i[i.FRAGMENT_RETRY_DELAY=500]="FRAGMENT_RETRY_DELAY",i[i.FATAL_ERROR_RECOVERY_ATTEMPTS=3]="FATAL_ERROR_RECOVERY_ATTEMPTS"},{}],187:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlayStation=void 0,(i=r.PlayStation||(r.PlayStation={})).BUFFERING="buffering",i.END_OF_STREAM="endOfStream",i.NOT_READY="notReady",i.OPENING="opening",i.PAUSED="paused",i.PLAYING="playing",i.STOPPED="stopped",i.DISPLAYING_VIDEO="DisplayingVideo",i.UNKNOWN="unknown",i.READY="ready",i.PLAYER_TIMED_EVENT="playerTimedEvent",i.NETWORK_STATUS_CHANGE="networkStatusChange",i.CONTENT_AVAILABLE="contentAvailable",i.PLAYER_STATUS_CHANGE="playerStatusChange",i.PLAYER_STREAMING_ERROR="playerStreamingError",i.PLAYER_ERROR="playerError",i.PLAYER_SUBTITLE="playerSubtitle",i.GET_AUDIO_TRACKS="getAudioTracks",i.GET_VIDEO_REP_COUNT="getRepresentationsCount",i.GET_VIDEO_REP_INFO="getRepresentationInfo",i.GET_SUBTITLE_TRACKS="getSubtitleTracks",i.GET_PLAYBACK_TIME="getPlaybackTime"},{}],188:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.Playback=void 0,(i=r.Playback||(r.Playback={})).MULTI_CDN="x-cdn",i.VIDEO="video",i.AUDIO="audio",i.TEXT="text",i.ABR_SWITCHING_MODE_AUTO="auto",i.ABR_SWITCHING_MODE_MANUAL="manual",i.ABR_SWITCHING_MODE_UNAVAILABLE="unavailable"},{}],189:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackAdapterEvents=void 0,(i=r.PlaybackAdapterEvents||(r.PlaybackAdapterEvents={})).ABR_QUALITY_LOADED="abrQualityLoaded",i.ABR_QUALITY_SWITCHED="abrQualitySwitched",i.ABR_QUALITY_SWITCHING="abrQualitySwitching",i.ABR_CONSTRAINTS_CHANGE="maxLevelChanged",i.FRAGMENT_LOADED="fragmentLoaded",i.FRAGMENT_PARSED="fragmentParsed",i.MANIFEST_LOADED="manifestLoaded",i.MANIFEST_PARSED="manifestParsed",i.LOADED_METADATA="loadedMetdata",i.DRM_KEYSYSTEM_CREATED="drmKeySystemCreated",i.AUDIO_TRACK_UPDATED="audioTrackUpdated",i.AUDIO_TRACK_CHANGE="audioTrackChange",i.MULTI_CDN="multiCdn",i.ERROR="error"},{}],190:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.PlaybackAdapterType=void 0,(i=r.PlaybackAdapterType||(r.PlaybackAdapterType={})).HLSJS="hlsjs",i.DASHJS="dashjs",i.SHAKA="shaka",i.HTML5="html5",i.PLAY_STATION="playStation",i.TWITCH_LOW_LATENCY="twitchLowLatency",i.UNKNOWN="unknown"},{}],191:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.ShakaRobustness=void 0,(i=r.ShakaRobustness||(r.ShakaRobustness={}))[i.MANIFEST_RETRY_ATTEMPTS=2]="MANIFEST_RETRY_ATTEMPTS",i[i.MANIFEST_RETRY_INTERVAL=1e3]="MANIFEST_RETRY_INTERVAL",i[i.FATAL_ERROR_RECOVERY_ATTEMPTS=4]="FATAL_ERROR_RECOVERY_ATTEMPTS",i[i.FATAL_ERROR_RECOVERY_DELAY=1e3]="FATAL_ERROR_RECOVERY_DELAY",i[i.FATAL_ERROR_RECOVERY_BACKOFF=2]="FATAL_ERROR_RECOVERY_BACKOFF",i[i.FATAL_ERROR_RECOVERY_FUZZ=0]="FATAL_ERROR_RECOVERY_FUZZ"},{}],192:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.StreamingLibraryVersion=void 0,(i=r.StreamingLibraryVersion||(r.StreamingLibraryVersion={})).DASHJS="2.9.3-cvp.0.9.3",i.HLSJS="0.14.8",i.SHAKA="2.5.14",i.TWITCH="1.0.0-beta"},{}],193:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackEvents=void 0,(i=r.TextTrackEvents||(r.TextTrackEvents={})).CUE_CHANGE="cuechange",i.ADD_TRACK="addtrack",i.CHANGE="change"},{}],194:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackMode=void 0,(i=r.TextTrackMode||(r.TextTrackMode={})).SHOWING="showing",i.HIDDEN="hidden",i.DISABLED="disabled"},{}],195:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackSurfaceEvents=void 0,(i=r.TextTrackSurfaceEvents||(r.TextTrackSurfaceEvents={})).METADATA_CUEPOINT="metadataCuepoint",i.TEXT_CUEPOINT="textCuepoint",i.TEXT_TRACK_DISPLAY_MODE_CHANGE="textTrackModeChange",i.TEXT_TRACK_ADDED="textTrackAdded",i.TEXT_TRACK_CHANGE="textTrackChange",i.TEXT_TRACK_AVAILABLE="textTrackAvailable"},{}],196:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackType=void 0,(i=r.TextTrackType||(r.TextTrackType={})).SUBTITLES="subtitles",i.CAPTIONS="captions",i.METADATA="metadata",i.DESCRIPTIONS="descriptions",i.CHAPTERS="chapters"},{}],197:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.VideoSurfaceEvents=void 0,(i=r.VideoSurfaceEvents||(r.VideoSurfaceEvents={})).ABORT="abort",i.CAN_PLAY="canplay",i.CAN_PLAY_THROUGH="canplaythrough",i.DURATION_CHANGE="durationchange",i.ENDED="ended",i.ERROR="error",i.LOADED_METADATA="loadedmetadata",i.LOAD_START="loadstart",i.PAUSE="pause",i.PLAY="play",i.PLAYING="playing",i.PROGRESS="progress",i.RATE_CHANGE="ratechange",i.SEEKED="seeked",i.SEEKING="seeking",i.STALLED="stalled",i.TIME_UPDATE="timeupdate",i.WEBKIT_NEED_KEY="webkitneedkey",i.VOLUME_CHANGE="volumechange"},{}],198:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Html5VideoSurface=void 0;var a,i=e("../../core/Emitter"),n=e("../../enum/LogLevel"),o=e("../enum/TextTrackSurfaceEvents"),s=e("../enum/VideoSurfaceEvents"),c=e("./TextTrackSurface"),l=(a=i.Emitter,_(u,a),u.prototype.destroy=function(){this.removeEvents(),this.textTrackSurface&&this.textTrackSurface.destroy(),this.textTrackSurface=null,this.pVideo=null,a.prototype.destroy.call(this)},u.prototype.play=function(){var e,t=this;!this.pVideo||(e=this.pVideo.play())&&e.then(function(){}).catch(function(e){t.logger.warn("Exception caught in play() Promise: "+e.message,n.LogLevel.WARN)})},u.prototype.pause=function(){this.pVideo&&this.pVideo.pause()},u.prototype.seek=function(e){this.pVideo&&(this.pVideo.currentTime=e)},u.prototype.addEvents=function(){for(var e in s.VideoSurfaceEvents)this.pVideo.addEventListener(s.VideoSurfaceEvents[e],this.pVideoEventHandler);if(this.textTrackSurface)for(var e in o.TextTrackSurfaceEvents)this.textTrackSurface.on(o.TextTrackSurfaceEvents[e],this.pTextTrackEventHandler)},Object.defineProperty(u.prototype,"video",{get:function(){return this.pVideo},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"src",{set:function(e){this.pVideo&&(this.pVideo.src=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"volume",{get:function(){return this.pVideo?this.pVideo.volume:null},set:function(e){this.pVideo&&(this.pVideo.volume=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"muted",{get:function(){return this.pVideo?this.pVideo.muted:null},set:function(e){this.pVideo&&(this.pVideo.muted=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"paused",{get:function(){return this.pVideo?this.pVideo.paused:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"time",{get:function(){return this.pVideo?this.pVideo.currentTime:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"duration",{get:function(){return this.pVideo?this.pVideo.duration:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"state",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textTrackMode",{set:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrackMode=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textTrack",{get:function(){return this.textTrackSurface.textTrack},set:function(e){this.textTrackSurface&&(this.textTrackSurface.textTrack=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textTrackSrc",{set:function(e){this.textTrackSurface&&(this.textTrackSurface.timeTextSrc=e)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"textTracks",{get:function(){return this.textTrackSurface.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"bufferLength",{get:function(){var e=0;return this.pVideo&&0<this.pVideo.buffered.length&&(e=this.pVideo.buffered.end(this.pVideo.buffered.length-1)-this.pVideo.currentTime),e},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"buffering",{get:function(){var e;return!this.paused&&this.pVideo&&(e=this.timeAtLastBufferCheck+.001,this.timeAtLastBufferCheck=this.pVideo.currentTime,this.pBuffering=1===this.pVideo.readyState&&this.pVideo.currentTime<e),this.pBuffering},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"framerate",{get:function(){var e=this.pVideo.webkitDecodedFrameCount||this.pVideo.mozPresentedFrames||Number.NaN;return isNaN(e)?e:e/this.pVideo.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"metrics",{get:function(){var e={droppedVideoFrames:Number.NaN,totalVideoFrames:Number.NaN};if(!this.pVideo)return e;var t="webkitDroppedFrameCount"in this.pVideo&&"webkitDecodedFrameCount"in this.pVideo;return"getVideoPlaybackQuality"in this.pVideo?e=this.pVideo.getVideoPlaybackQuality():t&&(e={droppedVideoFrames:this.pVideo.webkitDroppedFrameCount,totalVideoFrames:this.pVideo.webkitDroppedFrameCount+this.pVideo.webkitDecodedFrameCount}),e},enumerable:!1,configurable:!0}),u.prototype.onVideoElementEvent=function(e){this.emit(e.type,e)},u.prototype.onTextTrackSurfaceEvent=function(e){this.emit(e.type,e.data)},u.prototype.removeEvents=function(){for(var e in s.VideoSurfaceEvents)this.pVideo.removeEventListener(s.VideoSurfaceEvents[e],this.pVideoEventHandler);if(this.textTrackSurface)for(var e in o.TextTrackSurfaceEvents)this.textTrackSurface.on(o.TextTrackSurfaceEvents[e],this.pTextTrackEventHandler)},u);function u(e,t,r,i){void 0===i&&(i=!0);var o=a.call(this)||this;return o.timeAtLastBufferCheck=NaN,o.textTrackSurface=null,o.pBuffering=!1,o.pVideoEventHandler=function(e){return o.onVideoElementEvent(e)},o.pTextTrackEventHandler=function(e){return o.onTextTrackSurfaceEvent(e)},o.pVideo=e,o.logger=r,i&&(o.textTrackSurface=new c.TextTrackSurface(e,t,r)),o.logger.log(n.LogLevel.INFO,"Html5VideoSurface created"),o}r.Html5VideoSurface=l},{"../../core/Emitter":84,"../../enum/LogLevel":107,"../enum/TextTrackSurfaceEvents":195,"../enum/VideoSurfaceEvents":197,"./TextTrackSurface":199}],199:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TextTrackSurface=void 0;var o,i=e("es6-promise"),a=e("../../core/Emitter"),l=e("../../core/Util"),n=e("../../enum/LogLevel"),s=e("../enum/TextTrackEvents"),u=e("../enum/TextTrackMode"),c=e("../enum/TextTrackSurfaceEvents"),d=e("../enum/TextTrackType"),p=e("../util/SmpteToVttCueConverter"),m=(o=a.Emitter,_(f,o),f.prototype.destroy=function(){var t=this;this.removeEvents(),l.Util.forEach(this.pTextTracks,function(e){return t.cleanupTrack(e)}),l.Util.forEach(this.video.querySelectorAll("track"),function(e){return t.video.removeChild(e)}),o.prototype.destroy.call(this)},f.prototype.cleanupTrack=function(t){l.Util.forEach(t.cues,function(e){return e&&t.removeCue(e)}),l.Util.forEach(t.activeCues,function(e){try{e&&t.removeCue(e)}catch(e){}}),t.expired=!0,this.isTextTrack(t.kind)&&(t.textTrack1=!0,t.textTrack2=!0,t.isTTML=!0,t.isEmbedded=!1),t.mode=u.TextTrackMode.DISABLED},Object.defineProperty(f.prototype,"timeTextSrc",{set:function(e){0<=e.indexOf(".vtt")?this.createVttTextTrack(this.video,e):this.processSmpteTimedText(e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrackMode",{set:function(e){this.currentTextTrack?this.setTrackMode(e):this.logger.log(n.LogLevel.WARN,"No text track detected")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrack",{get:function(){return this.currentTextTrack},set:function(e){var t=this;this.isValidTrack(e)&&e!=this.currentTextTrack&&(this.currentTextTrack&&this.currentTextTrack.mode!==u.TextTrackMode.DISABLED&&(this.currentTextTrack.mode=u.TextTrackMode.DISABLED),this.currentTextTrack=e,this.setTrackMode(this.currentTextTrackMode).then(function(){t.logger.log(n.LogLevel.INFO,e.language+" is being set as the current text track"),t.emit(c.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE,e)}))},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTracks",{get:function(){var t=this;return l.Util.toArray(this.pTextTracks).filter(function(e){return t.isValidTrack(e)})},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"activeTextTracks",{get:function(){var t=this;return l.Util.toArray(this.pTextTracks).filter(function(e){return!t.isExpired(e)})},enumerable:!1,configurable:!0}),f.prototype.setTrackMode=function(o){var a=this;return new i.Promise(function(t,e){function r(){a.currentTextTrack.mode=o,i&&setTimeout(function(){return a.emit(c.TextTrackSurfaceEvents.TEXT_TRACK_DISPLAY_MODE_CHANGE,{mode:o})},0);var e=u.TextTrackMode.DISABLED;o===u.TextTrackMode.HIDDEN&&(e="enabled for event driven external custom rendering"),o===u.TextTrackMode.SHOWING&&(e="enabled for native rendering by the user agent"),a.logger.log(n.LogLevel.INFO,"The "+a.currentTextTrack.kind+" track for language code "+a.currentTextTrack.language+" is being "+e+" "),t()}var i=o!=a.currentTextTrackMode;(a.currentTextTrackMode=o)===u.TextTrackMode.SHOWING&&a.currentTextTrack.mode===u.TextTrackMode.DISABLED?(a.currentTextTrack.mode=u.TextTrackMode.HIDDEN,setTimeout(r,10)):r()})},f.prototype.onVideoTextTrackAdded=function(e){e.track.expired=!1,this.addTracks()},f.prototype.onTextTrackAdded=function(e){this.addTracks()},f.prototype.onTextTrackChange=function(e){this.processTracks()},f.prototype.onCueChange=function(e){var t=e.target,r=t&&t.activeCues;if(r&&r.length)switch(t.kind){case d.TextTrackType.METADATA:this.processId3(r[0]);break;case d.TextTrackType.CAPTIONS:case d.TextTrackType.SUBTITLES:this.allowTextTrackCueDispatch&&t.mode===u.TextTrackMode.HIDDEN&&this.emit(c.TextTrackSurfaceEvents.TEXT_CUEPOINT,{activeCues:r})}},f.prototype.addTracks=function(){var t=this;if(l.Util.forEach(this.activeTextTracks,function(e){e.addEventListener(s.TextTrackEvents.CUE_CHANGE,t.onCueChangeHandler),e.mode=e.kind===d.TextTrackType.METADATA?u.TextTrackMode.HIDDEN:u.TextTrackMode.DISABLED,t.isTextTrack(e.kind)&&!t.isDuplicateTrack(e)&&(t.logger.log(n.LogLevel.INFO,"A "+e.kind+" text track was added"),t.emit(c.TextTrackSurfaceEvents.TEXT_TRACK_ADDED,e))}),!this.currentTextTrack){if(this.textTrack=this.findDefaultTrack(this.textTracks,this.config.textTrackSettings.language),!this.textTrack)return;this.textTrack.mode=this.config.textTrackSettings.mode,this.emit(c.TextTrackSurfaceEvents.TEXT_TRACK_AVAILABLE)}this.processTracks()},f.prototype.processTracks=function(){var e,t,r=this,i=this.config.textTrackSettings,o=i.enabled,a=i.native,n=i.enabledMode,s=this.pTextTracks;if(l.Util.forEach(this.pTextTracks,function(e){r.isExpired(e)&&e.mode!=u.TextTrackMode.DISABLED&&(e.mode=u.TextTrackMode.DISABLED)}),a){var c=l.Util.find(s,function(e){return e.mode==u.TextTrackMode.SHOWING});if(o){if(c==this.currentTextTrack)return;c?this.textTrack=c:this.textTrackMode=u.TextTrackMode.DISABLED}else{if(!c)return;c!=this.currentTextTrack&&(this.textTrack=c),this.textTrackMode=u.TextTrackMode.SHOWING}}else o?(e=l.Util.find(s,function(e){return e.mode==u.TextTrackMode.SHOWING}))&&(e.mode=n):(t=l.Util.find(s,function(e){return e.mode!=u.TextTrackMode.DISABLED}))&&(t.mode=u.TextTrackMode.DISABLED)},f.prototype.processId3=function(e){var t,r=this,i=e.value,o=this.config.resource.playback.id3OwnerIds;i&&("TXXX"===i.key?this.transmitMetadataCuepoint("google_dai",i):"PRIV"===i.key&&"com.cbsi.live.sg"===i.info?(t={info:i.info,data:String.fromCharCode.apply(null,new Uint8Array(e.value.data))},this.transmitMetadataCuepoint("com.cbsi.live.sg",t)):l.Util.forEach(o,function(e){-1!==i.info.indexOf(e)&&r.transmitMetadataCuepoint(e,i)}))},f.prototype.transmitMetadataCuepoint=function(e,t){var r={id:e,info:t.info,data:t.data};this.emit(c.TextTrackSurfaceEvents.METADATA_CUEPOINT,r)},f.prototype.addEvents=function(){this.pTextTracks.addEventListener(s.TextTrackEvents.ADD_TRACK,this.onTextTrackAddedHandler),this.pTextTracks.addEventListener(s.TextTrackEvents.CHANGE,this.onTextTrackChangeHandler),this.video.addEventListener(s.TextTrackEvents.ADD_TRACK,this.onVideoTextTrackAddedHandler)},f.prototype.removeEvents=function(){var t=this;this.pTextTracks.removeEventListener(s.TextTrackEvents.ADD_TRACK,this.onTextTrackAddedHandler),this.pTextTracks.removeEventListener(s.TextTrackEvents.CHANGE,this.onTextTrackChangeHandler),this.video.removeEventListener(s.TextTrackEvents.ADD_TRACK,this.onVideoTextTrackAddedHandler),l.Util.forEach(this.pTextTracks,function(e){return e.removeEventListener(s.TextTrackEvents.CUE_CHANGE,t.onCueChangeHandler)})},f.prototype.isDuplicateTrack=function(t){var e=this.existingTrack.some(function(e){return t.language==e.language&&t.label==e.label&&t.kind==e.kind});return e||this.existingTrack.push(t),e},f.prototype.isTextTrack=function(e){return e===d.TextTrackType.CAPTIONS||e===d.TextTrackType.SUBTITLES},f.prototype.isExpired=function(e){return e.expired},f.prototype.isValidTrack=function(e){return!!e&&!!this.isTextTrack(e.kind)&&!this.isExpired(e)},f.prototype.createVttTextTrack=function(e,t){var r=document.createElement("track");r.kind=d.TextTrackType.CAPTIONS,r.label="English",r.srclang="en",r.id="sidecar-vtt",r.src=t,e.appendChild(r),r.track.mode=u.TextTrackMode.DISABLED},f.prototype.processSmpteTimedText=function(e){var t=this;new p.SmpteToVttCueConverter(e,this.system).convert().then(function(e){t.createSmpteTextTrack(t.video,e),t.logger.log(n.LogLevel.INFO,"Smpte XML conversion and text track creation successful")}).catch(function(e){t.logger.log(n.LogLevel.INFO,"Smpte XML conversion and text track creation error")})},f.prototype.createSmpteTextTrack=function(e,t){try{var r=e.addTextTrack(d.TextTrackType.CAPTIONS,"English","en");l.Util.forEach(t,function(e){return r.addCue(e)})}catch(e){this.logger.log(n.LogLevel.INFO,e)}},f.prototype.findDefaultTrack=function(e,t){var r,i=new RegExp(t,"i"),o=l.Util.find(e,function(e){return i.test(e.language)});return o||(r=l.Util.parseLanguageTag(t).language)!=t&&(i=new RegExp(r,"i"),o=l.Util.find(e,function(e){return i.test(e.language)})),o||e[0]},f);function f(e,t,r){var i=o.call(this)||this;return i.pTextTracks=null,i.currentTextTrack=null,i.currentTextTrackMode=u.TextTrackMode.DISABLED,i.allowTextTrackCueDispatch=!0,i.existingTrack=[],i.onTextTrackAddedHandler=function(e){return i.onTextTrackAdded(e)},i.onVideoTextTrackAddedHandler=function(e){return i.onVideoTextTrackAdded(e)},i.onTextTrackChangeHandler=function(e){return i.onTextTrackChange(e)},i.onCueChangeHandler=function(e){return i.onCueChange(e)},i.system=t.system,i.config=t,i.video=e,i.pTextTracks=e.textTracks,i.currentTextTrackMode=t.textTrackSettings.mode,i.allowTextTrackCueDispatch=!t.textTrackSettings.native,i.processTracks=l.Util.debounce(i.processTracks.bind(i),100),i.addTracks=l.Util.debounce(i.addTracks.bind(i),25),i.addEvents(),i.logger=r,i.logger.log(n.LogLevel.INFO,"TextTrackSurface created"),i}r.TextTrackSurface=m},{"../../core/Emitter":84,"../../core/Util":88,"../../enum/LogLevel":107,"../enum/TextTrackEvents":193,"../enum/TextTrackMode":194,"../enum/TextTrackSurfaceEvents":195,"../enum/TextTrackType":196,"../util/SmpteToVttCueConverter":203,"es6-promise":25}],200:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ThumbnailTrackSurface=void 0;var p=e("../../core/Util"),i=e("../util/WebVTTParser"),o=(a.prototype.getCueAt=function(t){return p.Util.find(this.cues,function(e){return e.startTime<=t&&e.endTime>=t})},a.prototype.renderCueAt=function(e,t){a.renderThumbnail(this.getCueAt(e),t)},a.create=function(r){var e=document.createElement("a");e.href=r;var u=e.protocol+"//"+e.hostname,d=u+e.pathname.split("/").slice(0,-1).join("/")+"/";return p.Util.request({url:r}).then(function(e){var t=i.WebVTTParser.parse(e);return t.forEach(function(e){var t=e.text.split("#"),r=t[0],i=t[1],o=r;/^(https?:)?\/\//.test(o)||(o=/^\//.test(o)?u+o:d+o);var a=i.split("="),n=a[0],s=a[1].split(","),c={backgroundImage:"url("+o+")"},l={url:o};p.Util.forEach(n,function(e,t){var r=s[t];switch(e){case"w":l.width=parseInt(r),c.width=r+"px";break;case"h":l.height=parseInt(r),c.height=r+"px";break;case"x":l.x=parseInt(r),c.backgroundPositionX="-"+r+"px";break;case"y":l.y=parseInt(r),c.backgroundPositionY="-"+r+"px"}}),e.style=c,e.data=l}),new a(r,t)})},a.renderThumbnail=function(e,t){null!=e&&e.style&&null!=t&&t.style&&p.Util.assign(t.style,e.style)},a);function a(e,t){this.url=e,this.cues=t}r.ThumbnailTrackSurface=o},{"../../core/Util":88,"../util/WebVTTParser":204}],201:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebMafVideoSurface=void 0;var i,o=e("../../core/Emitter"),n=e("../../enum/LogLevel"),a=e("../../util/Timer"),s=e("../../util/Utils"),c=e("../enum/PlaybackAdapterEvents"),l=e("../enum/PlayStation"),u=e("../enum/TextTrackMode"),d=e("../enum/TextTrackSurfaceEvents"),p=e("../enum/VideoSurfaceEvents"),m=(i=o.Emitter,_(f,i),f.prototype.destroy=function(){this.callExternalWebMafApi('{"command":"stop"}'),this.timer.off(a.Timer.TIC_EVENT,this.onTicHandler),i.prototype.destroy.call(this)},f.prototype.play=function(){this.callExternalWebMafApi('{"command":"play"}')},f.prototype.pause=function(){this.callExternalWebMafApi('{"command":"pause"}')},f.prototype.seek=function(e){var t;this.seeking||(this.seeking=!0,t=Math.floor(e),this.callExternalWebMafApi('{"command":"setPlayTime","playTime":'+t+"}"),this.logger.log(n.LogLevel.INFO,"seeking to "+t),this.emit(p.VideoSurfaceEvents.SEEKING,{position:t}))},f.prototype.addEvents=function(){},Object.defineProperty(f.prototype,"startTime",{set:function(e){this.logger.log(n.LogLevel.INFO,"startTime set on webmaf "+e),this.pStartTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"volume",{get:function(){return 1},set:function(e){this.callExternalWebMafApi('{"command":"setVolume", "volume":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"muted",{get:function(){return!1},set:function(e){this.callExternalWebMafApi('{"command": "setVolume", "volume": 0.0}')},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"src",{set:function(e){this.callExternalWebMafApi(e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"video",{get:function(){return this.pVideo},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"framerate",{get:function(){return Number.NaN},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"metrics",{get:function(){return this.pMetrics},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"time",{get:function(){return this.pTime},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"duration",{get:function(){return this.pDuration},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"bufferLength",{get:function(){return this.pVideo.bufferedRange},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"buffering",{get:function(){return this.pState===l.PlayStation.BUFFERING},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"paused",{get:function(){return this.pState===l.PlayStation.PAUSED},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"state",{get:function(){return this.pState},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"masterBitrateProfile",{get:function(){return this.pMasterBitrateProfile},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"bitrate",{get:function(){return this.pBitrate},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"startingBitrate",{set:function(e){this.logger.log(n.LogLevel.INFO,"startingBitrate set on webmaf "+e),this.callExternalWebMafApi('{"command":"setVideoStartingBandwidth","bandwidth":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"minBitrate",{set:function(e){this.logger.log(n.LogLevel.INFO,"minBitrate set on webmaf "+e),this.callExternalWebMafApi('{"command":"setFixVideoRepresentations", "minBitrate":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maxBitrate",{set:function(e){this.logger.log(n.LogLevel.INFO,"maxBitrate set on webmaf "+e),this.callExternalWebMafApi('{"command":"setFixVideoRepresentations", "maxBitrate":'+e+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"audioTrack",{set:function(e){var t=this.audioTrackInfo.tracks[e.index].id;this.audioTrackUpdated=!0,this.callExternalWebMafApi('{"command":"setAudioTrack", "audioTrack":'+JSON.stringify(t)+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrackMode",{set:function(e){var t=e!==u.TextTrackMode.DISABLED;this.callExternalWebMafApi('{"command":"setClosedCaptions","enable": '+t+"}")},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrack",{set:function(e){this.callExternalWebMafApi('{"command":"setSubtitleTrack","subtitleTrack": '+JSON.stringify(e.language)+"}"),this.emit(d.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE,e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTrackSrc",{set:function(e){this.logger.log(n.LogLevel.INFO,"Sidecar text is not supported on playstation "+e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"textTracks",{get:function(){return[]},enumerable:!1,configurable:!0}),f.prototype.callExternalWebMafApi=function(e){this.global.external.user(e)},f.prototype.onTic=function(e){this.callExternalWebMafApi('{"command":"getPlaybackTime"}'),this.audioTrackUpdated&&(this.audioTrackUpdated=!1),this.updateMetrics()},f.prototype.onBitrateChange=function(e){var t=e/2,r=s.Utils.getIndexForBitrate(this.pMasterBitrateProfile,t,!1);this.logger.log(n.LogLevel.INFO,"bitrate change "+t),this.emit(c.PlaybackAdapterEvents.ABR_QUALITY_LOADED,{index:r})},f.prototype.updateMetrics=function(){this.metrics.poll(),this.pBitrate=this.metrics.currentBitrate/2},f.prototype.parseAudioInfo=function(e){for(var t=e.audioTracks.split(","),r=e.audioNumChannels.split(","),i={track:null,tracks:[]},o=0,a=t.length;o<a;o++){var n={index:o,id:t[o],type:r[o],lang:t[o],label:t[o],codec:""};i.tracks.push(n),t[o]===e.currentAudioTrack&&(i.track=n)}return i},f.prototype.accessfunction=function(e){var t=JSON.parse(e);switch(t.command){case l.PlayStation.GET_AUDIO_TRACKS:this.respondToAudioTrackInfo(t);break;case l.PlayStation.GET_VIDEO_REP_COUNT:this.respondToVideoRepCount(t);break;case l.PlayStation.GET_VIDEO_REP_INFO:this.respondToVideoRepInfo(t);break;case l.PlayStation.GET_SUBTITLE_TRACKS:this.respondToGetSubtitleTracks(t);break;case l.PlayStation.GET_PLAYBACK_TIME:this.respondToPlaybackTime(t);break;case l.PlayStation.NETWORK_STATUS_CHANGE:break;case l.PlayStation.CONTENT_AVAILABLE:this.respondToContentAvailable(t);break;case l.PlayStation.PLAYER_SUBTITLE:this.respondToPlayerSubtitle(t);break;case l.PlayStation.PLAYER_TIMED_EVENT:this.respondToTimedMetadataEvent(t);break;case l.PlayStation.PLAYER_STREAMING_ERROR:case l.PlayStation.PLAYER_ERROR:break;case l.PlayStation.PLAYER_STATUS_CHANGE:this.respondToPlayerStatusChange(t)}},f.prototype.respondToTimedMetadataEvent=function(e){this.emit(d.TextTrackSurfaceEvents.METADATA_CUEPOINT,{timestamp:e.timestamp,msg:e.data})},f.prototype.respondToGetSubtitleTracks=function(r){var i=this,e=r.subtitleTracks.split(",");e.forEach(function(e){var t;"und"===e?(i.logger.log(n.LogLevel.INFO,"timed metadata detected.",r),i.callExternalWebMafApi('{"command":"setTimedMetadata","enable":true}'),i.callExternalWebMafApi('{"command":"setSubtitleTrack","subtitleTrack":"und"}')):(t={language:e,kind:"subtitle",label:e},i.emit(d.TextTrackSurfaceEvents.TEXT_TRACK_ADDED,t),i.emit(d.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE,t))}),0<e.length&&this.emit(d.TextTrackSurfaceEvents.TEXT_TRACK_AVAILABLE)},f.prototype.respondToPlayerSubtitle=function(e){var t=e.text.split(";"),r=[];if(8<=t.length)if("action:caption_block"==t[6])for(var i=t.length/8,o=0;o<i;o++){var a=8*o;r.push({text:decodeURIComponent(escape(atob(t[7+a]))),x:t[0+a].split(":")[1],y:t[1+a].split(":")[1],r:t[2+a].split(":")[1],g:t[3+a].split(":")[1],b:t[4+a].split(":")[1]})}else this.logger.log(n.LogLevel.INFO,"no style info cea 608",e);else r.push({text:e.text});0<r.length&&this.emit(d.TextTrackSurfaceEvents.TEXT_CUEPOINT,{activeCues:r})},f.prototype.respondToContentAvailable=function(e){this.pDuration!==e.totalLength&&(this.pDuration=e.totalLength,this.emit(p.VideoSurfaceEvents.DURATION_CHANGE,{value:this.pDuration}))},f.prototype.respondToPlaybackTime=function(e){this.pTime!==e.elapsedTime&&e.elapsedTime<=e.totalTime&&(this.pTime=e.elapsedTime,this.emit(p.VideoSurfaceEvents.TIME_UPDATE,{value:this.pTime}),this.seeking&&(this.seeking=!1,this.emit(p.VideoSurfaceEvents.SEEKED)))},f.prototype.respondToVideoRepInfo=function(e){this.pMasterBitrateProfile.push(e),this.pMasterBitrateProfile.length===this.abrProfileCount&&this.emit(c.PlaybackAdapterEvents.MANIFEST_PARSED,this.pMasterBitrateProfile)},f.prototype.respondToVideoRepCount=function(e){this.abrProfileCount=e.count;for(var t=0;t<this.abrProfileCount;t++)this.callExternalWebMafApi('{"command":"getRepresentationInfo", "representation":'+t+"}")},f.prototype.respondToAudioTrackInfo=function(e){this.audioTrackInfo=this.parseAudioInfo(e),this.emit(c.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED,this.audioTrackInfo)},f.prototype.respondToPlayerStatusChange=function(e){switch(e.playerState){case l.PlayStation.BUFFERING:break;case l.PlayStation.READY:this.respondToPlayerStatusReady(e);break;case l.PlayStation.PAUSED:this.emit(p.VideoSurfaceEvents.PAUSE);break;case l.PlayStation.PLAYING:this.emit(p.VideoSurfaceEvents.PLAYING);break;case l.PlayStation.DISPLAYING_VIDEO:this.timer.started||this.timer.start();break;case l.PlayStation.END_OF_STREAM:this.respondToPlayerStatusEOS()}this.pState=e.playerState},f.prototype.respondToPlayerStatusEOS=function(){this.timer.started&&this.timer.stop(),this.emit(p.VideoSurfaceEvents.ENDED)},f.prototype.respondToPlayerStatusReady=function(e){this.emit(p.VideoSurfaceEvents.CAN_PLAY_THROUGH),this.callExternalWebMafApi('{"command":"getRepresentationsCount"}'),this.callExternalWebMafApi('{"command":"getSubtitleTracks"}'),isNaN(this.pStartTime)||this.seek(this.pStartTime)},f);function f(e,t){var r=i.call(this)||this;return r.onTicHandler=function(e){return r.onTic(e)},r.pTime=0,r.pDuration=0,r.pBitrate=0,r.abrProfileCount=0,r.pMasterBitrateProfile=[],r.audioTrackUpdated=!1,r.pStartTime=NaN,r.seeking=!1,r.logger=t,r.timer=new a.Timer(500),r.timer.on(a.Timer.TIC_EVENT,r.onTicHandler),r.config=e,r.logger.log(n.LogLevel.WARN,""+r.config),r.global=e.system.global,r.pVideo=r.global.WM_videoPlayer,r.global.accessfunction=function(e){return r.accessfunction(e)},r.pMetrics=r.global.videometrics,r.pMetrics.onBitrateChange=function(e){return r.onBitrateChange(e)},r.callExternalWebMafApi('{"command":"setAdaptiveStreamingParameters", "bandwidthHistoryMaxEntries":30,  "bandwidthHistoryMinEntries": 1,  "bandwidthUtilisationPercentage": 80,  "segmentsBetweenSwitchUp": 5}'),r.logger&&(r.pVideo.TTY=function(e){r.logger.log(n.LogLevel.INFO,e)},r.pVideo.TTYLevel=0),r}r.WebMafVideoSurface=m},{"../../core/Emitter":84,"../../enum/LogLevel":107,"../../util/Timer":219,"../../util/Utils":220,"../enum/PlayStation":187,"../enum/PlaybackAdapterEvents":189,"../enum/TextTrackMode":194,"../enum/TextTrackSurfaceEvents":195,"../enum/VideoSurfaceEvents":197}],202:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FairPlay=void 0;var o,c=e("../../app/AppResources"),i=e("../../core/Emitter"),a=e("../../core/QueryString"),n=e("../../core/Util"),s=e("../../dataservice/AsyncDataRequest"),l=e("../../dataservice/AsyncDataRequestOptions"),u=e("../../enum/ErrorCode"),d=e("../../enum/LogLevel"),p=e("../../enum/ServiceName"),m=e("../../enum/XhrResponseType"),f=e("../../service/SystemService"),y=e("../../util/enum/DrmType"),h=e("../enum/DrmVendor"),E=e("../enum/PlaybackAdapterEvents"),A=e("../enum/VideoSurfaceEvents"),T=(o=i.Emitter,_(v,o),v.prototype.initialize=function(){var t=this,e=l.AsyncDataRequestOptions.create({url:this.drmInfo.fairplay.appCertUrl,method:"GET",responseType:m.XhrResponseType.ARRAY_BUFFER,onComplete:function(e){return t.onAppCertLoaded(e)},errorRecovery:{}});new s.AsyncDataRequest(e)},v.prototype.destroy=function(){this.videoSurface.off(A.VideoSurfaceEvents.WEBKIT_NEED_KEY,this.webkitNeedKeyHandler)},v.prototype.onAppCertLoaded=function(e){this.appCertData=new Uint8Array(e.data.response),this.appCertLoaded=!0,this.webKitNeedKeyCalled&&this.initializeFairplayCDM()},v.prototype.onWebkitNeedKey=function(e){this.initData=e.data.initData,this.webKitNeedKeyCalled=!0,this.appCertLoaded&&this.initializeFairplayCDM()},v.prototype.onLicenseRequestReady=function(e,t){this.drmVendor=this.getDrmVendor(e);var r=new XMLHttpRequest;r.session=t.target,r.addEventListener("load",this.onLicenseLoaded.bind(this),!1),r.open("POST",e,!0),r.responseType=this.drmVendor===h.DrmVendor.IRDETO?m.XhrResponseType.ARRAY_BUFFER:m.XhrResponseType.TEXT;var i="spc="+encodeURIComponent(n.Util.base64EncodeUint8Array(t.message))+"&"+r.session.contentId;(r=this.setRequestHeaders(r)).send(i)},v.prototype.setRequestHeaders=function(e){if(e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),!n.Util.isEmpty(this.drmInfo.fairplay.header)){var t=this.drmInfo.fairplay.header;for(var r in t){var i=t[r];e.setRequestHeader(r,i)}}return e},v.prototype.onLicenseLoaded=function(e){var t=e.target,r=t.session;n.Util.inRange(t.status,200,400)||this.throwFatalError(u.ErrorCode.FAIRPLAY_LIC_ERROR,c.AppResources.messages.FAIRPLAY_LICENSE_ERROR);var i="arraybuffer"!==t.responseType?n.Util.base64DecodeUint8Array(t.responseText):new Uint8Array(t.response);r.update(i)},v.prototype.onWebkitKeyAdded=function(e){this.logger.log(d.LogLevel.INFO,c.AppResources.messages.WEBKIT_KEY_ADDED_SUCCESS)},v.prototype.onWebkitError=function(e){this.throwFatalError(u.ErrorCode.FAIRPLAY_LIC_ERROR,""+c.AppResources.messages.FAIRPLAY_LICENSE_ERROR)},v.prototype.initializeFairplayCDM=function(){var e=this.getLicenseServerUrl(this.initData),t=this.getId(e),r=this.videoSurface.video,i=f.SystemService.getInstance(p.ServiceName.System).global,o=c.AppResources.messages;if(t){if(!r.webkitKeys){var a=y.DrmType.FAIRPLAY_1_0;if(!i.WebKitMediaKeys.isTypeSupported(a,"video/mp4"))return void this.throwFatalError(u.ErrorCode.FAIRPLAY_APP_CERT_ERROR,o.FAIRPLAY_WEBKIT_ERROR);try{r.webkitSetMediaKeys(new i.WebKitMediaKeys(a))}catch(e){return void this.throwFatalError(u.ErrorCode.FAIRPLAY_APP_CERT_ERROR,e.message)}}var n=this.concatInitDataIdAndCertificate(this.initData,t,this.appCertData),s=r.webkitKeys.createSession("video/mp4",n);s?(s.contentId=t,s.addEventListener(this.WEBKIT_KEY_MESSAGE,this.onLicenseRequestReady.bind(this,e),!1),s.addEventListener(this.WEBKIT_KEY_ADDED,this.onWebkitKeyAdded.bind(this),!1),s.addEventListener(this.WEBKIT_KEY_ERROR,this.onWebkitError.bind(this),!1)):this.throwFatalError(u.ErrorCode.FAIRPLAY_APP_CERT_ERROR,o.FAIRPLAY_WEBKIT_ERROR)}else this.throwFatalError(u.ErrorCode.FAIRPLAY_APP_CERT_ERROR,o.FAIRPLAY_NO_CONTENT_ID)},v.prototype.concatInitDataIdAndCertificate=function(e,t,r){"string"==typeof t&&(t=this.stringToArray(t));var i=0,o=new ArrayBuffer(e.byteLength+4+t.byteLength+4+r.byteLength),a=new DataView(o);new Uint8Array(o,0,e.byteLength).set(e),i+=e.byteLength,a.setUint32(i,t.byteLength,!0),i+=4;var n=new Uint8Array(o,i,t.byteLength);return n.set(t),i+=n.byteLength,a.setUint32(i,r.byteLength,!0),i+=4,new Uint8Array(o,i,r.byteLength).set(r),new Uint8Array(o,0,o.byteLength)},v.prototype.getLicenseServerUrl=function(e){var t=null;return t=n.Util.isEmpty(this.drmInfo.fairplay.licenseUrl)?"https://"+String.fromCharCode.apply(null,new Uint16Array(e.buffer)).split("://")[1]:this.drmInfo.fairplay.licenseUrl,this.drmInfo.sessionId&&(t=a.QueryString.append(t,{SessionId:this.drmInfo.sessionId})),this.drmInfo.ticket&&(t=a.QueryString.append(t,{Ticket:this.drmInfo.ticket})),t},v.prototype.getId=function(e){var t=a.QueryString.decode(e);return t.ContentId||t.contentId||t.assetId||null},v.prototype.getDrmVendor=function(e){var t=h.DrmVendor.UNKNOWN;return-1!==e.indexOf(h.DrmVendor.IRDETO)?t=h.DrmVendor.IRDETO:-1!==e.indexOf(h.DrmVendor.DRM_TODAY)&&(t=h.DrmVendor.DRM_TODAY),t},v.prototype.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,o=e.length;i<o;i++)r[i]=e.charCodeAt(i);return r},v.prototype.throwFatalError=function(e,t){this.logger.log(d.LogLevel.ERROR,e,t),this.emit(E.PlaybackAdapterEvents.ERROR,{code:e,message:t,fatal:!0})},v);function v(e,t,r){var i=o.call(this)||this;return i.WEBKIT_KEY_MESSAGE="webkitkeymessage",i.WEBKIT_KEY_ADDED="webkitkeyadded",i.WEBKIT_KEY_ERROR="webkitkeyerror",i.appCertLoaded=!1,i.webKitNeedKeyCalled=!1,i.webkitNeedKeyHandler=function(e){return i.onWebkitNeedKey(e)},i.drmInfo=t.resource.location.drm,i.videoSurface=e,i.videoSurface.on(A.VideoSurfaceEvents.WEBKIT_NEED_KEY,i.webkitNeedKeyHandler),i.logger=r,i}r.FairPlay=T},{"../../app/AppResources":47,"../../core/Emitter":84,"../../core/QueryString":87,"../../core/Util":88,"../../dataservice/AsyncDataRequest":90,"../../dataservice/AsyncDataRequestOptions":91,"../../enum/ErrorCode":102,"../../enum/LogLevel":107,"../../enum/ServiceName":125,"../../enum/XhrResponseType":129,"../../service/SystemService":214,"../../util/enum/DrmType":223,"../enum/DrmVendor":184,"../enum/PlaybackAdapterEvents":189,"../enum/VideoSurfaceEvents":197}],203:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SmpteToVttCueConverter=void 0;var i=e("es6-promise"),u=e("../../core/Util"),o=e("../../dataservice/AsyncDataRequest"),a=e("../../dataservice/AsyncDataRequestOptions"),n=e("../../enum/Browser"),s=e("../../enum/XhrResponseType"),c=(l.prototype.convert=function(){var a=this;return new i.Promise(function(i,o){a.loadXml(a.url).then(function(e){var t=u.Util.xmlToJson(e).tt.body.div.p;if(t&&0<t.length){var r=a.convertToVTTCues(t);return i(r)}return o(null)}).catch(function(e){return o(null)})})},l.prototype.loadXml=function(e){return new i.Promise(function(t,r){new o.AsyncDataRequest(a.AsyncDataRequestOptions.create({url:e,method:"GET",responseType:s.XhrResponseType.DOCUMENT,onComplete:function(e){return e.data.error?r(null):t(e.data.response)},errorRecovery:{}}))})},l.prototype.convertToVTTCues=function(e){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r],a=o.text;if(!u.Util.isEmpty(a)){a=(a=(a=a.replace(/(.*)<span.*tts:fontStyle="italic">(.*)<\/span>(.*)/g,"$1<i>$2</i>$3")).replace(/(.*)<span.*tts:fontWeight="bold">(.*)<\/span>(.*)/g,"$1<b>$2</b>$3")).replace(/(.*)<span.*tts:textDecoration="under">(.*)<\/span>(.*)/g,"$1<u>$2</u>$3");var n=u.Util.getNumLines(a);o._lineCountPrev=o._lineCountPrev||0,o._lineCountNext=o._lineCountNext||0;for(var s=r+1,c=e[s];(c&&c.begin)===o.begin;)c._lineCountPrev=n+o._lineCountNext,o._lineCountNext+=u.Util.getNumLines(c.text),c=e[++s];var l=new(this.isVTTCueSupported?this.system.global.VTTCue:this.system.global.TextTrackCue)(u.Util.hmsToSec(o.begin),u.Util.hmsToSec(o.end),a);this.isVTTCueSupported&&(l=this.metadataToPosition(o,l)),t.push(l)}}return t},l.prototype.metadataToPosition=function(e,t){var r=e.metadata;if(r){t.snapToLines=!0;var i=Math.round(r.cccol/35*100);t.position=i;try{t.align=i<45?"start":55<i?"end":this.getAlignString()}catch(e){t.align="center"}t.positionAlign=i<45?"line-left":55<i?"line-right":"center",t.line=r.ccrow-17+this.getLineOffset()}return t},l.prototype.getAlignString=function(){return this.system.browser===n.Browser.SAFARI?"middle":"center"},l.prototype.getLineOffset=function(){return this.system.browser===n.Browser.SAFARI?-1:0},l);function l(e,t){this.url=e,this.system=t,this.isVTTCueSupported=void 0!==this.system.global.VTTCue}r.SmpteToVttCueConverter=c},{"../../core/Util":88,"../../dataservice/AsyncDataRequest":90,"../../dataservice/AsyncDataRequestOptions":91,"../../enum/Browser":98,"../../enum/XhrResponseType":129,"es6-promise":25}],204:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WebVTTParser=void 0;var u=e("../../core/Util"),i=(o.parseCaption=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i={});var r=e.trim().split("\n"),o=/([0-9:.]+)\s*-->\s*([0-9:.]+)([^\n]*)/;try{o.test(r[0])||(t=parseInt(r.shift()));var a=r[0].match(o).slice(1),n=a[2],s=u.Util.hmsToSec(a[0]),c=u.Util.hmsToSec(a[1]),l=r.slice(1).join("\n");return null!=n&&n.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-%]+)/g,function(e,t,r){return i[t]=r}),C({id:t,startTime:s,endTime:c,text:l},i)}catch(e){return null}},o.parse=function(e){var i=this,t=(e=e.replace(/\r/g,"")).split("\n\n"),o=/^(WEBVTT|NOTE|STYLE)/;return t.reduce(function(e,t){var r;return o.test(t)||!t||(r=i.parseCaption(t,e.length))&&e.push(r),e},[])},o);function o(){}r.WebVTTParser=i},{"../../core/Util":88}],205:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AutoplayCapabilitiesService=void 0;var i,s=e("../enum/Browser"),o=e("../enum/Os"),a=e("./ServiceBase"),n=e("../app/AppResources"),c=e("../enum/ServiceName"),l=e("es6-promise"),u=(i=a.ServiceBase,_(d,i),d.prototype.detectCapabilities=function(){var t=this;return new l.Promise(function(e){t.checkCompleted?e(t.info):(t.createTestDom(),t.internalCallback=function(){return e(t.info)},t.checkUnmutedAutoplay())})},d.prototype.finishCheck=function(e,t){var r=this;this.setInfo(e,t),this.checkCompleted=!0,this.internalCallback(),setTimeout(function(){return r.cleanUp()},100)},d.prototype.setInfo=function(e,t){this.info.supportsUnmutedAutoplay=e,this.info.supportsMutedAutoplay=t},d.prototype.cleanUp=function(){this.testDom&&this.testDom.parentNode.removeChild(this.testDom),this.testDom=null},d.prototype.checkUnmutedAutoplay=function(){var e,t=this,r=this.createVideoElement(!1);r?(r.load(),void 0===(e=r.play())?this.isMobile?this.detectMobileCapabilities():this.finishCheck(!0,!0):e.then(function(){t.finishCheck(!0,!0)}).catch(function(e){t.checkMutedAutoplay()})):this.finishCheck(!0,!0)},d.prototype.checkMutedAutoplay=function(){var e,t=this;this.isEarlySafari11()?this.finishCheck(!1,!1):((e=this.createVideoElement(!0)).load(),e.play().then(function(){t.finishCheck(!1,!0)}).catch(function(e){t.finishCheck(!1,!1)}))},d.prototype.isEarlySafari11=function(){var e=this.sysInfo,t=e.browser===s.Browser.SAFARI&&"desktop"===e.device,r=t?e.browserVersionInfo.majorVersion:null,i=t?e.browserVersionInfo.minorVersion:null,o=11===r&&0===i,a=e.browserVersionInfo.versionString,n=a?a.split("."):null;return o&&(!n[2]||parseInt(n[2])<3)},d.prototype.detectMobileCapabilities=function(){var e=this.isAutoplayEligibleAndroid()||this.isAutoplayEligibleIos();this.finishCheck(!1,e)},d.prototype.isAutoplayEligibleAndroid=function(){var e=this.sysInfo;return e.os===o.Os.ANDROID&&e.browser===s.Browser.CHROME&&this.isChromeAutoplayEligible()},d.prototype.isAutoplayEligibleIos=function(){var e=this.sysInfo,t=e.os===o.Os.IOS&&10<=e.browserVersionInfo.majorVersion,r=t&&e.browser===s.Browser.SAFARI,i=t&&!r&&(e.browser===s.Browser.CHROME_IOS||e.browser===s.Browser.CHROME)&&this.isChromeAutoplayEligible();return r||i},d.prototype.isChromeAutoplayEligible=function(){return 54<=this.sysInfo.browserVersionInfo.majorVersion},d.prototype.createVideoElement=function(e){var t=this.document;if(!t)return null;var r=t.createElement("video");return e&&(r.muted=!0,r.setAttribute("muted","muted"),r.setAttribute("playsinline","playsinline")),r.volume=.005,r.style.width="100%",r.style.height="100%",r.src=this.testVideoSrc,this.testDom.appendChild(r),r},d.prototype.createTestDom=function(){var e=this.document;if(!this.document)return null;var t=e.createElement("div"),r=t.style;return r.position="absolute",r.top="-1000px",r.left="-1000px",r.width="400px",r.height="225px",e.body.appendChild(t),this.testDom=t},Object.defineProperty(d.prototype,"sysInfo",{get:function(){return this.getService(c.ServiceName.System)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"document",{get:function(){return this.sysInfo.document||null},enumerable:!1,configurable:!0}),d);function d(e){var t=i.call(this,e)||this;return t.testDom=null,t.checkCompleted=!1,t.isMobile=null,t.testVideoSrc=n.AppResources.blankVideoUrl,t.info={supportsUnmutedAutoplay:null,supportsMutedAutoplay:null},t}r.AutoplayCapabilitiesService=u},{"../app/AppResources":47,"../enum/Browser":98,"../enum/Os":116,"../enum/ServiceName":125,"./ServiceBase":212,"es6-promise":25}],206:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BuildInfoService=void 0;var i,o=e("./ServiceBase"),a=(i=o.ServiceBase,_(n,i),n.getInstance=function(e,t){return this.instance||(this.instance=new n(e,t)),this.instance},Object.defineProperty(n.prototype,"env",{get:function(){return this.pBuildInfo.env},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playerName",{get:function(){return this.pBuildInfo.playerName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"playerVersion",{get:function(){return this.pBuildInfo.playerVersion},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"buildTime",{get:function(){return this.pBuildInfo.buildTime},enumerable:!1,configurable:!0}),n.prototype.toObject=function(){return{env:this.pBuildInfo.env,playerName:this.pBuildInfo.playerName,playerVersion:this.pBuildInfo.playerVersion,buildTime:this.pBuildInfo.buildTime}},n);function n(e,t){var r=i.call(this,e)||this;return r.pBuildInfo=t,r}r.BuildInfoService=a},{"./ServiceBase":212}],207:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DaiAdService=void 0;var s,c=e("../enum/AdContext"),i=e("../enum/ServiceName"),o=e("./GamAdService"),a=(s=o.GamAdService,_(n,s),n.prototype.destroy=function(){this.streamMgr&&this.streamMgr.reset(),this.streamMgr=null,this.pSdk=null,this.videoIface=null,s.prototype.destroy.call(this)},n.prototype.initViewabilityTracking=function(){this.createViewabilityTracker()},Object.defineProperty(n.prototype,"videoInterface",{get:function(){return this.videoIface},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"usesDaiApi",{get:function(){return this.usesApi},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sdk",{get:function(){var e;return this.pSdk||(e=this.getService(i.ServiceName.System).global)&&e.google&&e.google.ima&&e.google.ima.dai&&(this.pSdk=e.google.ima.dai.api),this.pSdk},enumerable:!1,configurable:!0}),n.prototype.setVideoInterface=function(e){this.videoIface=e},n.prototype.setVolume=function(e){this.usesApi&&(this.videoIface.volume=e)},n.prototype.setMuted=function(e){this.usesApi&&(this.videoIface.muted=e)},n.prototype.setDuration=function(e){this.usesApi&&(this.videoIface.duration=e)},n.prototype.setCurrentTime=function(e){this.usesApi&&(this.videoIface.currentTime=e)},n.prototype.reset=function(){this.streamMgr.reset(),this.usesApi&&(this.videoIface.duration=NaN,this.videoIface.currentTime=NaN)},n.prototype.assembleAdInfo=function(e,t){if(this.adContext===c.AdContext.DAI_SDK)return s.prototype.assembleAdInfo.call(this,e,t);var r=e.getAdPodInfo(),i=r&&r.getAdPosition()||-1,o=e.getDaiWrapperData(),a=o.adId,n=o.creativeId;return{adServerName:this.adContext,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:a,adPosition:i,adAssetUrl:t.mediaUrl||null,isVpaid:!1,wrapperAdId:a,creativeId:n,wrapperCreativeId:n,vastMediaHeight:null,vastMediaWidth:null,vastMediaBitrate:null}},n.prototype.getStreamManager=function(){return!this.streamMgr&&this.sdk&&(this.usesApi?this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer,this.getLogger()):this.streamMgr=new this.sdk.StreamManager(this.videoIface,this.adContainer)),this.streamMgr},n);function n(e,t){var r=s.call(this,e,t?c.AdContext.DAI_API:c.AdContext.DAI_SDK)||this;return r.pSdk=null,r.usesApi=!1,r.videoIface=null,t&&(r.pSdk=t,r.usesApi=!0),r}r.DaiAdService=a},{"../enum/AdContext":96,"../enum/ServiceName":125,"./GamAdService":208}],208:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GamAdService=void 0;var i,o=e("../ad/MoatTracker"),a=e("../enum/AdBreakType"),n=e("../enum/AdContext"),s=e("../enum/ServiceName"),c=e("./ServiceBase"),l=(i=c.ServiceBase,_(u,i),u.prototype.destroy=function(){this.moatTracker&&this.moatTracker.destroy(),this.moatTracker=null,this.adContainer=null,this.trackingData=null,i.prototype.destroy.call(this)},u.prototype.getGamPlatformString=function(){return this.getService(s.ServiceName.System).isDesktop?"desktop":"mobile_web"},u.prototype.setTrackingData=function(e){this.trackingData=e},u.prototype.getAdContext=function(){return this.adContext},u.prototype.setContainer=function(e){this.adContainer=e},u.prototype.getAdBreakTypeFromPodIndex=function(e){return 0===e?a.AdBreakType.PRE:-1===e?a.AdBreakType.POST:a.AdBreakType.MID},u.prototype.assembleAdBreakInfo=function(e){var t=e.getAdPodInfo(),r=t.getPodIndex();return{adBreakDuration:t.getMaxDuration(),adBreakPosition:r,adTotal:t.getTotalAds(),adBreakType:this.getAdBreakTypeFromPodIndex(r),adServerName:this.adContext}},u.prototype.assembleAdInfo=function(e,t){var r=e.getAdPodInfo(),i=r&&r.getAdPosition()||-1,o=this.getIdInfo(e),a=this.adContext===n.AdContext.IMA;return{adServerName:this.adContext,adDuration:e.getDuration(),adTitle:e.getTitle(),adId:o.adId,adPosition:i,adAssetUrl:a?e.getMediaUrl():t.mediaUrl||null,isVpaid:a?this.getIsVpaid(e):null,wrapperAdId:o.wrapperAdId,creativeId:o.creativeId,wrapperCreativeId:o.wrapperCreativeId,vastMediaHeight:a?e.getVastMediaHeight():null,vastMediaWidth:a?e.getVastMediaWidth():null,vastMediaBitrate:a?e.getVastMediaBitrate():null}},u.prototype.trackAd=function(e){var t=this.trackingData;this.moatTracker.track({viewGuid:t.vguid,pageType:t.ptype,adInfo:e,adVideoContainer:this.adContainer,context:this.adContext,partner:t.partner})},u.prototype.trackAdEvent=function(e){this.moatTracker.trackEvent(e)},u.prototype.untrackAd=function(){this.moatTracker.untrack()},u.prototype.createViewabilityTracker=function(){this.moatTracker=new o.MoatTracker},u.prototype.getIdInfo=function(e){var t=this.getWrapperId(e),r=this.getCreativeId(e);return{adId:t.adId,wrapperAdId:t.wrapperAdId,creativeId:r.creativeId,wrapperCreativeId:r.wrapperCreativeId,adServerName:n.AdContext.IMA,adDuration:e.getDuration()}},u.prototype.getWrapperId=function(e){var t=e.getWrapperAdIds(),r=Array.isArray(t)&&t.length,i=e.getAdId()||"";return{adId:r&&1<r?t[0]:i,wrapperAdId:r&&1<r?t[1]:""}},u.prototype.getCreativeId=function(e){var t=e.getWrapperCreativeIds(),r=Array.isArray(t)&&t.length,i=e.getCreativeId()||null;return{creativeId:r&&1<r?t[0]:i,wrapperCreativeId:r&&1<r?t[1]:null}},u.prototype.getIsVpaid=function(e){return"application/javascript"===e.getContentType()},u);function u(e,t){var r=i.call(this,e)||this;return r.adContext=t,r}r.GamAdService=l},{"../ad/MoatTracker":37,"../enum/AdBreakType":95,"../enum/AdContext":96,"../enum/ServiceName":125,"./ServiceBase":212}],209:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImaAdService=void 0;var i,o=e("../ad/ImaAdsLoader"),a=e("../core/Util"),n=e("../enum/AdContext"),s=e("../enum/ImaVpaidMode"),c=e("../enum/ServiceName"),l=e("./GamAdService"),u=(i=l.GamAdService,_(d,i),d.prototype.destroy=function(){this.pAdsLoader&&this.pAdsLoader.destroy(),this.pAdsLoader=null,this.pAdsLoaderOptions=null,i.prototype.destroy.call(this)},Object.defineProperty(d.prototype,"sdk",{get:function(){var e=this.getService(c.ServiceName.System).global;return e&&e.google&&e.google.ima||null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sdkSettings",{get:function(){var e=this.getService(c.ServiceName.BuildInfo);return{vpaidMode:s.ImaVpaidMode.INSECURE,disableCustomPlaybackForIOS10Plus:!1,playerType:e.playerName,playerVersion:e.playerVersion}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"defaultRenderingSettings",{get:function(){return{bitrate:900,enablePreloading:!1,loadVideoTimeout:-1,playAdsAfterTime:void 0,restoreCustomPlaybackStateOnAdBreakComplete:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"adsLoaderOptions",{set:function(e){this.pAdsLoaderOptions=e},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"adsLoader",{get:function(){return this.pAdsLoader},enumerable:!1,configurable:!0}),d.prototype.createAdsLoader=function(){this.pAdsLoader||(this.pAdsLoader=new o.ImaAdsLoader(this.pAdsLoaderOptions))},d.prototype.initializeAdsLoader=function(){return this.createViewabilityTracker(),this.pAdsLoader.initialize()},d.prototype.parseAdError=function(e){var t=e.getError(),r=e.getUserRequestContext(),i=t.getInnerError();return{type:this.getAdErrorType(t),errorCode:t.getErrorCode(),vastErrorCode:t.getVastErrorCode(),message:t.getMessage(),innerErrorMessage:a.Util.isString(i)?i:null,sdkVersion:this.sdk.VERSION,requestContext:r||null}},d.prototype.getAdErrorType=function(e){return e.getType()==this.sdk.AdError.Type.AD_LOAD?"adLoad":"adPlay"},d);function d(e){return i.call(this,e,n.AdContext.IMA)||this}r.ImaAdService=u},{"../ad/ImaAdsLoader":36,"../core/Util":88,"../enum/AdContext":96,"../enum/ImaVpaidMode":103,"../enum/ServiceName":125,"./GamAdService":208}],210:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LogService=void 0;var i,o=e("./ServiceBase"),a=(i=o.ServiceBase,_(n,i),n.prototype.destroy=function(){this.pLogger.destroy(),this.pLogger=null},Object.defineProperty(n.prototype,"logger",{get:function(){return this.pLogger},enumerable:!1,configurable:!0}),n);function n(e,t){var r=i.call(this,e)||this;return r.pLogger=t,r}r.LogService=a},{"./ServiceBase":212}],211:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MediaCapabilitiesService=void 0;var i,o=e("./ServiceBase"),a=(i=o.ServiceBase,_(n,i),n.getInstance=function(e,t){return this.instance||(this.instance=new n(e,t)),this.instance},Object.defineProperty(n.prototype,"capabilities",{get:function(){return this.mediaCaps.capabilities},enumerable:!1,configurable:!0}),n);function n(e,t){var r=i.call(this,e)||this;return r.mediaCaps=t,r}r.MediaCapabilitiesService=a},{"./ServiceBase":212}],212:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServiceBase=void 0;var i=e("../enum/ServiceName"),o=e("../mvc/Facade"),a=(Object.defineProperty(n.prototype,"name",{get:function(){return this.pName},enumerable:!1,configurable:!0}),n.prototype.destroy=function(){},n.prototype.onRegister=function(e){this.facadeKey=e},n.prototype.getLogger=function(){return this.getService(i.ServiceName.Logging).logger},n.prototype.getService=function(e){return o.Facade.getInstance(this.facadeKey).retrieveService(e)},n);function n(e){this.pName=e}r.ServiceBase=a},{"../enum/ServiceName":125,"../mvc/Facade":165}],213:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ServiceContainer=void 0;var i=e("../mvc/MvcMessages"),o=e("../core/Logger"),a=(n.getInstance=function(e){return e?(null==this.serviceContainerMap[e]&&(this.serviceContainerMap[e]=new n(e)),this.serviceContainerMap[e]):null},n.removeServiceContainer=function(e){this.serviceContainerMap[e]&&this.serviceContainerMap[e].destroy(),delete this.serviceContainerMap[e]},n.prototype.destroy=function(){for(var e in this.serviceMap)this.removeService(e);this.serviceMap=null},n.prototype.registerService=function(e){(this.serviceMap[e.name]=e).onRegister(this.multiCoreKey)},n.prototype.retrieveService=function(e){return this.serviceMap[e]||null},n.prototype.hasService=function(e){return null!=this.serviceMap[e]},n.prototype.removeService=function(e){this.serviceMap[e]&&this.serviceMap[e].destroy(),delete this.serviceMap[e]},n.serviceContainerMap={},n);function n(e){n.serviceContainerMap[e]?o.Logger.error(i.MvcMessages.ERROR_KEY_EXISTS.replace("$ACTOR_NAME$","ServiceContainer")):(this.multiCoreKey=e,this.serviceMap={})}r.ServiceContainer=a},{"../core/Logger":86,"../mvc/MvcMessages":167}],214:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SystemService=void 0;var i,o=e("../enum/Device"),a=e("../enum/Os"),n=e("../util/System"),s=e("../util/VirtualVideoElement"),c=e("./ServiceBase"),l=(i=c.ServiceBase,_(u,i),u.getInstance=function(e){return this.instance||(this.instance=new u(e)),this.instance},Object.defineProperty(u.prototype,"info",{get:function(){return n.System.info},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"webMafPlayer",{get:function(){return this.isWebMaf?this.global.WM_videoPlayer:null},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isWebMaf",{get:function(){return!(!this.global||!this.global.WM_videoPlayer)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isWebOs",{get:function(){return this.info.os===a.Os.WEBOS},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"global",{get:function(){return n.System.global},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"document",{get:function(){return this.global&&(this.global.document||null)},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isDesktop",{get:function(){var e=this,t=this.checkCache("isDesktop");return void 0!==t?t:this.cache("isDesktop",function(){return e.info.device===o.Device.DESKTOP})},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isMobile",{get:function(){return!this.isDesktop},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isTv",{get:function(){switch(this.device){case o.Device.LG_SMART_TV:case o.Device.VIZIO_SMART_TV:case o.Device.SAMSUNG_SMART_TV:case o.Device.COMCAST_X1:return!0;default:return!1}},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isTizenSmartTv",{get:function(){return this.device===o.Device.SAMSUNG_SMART_TV},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isXboxOne",{get:function(){return this.device===o.Device.XBOX_ONE},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isEmbedded",{get:function(){return this.device==o.Device.EMBEDDED},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"browser",{get:function(){return this.info.browser},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"os",{get:function(){return this.info.os},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"device",{get:function(){return this.info.device},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"platform",{get:function(){return this.info.platform},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isIos",{get:function(){return this.info.os===a.Os.IOS},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"isAndroid",{get:function(){var t=this,e=this.checkCache("isAndroid");return void 0!==e?e:this.cache("isAndroid",function(){var e=t.info;return e.device===o.Device.ANDROID_PHONE||e.device===a.Os.ANDROID})},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"browserVersionInfo",{get:function(){var e=this,t="browserVersionInfo",r=this.checkCache(t);return void 0!==r?r:this.cache(t,function(){return e.parseVerStr(e.info.browserVersion)})},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"osVersionInfo",{get:function(){var e=this,t="osVersionInfo",r=this.checkCache(t);return void 0!==r?r:this.cache(t,function(){return e.parseVerStr(e.info.osVersion)})},enumerable:!1,configurable:!0}),u.prototype.createSimpleVideoInterface=function(){return new s.VirtualVideoElement},u.prototype.cache=function(e,t){return this.infoCache[e]=t(),this.infoCache[e]},u.prototype.checkCache=function(e){return e in this.infoCache?this.infoCache[e]:void 0},u.prototype.parseVerStr=function(e){var t,r,i,o={majorVersion:null,minorVersion:null,versionString:e||null};return e&&(t=e.split("."),r=parseInt(t[0],10),i=parseInt(t[1],10),isNaN(r)||(o.majorVersion=r),isNaN(i)||(o.minorVersion=i)),o},u);function u(e){var t=i.call(this,e)||this;return t.infoCache={},t}r.SystemService=l},{"../enum/Device":99,"../enum/Os":116,"../util/System":218,"../util/VirtualVideoElement":221,"./ServiceBase":212}],215:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.KeyCode=void 0,r.KeyCode={ALT:18,BACKSPACE:8,CAPS_LOCK:20,CONTROL:17,END:35,ENTER:13,TAB:9,SHIFT:16,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,SPACE:32,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL:110,DIVIDE:111,SEMICOLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,BACKSLASH:220,GRAVE_ACCENT:192,OPEN_BRACKET:219,CLOSE_BRACKET:221,SINGLE_QUOTE:222,MEDIA_TOGGLE_PLAY:179,MEDIA_TOGGLE_MUTE:173,MEDIA_STOP:178,MEDIA_INCREASE_VOLUME:175,MEDIA_INCREASE_VOLUME_ALT:183,MEDIA_DECREASE_VOLUME:174,MEDIA_DECREASE_VOLUME_ALT:182,MEDIA_PLAYLIST_NEXT:176,MEDIA_PLAYLIST_PREV:177}},{}],216:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MediaCapabilities=void 0;var i,o=e("../core/Emitter"),a=e("../core/Util"),n=e("./config/MediaDecodeConfigs"),s=e("./enum/MediaCapabilitiesCodec"),c=e("./enum/MediaCapabilitiesMimeType"),l=e("./System"),u=(i=o.Emitter,_(d,i),d.prototype.destroy=function(){i.prototype.destroy.call(this)},Object.defineProperty(d.prototype,"capabilities",{get:function(){return this.pCapabilities},enumerable:!1,configurable:!0}),d.prototype.getCapabilities=function(){var r=this,i={mediaDecodeCapabilitiesResults:[],drmCapabilitiesResults:[],hasMediaSource:this.hasMediaSource,hasEncryptedMediaSource:this.hasEncryptedMediaSource,isWebKit:this.isWebKit,supportsVp8:this.supportsVp8,supportsMediaDecodeConfigurations:this.supportsMediaDecodeConfigurations,supportsNativeHls:this.isTypeSupported(this.types.video.HLS),supportsRequestMediaKeySystemAccess:this.supportsRequestMediaKeySystemAccess,supportsAvc:!1,supportsHevc:!1,supportsWebM:!1,supportsVp9:!1};this.pCapabilities=i,this.supportsMediaDecodeConfigurations?this.testMediaDecodeCapabilities(i,function(e){var t=e.mediaDecodeCapabilitiesResults;i.supportsAvc=t[0].supported,i.supportsHevc=t[1].supported,i.supportsWebM=t[2].supported,i.supportsVp9=t[2].supported,r.completeTesting(i)}):(i.supportsAvc=this.isTypeSupported(this.types.video.AVC),i.supportsHevc=this.isTypeSupported(this.types.video.HEVC),i.supportsWebM=this.supportsWebM,i.supportsVp9=this.supportsVp9,this.completeTesting(i))},d.prototype.completeTesting=function(e){var t=this;setTimeout(function(){return t.emit(d.event.COMPLETE,e)},1)},Object.defineProperty(d.prototype,"hasMediaSource",{get:function(){return!(!l.System.global||!l.System.global.MediaSource&&!this.isWebKit)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"hasEncryptedMediaSource",{get:function(){var e=l.System.global;return!(!e||!(e.MediaKeys||e.WebKitMediaKeys||e.MSMediaKeys))},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"isWebKit",{get:function(){return!(!l.System.global||!l.System.global.WebKitMediaSource)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"supportsWebM",{get:function(){return this.supportsVp8||this.supportsVp9},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"supportsVp8",{get:function(){return this.isTypeSupported(this.types.video.WEBM_VP8)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"supportsVp9",{get:function(){return this.isTypeSupported(this.types.video.WEBM_VP9)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"supportsRequestMediaKeySystemAccess",{get:function(){return!(!l.System.global||!l.System.global.MediaKeySystemAccess)},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"supportsMediaDecodeConfigurations",{get:function(){return!!navigator.mediaCapabilities},enumerable:!1,configurable:!0}),d.prototype.isTypeSupported=function(e){var t,r=!1;return!!l.System.global&&(this.isWebKit?r=l.System.global.WebKitMediaSource.isTypeSupported(e):this.hasMediaSource&&(r=l.System.global.MediaSource.isTypeSupported(e)),r||(t=document.createElement("video"),a.Util.isObject(t)&&a.Util.isFunction(t.canPlayType)&&("probably"!==t.canPlayType(e)&&"maybe"!==t.canPlayType(e)||(r=!0))),r)},d.prototype.testMediaDecodeCapabilities=function(t,r){function i(e){t.mediaDecodeCapabilitiesResults.push(e),t.mediaDecodeCapabilitiesResults.length===n.media_decode_configs.length?r(t):(a(n.media_decode_configs[o]),o++)}navigator||r(t);var o=0,a=function(e){var t={type:e.type};navigator.mediaCapabilities.decodingInfo(e.config).then(function(e){t.supported=e.supported,t.smooth=e.smooth,t.powerEfficient=e.powerEfficient,i(t)}).catch(function(){i(t)})};a(n.media_decode_configs[o]),o++},d.event={COMPLETE:"complete"},d);function d(e){var t=i.call(this,e)||this;return t.types={video:{HLS:c.MediaCapabilitiesMimeType.HLS,AVC:c.MediaCapabilitiesMimeType.MP4_VIDEO+"; codecs="+s.MediaCapabilitiesCodec.AVC,HEVC:c.MediaCapabilitiesMimeType.MP4_VIDEO+"; codecs="+s.MediaCapabilitiesCodec.HEVC,WEBM_VP8:c.MediaCapabilitiesMimeType.WEBM_VIDEO+"; codecs="+s.MediaCapabilitiesCodec.VP8,WEBM_VP9:c.MediaCapabilitiesMimeType.WEBM_VIDEO+"; codecs="+s.MediaCapabilitiesCodec.VP9},audio:{AVC:c.MediaCapabilitiesMimeType.MP4_AUDIO+"; codecs="+s.MediaCapabilitiesCodec.AVC,HEVC:c.MediaCapabilitiesMimeType.MP4_AUDIO+"; codecs="+s.MediaCapabilitiesCodec.HEVC,WEBM_VP8:c.MediaCapabilitiesMimeType.WEBM_AUDIO+"; codecs="+s.MediaCapabilitiesCodec.VP8,WEBM_VP9:c.MediaCapabilitiesMimeType.WEBM_AUDIO+"; codecs="+s.MediaCapabilitiesCodec.VP9}},t.getCapabilities(),t}r.MediaCapabilities=u},{"../core/Emitter":84,"../core/Util":88,"./System":218,"./config/MediaDecodeConfigs":222,"./enum/MediaCapabilitiesCodec":224,"./enum/MediaCapabilitiesMimeType":225}],217:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.QualityMap=void 0;var o=e("../enum/QualityCategory");r.QualityMap=((i={})[o.QualityCategory.UHD]=1080,i[o.QualityCategory.HD]=720,i[o.QualityCategory.SD]=0,i)},{"../enum/QualityCategory":124}],218:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.System=void 0;var a=e("../core/Util"),u=e("../enum/Browser"),d=e("../enum/Device"),c=e("../enum/Os"),l=e("../enum/Platform"),i=(Object.defineProperty(n,"info",{get:function(){return this.sysInfo},enumerable:!1,configurable:!0}),Object.defineProperty(n,"global",{get:function(){return this.pGlobal},enumerable:!1,configurable:!0}),n.initialize=function(){var e,t,r,i,o;"object"==typeof window?(n.pGlobal=window,e=navigator.userAgent,t=this.getPlatform(e),r=this.getBrowser(e,t),this.sysInfo=a.Util.assign({},r,t),o=(i=this.sysInfo.osVersion)&&a.Util.isString(i)?parseInt(i.split(".")[0]):NaN,this.sysInfo.osMajorVersion=o):n.pGlobal=null},n.getBrowser=function(e,t){function r(e,t,r){var i,o,a=t&&t.exec(r),n={browser:e,browserVersion:"0",browserMajorVersion:0};return a&&a.length&&1<a.length&&(n.browserVersion=a[1]||"",n.browserVersion.indexOf(".")?(i=n.browserVersion.split("."),Array.isArray(i)&&i.length&&(o=parseInt(i[0]),isNaN(o)||(n.browserMajorVersion=o))):(o=parseInt(n.browserVersion),isNaN(o)||(n.browserMajorVersion=o))),n}var i,o=((i={})[u.Browser.CHROME]=/Chrome\/(\S+)/,i[u.Browser.CHROME_IOS]=/CriOS\/(\S+)/,i[u.Browser.FIREFOX_IOS]=/FxiOS\/(\S+)/,i[u.Browser.EDGE]=/ Edge\/([^\s]+)/,i[u.Browser.FIREFOX]=/Firefox\/(\S+)/,i[u.Browser.OPERA]=/Opera|OPR\/(\S+)/,i[u.Browser.SAFARI]=/Version\/(\S+).*Safari/,i[u.Browser.MSIE]=/MSIE ([^\s]+)[\)\;]\ Windows/,i[u.Browser.ANDROID]=/Android/,i[u.Browser.SILK]=/Silk\/(\S+)/,i[u.Browser.PLAYSTATION]=/Playstation (\S+)/,i[u.Browser.UNKNOWN]=null,i),a=o[u.Browser.CHROME_IOS].test(e);if((o[u.Browser.CHROME].test(e)||a)&&!o[u.Browser.OPERA].test(e)&&!/Edge/.test(e)){var n=a?u.Browser.CHROME_IOS:u.Browser.CHROME;return r(n,o[n],e)}var s=this.getMsBrowser(o[u.Browser.EDGE],o[u.Browser.MSIE],e);if(s.browser!==u.Browser.UNKNOWN)return r(s.browser,s.re,e);for(var c in o)switch(c){case u.Browser.FIREFOX:case u.Browser.FIREFOX_IOS:case u.Browser.SILK:case u.Browser.ANDROID:case u.Browser.PLAYSTATION:if(o[c].test(e))return c===u.Browser.SILK&&(t.device=d.Device.KINDLE),r(c,o[c],e);break;case u.Browser.SAFARI:if(this.getSafariBrowser(o[c],e,t))return r(c,o[c],e);break;case u.Browser.OPERA:var l=o[c].exec(e);if(l)return r(0<=l.indexOf("Opera Mini/")||0<=l.indexOf("Opera Mobi")?u.Browser.OPERA_MOBILE:u.Browser.OPERA,o[c],e);break;case u.Browser.UNKNOWN:}return r(u.Browser.UNKNOWN,o[u.Browser.UNKNOWN],e)},n.getMsBrowser=function(e,t,r){var i=/Trident.[^\s]+;.*rv:([^\s]+)[\)\;]/;return t.test(r)?{browser:u.Browser.MSIE,re:t}:e.test(r)?{browser:u.Browser.EDGE,re:e}:i.test(r)?{browser:u.Browser.MSIE,re:i}:{browser:u.Browser.UNKNOWN,re:null}},n.getSafariBrowser=function(e,t,r){var i=e.test(t),o=r.os===c.Os.ANDROID?u.Browser.ANDROID:u.Browser.SAFARI;return i?o:null},n.getPlatform=function(e){var r=this,t=e.toLowerCase(),i={os:c.Os.UNKNOWN,platform:l.Platform.UNKNOWN,osVersion:"",device:d.Device.UNKNOWN};if(0<=t.indexOf("fxios"))return i.os=c.Os.IOS,i.platform=l.Platform.MAC,0<=t.indexOf("iphone")?i.device=d.Device.IPHONE:i.device=d.Device.IPAD,i;var o=/\s(\([^)]+\))/.exec(e);if(o&&o.length&&1<o.length)for(var a=o[1].replace(/_/gi,"."),n=[function(e,t){return r.isLinux(e,t)},function(e,t){return r.isMac(e,t)},function(e,t){return r.isWin(e,t)}],s=n.length;s--&&!(0,n[s])(0===s?e:a,i););return i},n.isLinux=function(e,t){var r,i=new RegExp(l.Platform.LINUX,"i"),o=/Linux armv/.test(navigator.platform);return!!(i.test(e)||0<=e.indexOf(c.Os.ANDROID))&&(t.platform=l.Platform.LINUX,t.device=d.Device.UNKNOWN,0<=e.indexOf(c.Os.CHROMIUM)?(r=/Chromium\/([\d+\.]*)\s/.exec(e),t.os=c.Os.CHROMIUM,t.osVersion=r&&r[1]||""):0<=e.indexOf(c.Os.ANDROID)?(r=/ Android ([^\s]+);/.exec(e),t.os=c.Os.ANDROID,t.osVersion=r&&r[1]||"",t.device=d.Device.ANDROID_PHONE):0<=e.indexOf(c.Os.WEBOS)?(t.os=c.Os.WEBOS,t.osVersion="n/a",t.device=d.Device.LG_SMART_TV):0<=e.indexOf(c.Os.SMARTCAST)?(t.os=c.Os.SMARTCAST,t.osVersion="n/a",t.device=d.Device.VIZIO_SMART_TV):0<=e.indexOf(c.Os.TIZEN)?(r=/Tizen ([^\s]+)(;|\))/.exec(e),t.os=c.Os.TIZEN,t.osVersion=r&&r[1]||"",t.device=d.Device.SAMSUNG_SMART_TV):"undefined"!=typeof $badger||/ WPE$/.test(e)&&o?(t.os=l.Platform.LINUX,t.osVersion="n/a",t.device=d.Device.COMCAST_X1):o&&(t.os=l.Platform.LINUX,t.osVersion="n/a",t.device=d.Device.EMBEDDED),!0)},n.isMac=function(e,t){var r;if(0<=e.indexOf(l.Platform.MAC))return t.platform=l.Platform.MAC,t.device=d.Device.DESKTOP,0<=e.indexOf(c.Os.OSX)&&(r=/Mac OS X ([\d\.]+)/.exec(e),t.os=c.Os.OSX,t.osVersion=r&&r[1]?r[1]:null),!0;if(-1===e.indexOf("like Mac OS X"))return!1;t.platform=l.Platform.MAC,t.os=c.Os.IOS,t.device=d.Device.UNKNOWN;var i=[/\(iPhone;/,/\(iPad;/,/\(iPod;/],o=[d.Device.IPHONE,d.Device.IPAD,d.Device.IPOD],a=i.length,n=/\sOS\s([^\s]*)\s/.exec(e);for(n&&n[1]&&(t.osVersion=n[1]);a--;)if(i[a].test(e))return t.device=o[a],!0;return!0},n.isWin=function(e,t){var r=/(Windows Phone |Windows Phone OS )([^\s]+);/.exec(e);if(r&&r[2])return t.platform=l.Platform.WINDOWS,t.os=c.Os.WINDOWS_PHONE,t.osVersion=r[2],t.device=d.Device.WINDOWS_PHONE,!0;var i=/Windows NT ([^\s]+)[;\)]/.exec(e);if(t.device=d.Device.DESKTOP,i&&i[1]){t.platform=l.Platform.WINDOWS,t.os=c.Os.WINDOWS;var o=i[1];if(/Xbox; Xbox One/.test(e)&&(t.device=d.Device.XBOX_ONE),10==parseInt(o))t.os=c.Os.WINDOWS10,t.osVersion=o;else switch(o){case"6.0":t.os=c.Os.WINDOWS_VISTA;break;case"6.1":t.os=c.Os.WINDOWS7,t.osVersion=7;break;case"6.2":t.os=c.Os.WINDOWS8,t.osVersion=8}return!0}return!1},n.sysInfo=null,n);function n(){}(r.System=i).initialize()},{"../core/Util":88,"../enum/Browser":98,"../enum/Device":99,"../enum/Os":116,"../enum/Platform":118}],219:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Timer=void 0;var i,o=e("../core/Emitter"),a=(i=o.Emitter,_(n,i),n.prototype.destroy=function(){this.stop(),i.prototype.destroy.call(this)},n.prototype.start=function(){var e=this;this.timer=setInterval(function(){e.pCount++,e.emit(n.TIC_EVENT,{count:e.pCount})},this.pInterval)},n.prototype.stop=function(){clearInterval(this.timer),this.timer=NaN,this.pCount=0},Object.defineProperty(n.prototype,"started",{get:function(){return!isNaN(this.timer)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"interval",{get:function(){return this.pInterval},set:function(e){this.pInterval=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this.pCount},enumerable:!1,configurable:!0}),n.TIC_EVENT="tic",n);function n(e){void 0===e&&(e=250);var t=i.call(this,{})||this;return t.timer=NaN,t.pCount=0,t.pInterval=e,t}r.Timer=a},{"../core/Emitter":84}],220:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Utils=void 0;var s=e("../core/Util"),c=e("../enum/ServiceName"),l=e("../service/SystemService"),u=e("../core/Logger"),i=e("../enum/QualityCategory"),o=e("./QualityMap"),a=(n.getMinAndMaxValuesForCategory=function(e,t){var r=1/0,i=0,o=1/0,a=0;return e.forEach(function(e){0<=e.category.indexOf(t)&&(i=Math.max(i,e.index),r=Math.min(r,e.index),a=Math.max(a,e.bitrate),o=Math.min(o,e.bitrate))}),{maxIndex:i,minIndex:r,minBitrate:o,maxBitrate:a}},n.getQualityCategoryForVideoHeight=function(e){var t=o.QualityMap;return e>=t[i.QualityCategory.UHD]?i.QualityCategory.UHD:e>=t[i.QualityCategory.HD]?i.QualityCategory.HD:i.QualityCategory.SD},n.getIndexForBitrate=function(e,t,r){if(!e)return 0;var i=e.length-1;if(t>=e[i].bitrate)return i;for(;i--;){var o=e[i].bitrate;if(r){if(o<t)return i+1}else if(o<=t)return i}return 0},n.classFromQualifiedName=function(e){if(!s.Util.isString(e))return e;var t,r,i=l.SystemService.getInstance(c.ServiceName.System).global,o=e.split("."),a=i,n=o.length;for("window"===o[0]&&(n=(o=o.slice(1)).length),t=0;t<n;t++){if(void 0===a[r=o[t]])return u.Logger.error("Util.classFromQualifiedName: '"+e+"' is undefined."),null;a=a[r]}return a},n.serializeConfigSnapshot=function(e,t,r){var i=t.currentResource?JSON.parse(JSON.stringify(t.currentResource)):{},o=function(e){var t=typeof e;if(e&&"object"==t){for(var r in e){var i=o(e[r]);"\0"===i?delete e[r]:e[r]=i}return e}return null===e||"number"==t&&isNaN(e)?"\0":e};o(i);var a=JSON.stringify(e.data),n=JSON.parse(a);delete n.dataTransformers,n.container=null;var s={buildInfo:r,playerOptions:n,resource:i};return JSON.stringify(s)},n);function n(){}r.Utils=a},{"../core/Logger":86,"../core/Util":88,"../enum/QualityCategory":124,"../enum/ServiceName":125,"../service/SystemService":214,"./QualityMap":217}],221:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.VirtualVideoElement=void 0;function i(){this.muted=!1,this.volume=NaN,this.currentTime=NaN,this.duration=NaN}r.VirtualVideoElement=i},{}],222:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.media_decode_configs=void 0,r.media_decode_configs=[{type:"avc",config:{type:"media-source",audio:{contentType:"audio/mp4; codecs=mp4a.40.2",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/mp4; codecs="avc1.4D401E"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}},{type:"hevc",config:{type:"media-source",audio:{contentType:"audio/mp4; codecs=mp4a.40.2",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/mp4; codecs="hev1.1.2.L93.B0"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}},{type:"webm",config:{type:"media-source",audio:{contentType:"audio/webm; codecs=opus",channels:"2",bitrate:132266,samplerate:48e3},video:{contentType:'video/webm; codecs="vp09.00.10.08"',width:1920,height:1080,bitrate:2646242,framerate:"25"}}}]},{}],223:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.DrmType=void 0,(i=r.DrmType||(r.DrmType={})).WIDEVINE="com.widevine.alpha",i.PLAYREADY="com.microsoft.playready",i.CLEAR_KEY="org.w3.clearkey",i.FAIRPLAY_1_0="com.apple.fps.1_0"},{}],224:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.MediaCapabilitiesCodec=void 0,(i=r.MediaCapabilitiesCodec||(r.MediaCapabilitiesCodec={})).AVC="avc1.4D401E,mp4a.40.2",i.HEVC="hev1.1.2.L93.B0",i.VP8="vp8, opus, vorbis",i.VP9="vp9, opus, vorbis",i.AV1="av1.experimental.e87fb2378f01103d5d6e477a4ef6892dc714e614"},{}],225:[function(e,t,r){"use strict";var i;Object.defineProperty(r,"__esModule",{value:!0}),r.MediaCapabilitiesMimeType=void 0,(i=r.MediaCapabilitiesMimeType||(r.MediaCapabilitiesMimeType={})).MP4_VIDEO="video/mp4",i.MP4_AUDIO="audio/mp4",i.HLS="application/vnd.apple.mpegurl",i.DASH="application/dash+xml",i.WEBM_VIDEO="video/webm",i.WEBM_AUDIO="audio/webm",i.TS_VIDEO="video/mp2t"},{}],226:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractKeyCommandMediator=void 0;var i,a=e("../core/Util"),o=e("../enum/ServiceName"),n=e("./LogAwareMediator"),s=(i=n.LogAwareMediator,_(c,i),c.prototype.onRemove=function(){function e(e){}this.activateScope(!1),this.pScope=null,this.keyUpHandler=e,this.keyDownHandler=e},Object.defineProperty(c.prototype,"disabled",{get:function(){return this.suppressed||this.pDisabled},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"scope",{set:function(e){this.suppressed||(this.pScope&&this.scopeActive&&this.activateScope(!1),this.pScope=e,!this.scopeActive&&null!==this.scopeActive||this.activateScope(!0))},enumerable:!1,configurable:!0}),c.prototype.registerCommandDef=function(e){this.suppressed||this.defs.push(e)},c.prototype.disable=function(){this.suppressed||(this.scopeActive&&this.activateScope(!1),this.pDisabled=!0)},c.prototype.enable=function(){this.suppressed||(this.scopeActive||this.activateScope(!0),this.pDisabled=!1)},c.prototype.validatePrimaryKey=function(e,t){var r=t.key,i=a.Util.isString(r)&&r.toLowerCase(),o=t.keyCode;return!(!r&&!o||e.primaryKey!==r&&e.primaryKey!==i&&e.keyCode!==o)},c.prototype.getCommand=function(e,t){void 0===t&&(t=!0);for(var r,i=this.defs.length,o=null;i--;)if(r=this.defs[i],this.validatePrimaryKey(r,e)&&(!t||this.hasRequiredModifiers(r,e))){o=r;break}return o},c.prototype.hasRequiredModifiers=function(e,t){var r=!!((e.requireCtrl?1:0)^(t.ctrlKey?1:0)),i=!!((e.requireShift?1:0)^(t.shiftKey?1:0)),o=!!((e.requireMeta?1:0)^(t.metaKey?1:0));return!r&&!i&&!o},c.prototype.activateScope=function(e){var t;this.pScope&&!this.suppressed&&(t=e?"addEventListener":"removeEventListener",this.pScope[t]("keyup",this.keyUpHandler),this.pScope[t]("keydown",this.keyDownHandler),this.scopeActive=e)},c.prototype.handleNotification=function(e){},c.prototype.onRegister=function(){var t=this;i.prototype.onRegister.call(this);var e=this.facade.retrieveService(o.ServiceName.System);!e.document||e.isTv||e.isWebMaf?this.suppressed=!0:(this.keyDownHandler=function(e){return t.hKeyDown(e)},this.keyUpHandler=function(e){return t.hKeyUp(e)})},c);function c(e){var t=i.call(this,e)||this;return t.defs=[],t.pScope=null,t.keyUpHandler=null,t.keyDownHandler=null,t.pDisabled=!1,t.suppressed=!1,t.scopeActive=null,t}r.AbstractKeyCommandMediator=s},{"../core/Util":88,"../enum/ServiceName":125,"./LogAwareMediator":235}],227:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AbstractPresentationMediator=void 0;var i,o=e("es6-promise"),l=e("../app/AppResources"),a=e("../core/Util"),n=e("../enum/Browser"),u=e("../enum/LogLevel"),s=e("../enum/ModelName"),d=e("../enum/NotificationName"),c=e("../enum/NotificationType"),p=e("../enum/ProxyName"),m=e("../enum/ServiceName"),f=e("../enum/StreamType"),y=e("../playback/adapter/PlaybackAdapterFactory"),h=e("../playback/enum/Playback"),E=e("../playback/enum/PlaybackAdapterEvents"),A=e("../playback/enum/TextTrackMode"),T=e("../playback/enum/TextTrackSurfaceEvents"),v=e("../playback/enum/VideoSurfaceEvents"),g=e("../playback/surface/ThumbnailTrackSurface"),P=e("../util/Utils"),N=e("./LogAwareMediator"),S=(i=N.LogAwareMediator,_(b,i),Object.defineProperty(b.prototype,"adapter",{get:function(){return this.pAdapter},enumerable:!1,configurable:!0}),b.prototype.onRemove=function(){clearTimeout(this.endFreezeTimeoutHandle),this.removeEvents(E.PlaybackAdapterEvents,this.adapterEventHandler),this.removeEvents(v.VideoSurfaceEvents,this.videoEventHandler),this.removeEvents(T.TextTrackSurfaceEvents,this.textTrackEventHandler),this.pAdapter=null,this.contentPlaybackStateProxy=null,this.resourceProxy=null,this.presoModel=null,this.playerOptions=null,i.prototype.onRemove.call(this)},b.prototype.setVolume=function(e){this.presoModel.volume=e},b.prototype.load=function(){return this.loadVideo()},b.prototype.play=function(){this.playVideo()},b.prototype.pause=function(){this.pauseVideo()},b.prototype.suspend=function(){this.pAdapter.suspend()},b.prototype.resume=function(){this.pAdapter.resume()},b.prototype.loadVideo=function(){return this.pAdapter.load()},b.prototype.playVideo=function(){this.pAdapter&&this.pAdapter.play()},b.prototype.pauseVideo=function(){this.pAdapter&&this.pAdapter.pause()},b.prototype.muteVideo=function(e){e||this.presoModel.userHasUnmuted||(this.presoModel.userHasUnmuted=!0),this.presoModel.isMuted=e},b.prototype.seekVideo=function(e){this.pAdapter&&this.pAdapter.seek(e)},b.prototype.checkVideoBuffering=function(){var e=this.pAdapter&&this.pAdapter.buffering;!this.contentIsBuffering&&e?(this.contentIsBuffering=!0,this.notify(d.NotificationName.CONTENT_BUFFERING,{value:!0})):this.contentIsBuffering&&!e&&(this.contentIsBuffering=!1,this.notify(d.NotificationName.CONTENT_BUFFERING,{value:!1}))},Object.defineProperty(b.prototype,"video",{get:function(){return this.viewControl},enumerable:!1,configurable:!0}),b.prototype.notify=function(e,t){this.sendNotification(e,t||null,c.NotificationType.INTERNAL)},b.prototype.respondToIsPlayingLiveChange=function(e){this.notify(d.NotificationName.CONTENT_IS_LIVE_CHANGED,{value:e})},b.prototype.respondToStreamTypeChange=function(e){var t=this.contentPlaybackStateProxy.model;this.streamType!=e&&(this.streamType=e,t.streamType=e,this.notify(d.NotificationName.STREAM_TYPE_CHANGE,{value:e}))},b.prototype.respondToTtOffsetRequest=function(e){var t;this.facade.retrieveService(m.ServiceName.System).browser===n.Browser.FIREFOX?this.monitorTtCues(e):(t=this.facade.retrieveProxy(p.ProxyName.PlayerDomProxy))&&t.setControlVisibility(e)},b.prototype.monitorTtCues=function(e){var t=this.contentPlaybackStateProxy.nativeTextTrack,r=t&&t.activeCues;if(this.isMonitoringCueEvents=e,r)for(var i=0,o=r.length||0;i<o;i++)this.respondToTtCue(r[i])},b.prototype.respondToTtCue=function(e){e.line=this.isMonitoringCueEvents?14:"auto"},b.prototype.handleNotification=function(e){switch(e.name){case d.NotificationName.TIMER_TIC:this.respondToBufferingStatusCheck(),this.checkSize();break;case d.NotificationName.FULLSCREEN_CHANGE:var t=e.body;this.presoModel.isFullscreen=t.isFullscreen,this.respondToFullscreenChange(t.isFullscreen);break;case d.NotificationName.AUTO_QUALITY_SWITCHING:this.notify(d.NotificationName.QUALITY_INFO_CHANGE,this.contentPlaybackStateProxy.model.qualityInfo);break;case d.NotificationName.TT_OFFSET_REQUEST:this.offsetTtOnControlVis&&this.respondToTtOffsetRequest(e.body.controlsVisible)}},b.prototype.listNotificationInterests=function(){return[d.NotificationName.TIMER_TIC,d.NotificationName.FULLSCREEN_CHANGE,d.NotificationName.TT_OFFSET_REQUEST]},b.prototype.onRegister=function(){i.prototype.onRegister.call(this),this.contentPlaybackStateProxy=this.facade.retrieveProxy(p.ProxyName.ContentPlaybackStateProxy),this.resourceProxy=this.facade.retrieveProxy(p.ProxyName.ResourceProxy),this.presoModel=this.getModel(s.ModelName.PresentationState),this.playerOptions=this.getModel(s.ModelName.PlayerOptions);var e=this.resourceProxy.resource.overrides;a.Util.isNumber(null==e?void 0:e.minDvrDuration)&&(this.minDvrDuration=e.minDvrDuration),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&(this.muteVideo(!0),this.presoModel.isMuted=!0),this.offsetTtOnControlVis=this.playerOptions.offsetTextOnControlsVisible},b.prototype.prepareForPlayback=function(t){var r=this;void 0===t&&(t=!1);var e={system:this.systemService,playerOptions:this.playerOptions,resource:this.resourceProxy.resource,performanceSettings:this.facade.retrieveProxy(p.ProxyName.PerformanceProxy),textTrackSettings:this.facade.retrieveProxy(p.ProxyName.TextTrackProxy)};y.PlaybackAdapterFactory.getAdapter(this.viewControl,e,this.logger).then(function(e){r.pAdapter=e,r.addEvents(E.PlaybackAdapterEvents,r.adapterEventHandler),r.addEvents(v.VideoSurfaceEvents,r.videoEventHandler),r.addEvents(T.TextTrackSurfaceEvents,r.textTrackEventHandler),r.pAdapter.initialize(),o.Promise.resolve().then(function(){if(!0===r.preloadContent)return r.pAdapter.load()}).then(function(){(r.presoModel.isAutoplay||t)&&r.play()})}).catch(function(e){r.logger.log(u.LogLevel.ERROR,e.target,e.message),r.notify(d.NotificationName.RESOURCE_ERROR,e)})},b.prototype.hPlaybackAdaptorEvents=function(e){var t,r,i,o,a=this,n=this.contentPlaybackStateProxy.model;switch(e.type){case E.PlaybackAdapterEvents.ABR_QUALITY_LOADED:this.contentPlaybackStateProxy.isAbrSwitchingAvailable&&(t=this.contentPlaybackStateProxy.qualityInfo,r=this.contentPlaybackStateProxy.manifestQualities[e.data.index].bitrate,i=P.Utils.getIndexForBitrate(t.qualities,r,!1),o=t.qualities[i],t.quality&&t.quality.bitrate===o.bitrate||(this.contentPlaybackStateProxy.quality=o,n.bitrate=o.bitrate,this.respondToQualityChange(o)));break;case E.PlaybackAdapterEvents.ABR_CONSTRAINTS_CHANGE:this.contentPlaybackStateProxy.isAbrSwitchingAvailable?n.qualityInfo&&(this.contentPlaybackStateProxy.updateQualityProfile(e.data.minIndex,e.data.maxIndex,e.data.manifestQualities),this.log(u.LogLevel.INFO,"Quality Info: ",n.qualityInfo),this.notify(d.NotificationName.QUALITY_INFO_CHANGE,n.qualityInfo)):(this.logger.log(u.LogLevel.INFO,l.AppResources.messages.ABR_UNAVAILABLE),this.contentPlaybackStateProxy.qualitySwitchingMode=h.Playback.ABR_SWITCHING_MODE_UNAVAILABLE);break;case E.PlaybackAdapterEvents.AUDIO_TRACK_UPDATED:this.contentPlaybackStateProxy.updateAudioTracks(e.data.track,e.data.tracks),this.notify(d.NotificationName.AUDIO_TRACK_INFO_CHANGE,e.data);break;case E.PlaybackAdapterEvents.AUDIO_TRACK_CHANGE:this.contentPlaybackStateProxy.updateAudioTracks(e.data.track),this.notify(d.NotificationName.AUDIO_TRACK_CHANGE,e.data.track);break;case E.PlaybackAdapterEvents.FRAGMENT_LOADED:this.contentPlaybackStateProxy.maxBandwidth=e.data.bandwidth;break;case E.PlaybackAdapterEvents.FRAGMENT_PARSED:n.framerate=e.data.rate;break;case E.PlaybackAdapterEvents.MANIFEST_PARSED:this.contentPlaybackStateProxy.processQualityProfile(e.data.profile),this.contentPlaybackStateProxy.manifestQualities=e.data.profile;break;case E.PlaybackAdapterEvents.LOADED_METADATA:this.notify(d.NotificationName.STREAM_METADATA,e.data);try{var s=this.facade.retrieveProxy(p.ProxyName.Playlist).currentResource.location.thumbnailTrackUrl;!this.contentPlaybackStateProxy.thumbnailTrack&&s&&g.ThumbnailTrackSurface.create(s).then(function(e){a.contentPlaybackStateProxy.thumbnailTrack=e,a.notify(d.NotificationName.THUMBNAIL_TRACK_AVAILABLE,e)}).catch(function(e){return a.log(u.LogLevel.WARN,"Could not load thumbnail track")})}catch(e){this.log(u.LogLevel.WARN,"Could not load thumbnail track")}break;case E.PlaybackAdapterEvents.ERROR:this.respondToError(e.data);break;case E.PlaybackAdapterEvents.MULTI_CDN:var c=e.data.cdn;c!==n.cdn&&(n.cdn=c,this.notify(d.NotificationName.CDN_CHANGE,e.data));break;case E.PlaybackAdapterEvents.DRM_KEYSYSTEM_CREATED:n.drmType=e.data.keysystem,this.notify(d.NotificationName.DRM_KEYSYSTEM_CREATED,e.data)}},b.prototype.hVideoAdapterEvents=function(e){var t=this.contentPlaybackStateProxy.model;switch(e.type){case v.VideoSurfaceEvents.PROGRESS:t.bufferLength=this.pAdapter.bufferLength,t.averageDroppedFps=this.pAdapter.droppedVideoFrames,t.framerate=this.pAdapter.framerate,this.respondToVideoProgress();break;case v.VideoSurfaceEvents.CAN_PLAY_THROUGH:this.loadComplete||(this.loadComplete=!0,this.notify(d.NotificationName.VIDEO_LOAD_COMPLETE));break;case v.VideoSurfaceEvents.LOADED_METADATA:this.updateLiveStreamInfo(),this.notify(d.NotificationName.VIDEO_LOADED_METADATA);break;case v.VideoSurfaceEvents.TIME_UPDATE:clearTimeout(this.endFreezeTimeoutHandle);var r=this.pAdapter.time,i=this.presoModel.streamDuration;this.pAdapter.isLiveStream?this.updateLiveStreamInfo():!isNaN(i)&&i-r<=.15&&this.protectAgainstEndFreeze(250),this.respondToVideoTimeUpdate(r);break;case v.VideoSurfaceEvents.PLAYING:this.updateLiveStreamInfo(),this.respondToVideoPlaying();break;case v.VideoSurfaceEvents.PAUSE:this.respondToVideoPaused();break;case v.VideoSurfaceEvents.SEEKING:this.respondToVideoSeeking();break;case v.VideoSurfaceEvents.SEEKED:this.respondToVideoSeeked();break;case v.VideoSurfaceEvents.ENDED:clearTimeout(this.endFreezeTimeoutHandle),this.respondToVideoEnd();break;case v.VideoSurfaceEvents.DURATION_CHANGE:var o=this.pAdapter.duration;0<o&&this.respondToDurationChange(o);break;case v.VideoSurfaceEvents.VOLUME_CHANGE:var a=e.data.target;this.notify(d.NotificationName.VOLUME_CHANGE,{value:a.volume,muted:a.muted})}},b.prototype.hTextTrackEvents=function(e){var t=this.facade.retrieveProxy(p.ProxyName.TextTrackProxy);switch(e.type){case T.TextTrackSurfaceEvents.METADATA_CUEPOINT:this.respondToId3Data(e.data);break;case T.TextTrackSurfaceEvents.TEXT_CUEPOINT:this.isMonitoringCueEvents&&this.respondToTtCue(e.data),this.notify(d.NotificationName.TEXT_CUEPOINT,e.data);break;case T.TextTrackSurfaceEvents.TEXT_TRACK_DISPLAY_MODE_CHANGE:var r=e.data.mode!==A.TextTrackMode.DISABLED;t.mode=e.data.mode,this.notify(d.NotificationName.TEXT_TRACK_DISPLAY_MODE_CHANGE,{enabled:r}),this.respondToTextTrackModeChange(r);break;case T.TextTrackSurfaceEvents.TEXT_TRACK_ADDED:this.contentPlaybackStateProxy.addTextTrack(e.data),this.respondToTextTrackInfoChange();break;case T.TextTrackSurfaceEvents.TEXT_TRACK_CHANGE:var i=e.data;this.contentPlaybackStateProxy.nativeTextTrack=i,this.notify(d.NotificationName.TEXT_TRACK_CHANGE,this.contentPlaybackStateProxy.textTrack),this.respondToTextTrackInfoChange();break;case T.TextTrackSurfaceEvents.TEXT_TRACK_AVAILABLE:this.notify(d.NotificationName.TEXT_TRACK_AVAILABLE)}},b.prototype.respondToTextTrackInfoChange=function(){this.notify(d.NotificationName.TEXT_TRACK_INFO_CHANGE,this.contentPlaybackStateProxy.textTrackInfo)},b.prototype.protectAgainstEndFreeze=function(e){var t=this;this.endFreezeTimeoutHandle=setTimeout(function(){t.respondToVideoEnd()},e)},b.prototype.addEvents=function(e,t){if(this.pAdapter)for(var r in e)this.pAdapter.on(e[r],t)},b.prototype.removeEvents=function(e,t){if(this.pAdapter)for(var r in e)this.pAdapter.off(e[r],t)},b.prototype.calculateStreamType=function(){if(this.pAdapter.isLiveStream){var e=this.pAdapter.liveStreamInfo.dvrWindowSize;return e<this.minDvrDuration||isNaN(e)?f.StreamType.LIVE:f.StreamType.DVR}return f.StreamType.VOD},b.prototype.updateLiveStreamInfo=function(){var e,t,r,i;this.pAdapter.isLiveStream?(e=this.contentPlaybackStateProxy.model,t=this.pAdapter.liveStreamInfo,e.liveStreamInfo=t,r=this.calculateStreamType(),this.respondToStreamTypeChange(r),i=r==f.StreamType.LIVE||t.isPlayingLive,this.isPlayingLive!=i&&(this.isPlayingLive=i,this.respondToIsPlayingLiveChange(i)),e.streamType==f.StreamType.DVR&&this.respondToDurationChange(t.relativeDuration)):this.respondToStreamTypeChange(f.StreamType.VOD)},b);function b(e,t){var r=i.call(this,e,t)||this;return r.started=!1,r.preloadContent=!0,r.minDvrDuration=1800,r.contentIsBuffering=!1,r.adapterEventHandler=function(e){return r.hPlaybackAdaptorEvents(e)},r.videoEventHandler=function(e){return r.hVideoAdapterEvents(e)},r.textTrackEventHandler=function(e){return r.hTextTrackEvents(e)},r.endFreezeTimeoutHandle=null,r.loadComplete=!1,r.offsetTtOnControlVis=!1,r.isMonitoringCueEvents=!1,r.respondToTextTrackInfoChange=a.Util.debounce(r.respondToTextTrackInfoChange.bind(r),10),r}r.AbstractPresentationMediator=S},{"../app/AppResources":47,"../core/Util":88,"../enum/Browser":98,"../enum/LogLevel":107,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"../playback/adapter/PlaybackAdapterFactory":179,"../playback/enum/Playback":188,"../playback/enum/PlaybackAdapterEvents":189,"../playback/enum/TextTrackMode":194,"../playback/enum/TextTrackSurfaceEvents":195,"../playback/enum/VideoSurfaceEvents":197,"../playback/surface/ThumbnailTrackSurface":200,"../util/Utils":220,"./LogAwareMediator":235,"es6-promise":25}],228:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityKeyCommandMediator=void 0;var i,o=e("../app/AppResources"),n=e("../core/Util"),s=e("../enum/AccessibilityAction"),a=e("../enum/MediatorName"),p=e("../enum/NonPrintingKey"),c=e("../enum/NotificationName"),l=e("../enum/StreamType"),m=e("../util/KeyCode"),u=e("./AbstractKeyCommandMediator"),d=(i=u.AbstractKeyCommandMediator,_(f,i),f.prototype.onRemove=function(){this.vpi=null,this.uim=null,i.prototype.onRemove.call(this)},f.prototype.isControl=function(e){return"BUTTON"==e.nodeName||"INPUT"==e.nodeName},f.prototype.hKeyUp=function(e){this.disabled||this.isControl(document.activeElement)||(this.seekMoving?this.disengageSeek():this.processKeyEvent(e))},f.prototype.hKeyDown=function(e){var t,r,i,o=e.key,a=e.keyCode,n=o===p.NonPrintingKey.ARROW_UP||a===m.KeyCode.UP_ARROW,s=o===p.NonPrintingKey.ARROW_DOWN||a===m.KeyCode.DOWN_ARROW,c=o===p.NonPrintingKey.SPACE||a===m.KeyCode.SPACE,l=o===p.NonPrintingKey.ARROW_LEFT||a===m.KeyCode.LEFT_ARROW,u=o===p.NonPrintingKey.ARROW_RIGHT||a===m.KeyCode.RIGHT_ARROW,d=e.repeat;!(u||l||n||s||c)||this.isControl(document.activeElement)?this.shouldSeekContinuous()&&(l||u)&&(!this.seekMoving&&d?(this.tZero=Date.now(),this.engageSeek()):this.seekMoving&&d&&(r=5<=(t=.001*(Date.now()-this.tZero))?3:3<=t?2:1,i=l?-1:1,this.moveSeekBy(i*this.SEEK_INCREMENT_CONTINUOUS*r)),this.stopEvent(e)):e.preventDefault()},f.prototype.engageSeek=function(){this.uim&&this.uim.engageSeek(),this.seekMoving=!0},f.prototype.disengageSeek=function(){var e=this;this.uim&&this.uim.disengageSeek(),this.seekMoving=!1,this.tZero=null,setTimeout(function(){e.uim&&e.uim.forceControlsVisible(!1)},500)},f.prototype.moveSeekBy=function(e){this.uim&&this.uim.moveSeekBy(e)},f.prototype.shouldSeekContinuous=function(){return this.uim&&this.uim.uiIsStandardView()&&!this.disabled&&this.seekEnabled},Object.defineProperty(f.prototype,"player",{get:function(){var e;return this.vpi||(e=this.facade.retrieveMediator(a.MediatorName.APPLICATION),this.vpi=e.getAppApi()),this.vpi},enumerable:!1,configurable:!0}),f.prototype.stopEvent=function(e){e.stopImmediatePropagation(),e.preventDefault()},f.prototype.processKeyEvent=function(e){if(e.ctrlKey||e.shiftKey||e.metaKey||e.key===p.NonPrintingKey.META||e.key===p.NonPrintingKey.SHIFT||e.key===p.NonPrintingKey.CONTROL)return null;var t=this.getCommand(e,!1);t&&(this.doAction(t),this.stopEvent(e))},f.prototype.doAction=function(e){var t,r=e.action;switch(r){case s.AccessibilityAction.INCREASE_VOLUME:case s.AccessibilityAction.DECREASE_VOLUME:o=r===s.AccessibilityAction.DECREASE_VOLUME?-1:1,a=this.player.volume,t=n.Util.clampValue(a+this.VOLUME_INCREMENT*o,0,1),this.player.volume=t,this.uim&&this.uim.setAccVolumeLevelIndicator(t);break;case s.AccessibilityAction.SEEK_BACK:case s.AccessibilityAction.SEEK_FORWARD:if(!this.seekEnabled)return;var i=this.player.contentDuration,o=r===s.AccessibilityAction.SEEK_BACK?-1:1,a=this.player.contentTime;if(!i||isNaN(i)||1===o&&this.player.streamType===l.StreamType.DVR&&this.player.isPlayingLive)return;t=n.Util.clampValue(a+this.SEEK_FACTOR_DISCRETE*o*i,0,i),this.setSeekNotice(t,o),this.player.seek(t);break;case s.AccessibilityAction.ENTER_FULLSCREEN:this.player.enterFullscreen();break;case s.AccessibilityAction.TOGGLE_PLAY:this.player.streamType!==l.StreamType.LIVE&&this.player.togglePlayPause();break;case s.AccessibilityAction.TOGGLE_MUTE:this.player.muted=!this.player.muted;break;case s.AccessibilityAction.TOGGLE_TT:this.player.textTrackEnabled=!this.player.textTrackEnabled;break;case s.AccessibilityAction.PLAYLIST_NEXT:case s.AccessibilityAction.PLAYLIST_PREV:o=r==s.AccessibilityAction.PLAYLIST_PREV?-1:1,1<this.player.playList.length&&(o<0?this.player.playList.prev():this.player.playlist.next());break;case s.AccessibilityAction.STOP:this.player.streamType===l.StreamType.LIVE?this.player.stop():this.player.pause()}},f.prototype.setSeekNotice=function(e,t){var r,i,o;this.uim&&(r=n.Util.secToHms(e),i=n.Util.secToHms(this.player.contentDuration),o=0<t?"&gt;&nbsp;&nbsp;"+r+"&nbsp;/&nbsp;"+i:r+"&nbsp;/&nbsp;"+i+"&nbsp;&nbsp;&lt;",this.uim.setSeekNotice(o,t))},f.prototype.handleNotification=function(e){var t=e.name,r=c.NotificationName;switch(t){case r.AD_BREAK_START:this.seekEnabled=!1;break;case r.CONTENT_COMPLETE:this.seekEnabled=!1,this.disable();break;case r.CONTENT_START:case r.CONTENT_SEGMENT_START:this.enable(),this.seekEnabled=this.player.streamType!==l.StreamType.LIVE}},f.prototype.listNotificationInterests=function(){var e=c.NotificationName;return[e.AD_BREAK_START,e.CONTENT_START,e.CONTENT_SEGMENT_START,e.CONTENT_COMPLETE]},f.prototype.onRegister=function(){i.prototype.onRegister.call(this);for(var e=o.AppResources.accessibilityKeyCmdDefs,t=e.length;t--;)this.registerCommandDef(e[t]);var r=this.facade.retrieveMediator(a.MediatorName.UI);r&&(this.uim=r)},f);function f(e){var t=i.call(this,e)||this;return t.uim=null,t.vpi=null,t.seekMoving=!1,t.seekEnabled=!1,t.VOLUME_INCREMENT=.05,t.SEEK_FACTOR_DISCRETE=.05,t.SEEK_INCREMENT_CONTINUOUS=.001,t.tZero=0,t}r.AccessibilityKeyCommandMediator=d},{"../app/AppResources":47,"../core/Util":88,"../enum/AccessibilityAction":94,"../enum/MediatorName":109,"../enum/NonPrintingKey":113,"../enum/NotificationName":114,"../enum/StreamType":126,"../util/KeyCode":215,"./AbstractKeyCommandMediator":226}],229:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.AppMediator=void 0;var i,o=e("es6-promise"),a=e("../app/event_map"),n=e("../dataservice/AsyncDataRequest"),s=e("../dataservice/AsyncDataRequestOptions"),c=e("../enum/LogLevel"),l=e("../enum/MediatorName"),u=e("../enum/ModelName"),d=e("../enum/NotificationName"),p=e("../enum/PlayerEvent"),m=e("../enum/ProxyName"),f=e("../enum/ServiceName"),y=e("../enum/StreamType"),h=e("../util/Utils"),E=e("./LogAwareMediator"),A=e("../core/Logger"),T=e("../core/Util"),v=(i=E.LogAwareMediator,_(g,i),g.prototype.onRemove=function(){this.app=null,i.prototype.onRemove.call(this)},g.prototype.getAppApi=function(){return this.app.getApi()},g.prototype.getSnapshot=function(){return this.getProxy(m.ProxyName.ModelCollectionProxy).collection.getSnapshot()},g.prototype.getConfigAsJson=function(){var e=this.getProxy(m.ProxyName.ModelCollectionProxy).getModel(u.ModelName.PlayerOptions),t=this.getProxy(m.ProxyName.Playlist),r=this.facade.retrieveService(f.ServiceName.BuildInfo);return h.Utils.serializeConfigSnapshot(e,t,r.toObject())},g.prototype.validateSeek=function(e,t){if(isNaN(e))return this.log(c.LogLevel.WARN,"Invalid seek() time ["+e+"] supplied"),null;var r=this.getModel(u.ModelName.PresentationState),i=this.getProxy(m.ProxyName.ContentPlaybackStateProxy),o=i&&i.model.streamType===y.StreamType.LIVE;return!r||!i||r.isCurrentVideoAd||o?(this.log(c.LogLevel.WARN,"seek() may not be called in the current context"),null):T.Util.clampValue(e,0,t)},g.prototype.isPlaybackSuspended=function(){return this.getModel(u.ModelName.PresentationState).suspended},g.prototype.getAutoplayCapabilities=function(){return this.getService(f.ServiceName.AutoplayCapabilities).detectCapabilities()},g.prototype.getContainerRect=function(){var e=this.getProxy(m.ProxyName.PlayerDomProxy);return e?e.getPresentationRect():null},g.prototype.getCurrentResource=function(){var e=this.getProxy(m.ProxyName.Playlist);return e?e.currentResource:null},g.prototype.killCurrentResource=function(){var t=this,e=this.facade.retrieveMediator(l.MediatorName.PRESENTATION_MEDIATOR);return this.log(c.LogLevel.INFO,"Killing current resource"),o.Promise.resolve().then(function(){return e&&e.close()}).then(function(){var e=t.getProxy(m.ProxyName.Playlist);e&&e.removeResourceAtIndex(e.currentIndex)}).catch(function(e){A.Logger.error(e)})},g.prototype.performXhr=function(e){new n.AsyncDataRequest(s.AsyncDataRequestOptions.create(e))},g.prototype.getPlugin=function(e){var t=this.facade.retrieveMediator(l.MediatorName.PLUGIN_MEDIATOR);return t?t.getPlugin(e):null},g.prototype.dispatchPluginEvent=function(e){this.app.sendEvent(p.PlayerEvent.PLUGIN_EVENT,e)},g.prototype.prepForPlayerRemoval=function(){var e=this.facade.retrieveMediator(l.MediatorName.UI);e&&(e.killUi(),this.log(c.LogLevel.INFO,"UI layer destroyed"))},g.prototype.getMuteState=function(){var e=this.getModel(u.ModelName.PresentationState);return e?e.isMuted:null},g.prototype.getVolume=function(){var e=this.getModel(u.ModelName.PresentationState);return e?e.volume:NaN},g.prototype.getDimensions=function(){var e=this.getProxy(m.ProxyName.PlayerDomProxy);return e?e.getDimensions():null},g.prototype.getAdBreakTimes=function(){var e=this.facade.retrieveMediator(l.MediatorName.PRESENTATION_MEDIATOR);return e?e.getAdBreakTimes():null},g.prototype.grabFrame=function(){var e=this.getProxy(m.ProxyName.PlayerDomProxy),t=e&&e.getVideo();if(!e||!t)return null;var r,i,o=document.createElement("canvas"),a=o.getContext("2d"),n=o.width=t.videoWidth,s=o.height=t.videoHeight;return a.drawImage(t,0,0,n,s),r=o.toDataURL(),(i=document.createElement("img")).setAttribute("src",r),i},g.prototype.listNotificationInterests=function(){return[d.NotificationName.APP_EVENT]},g.prototype.sendErrorEvent=function(e){this.app.sendErrorEvent(e)},g.prototype.handleNotification=function(e){var t=e.body,r=a.event_map[t.notificationName];switch(e.name){case d.NotificationName.APP_EVENT:r&&this.app.sendEvent(r,t.data||null)}},g.prototype.onRegister=function(){i.prototype.onRegister.call(this)},g);function g(e,t){var r=i.call(this,e)||this;return r.app=t,r}r.AppMediator=v},{"../app/event_map":53,"../core/Logger":86,"../core/Util":88,"../dataservice/AsyncDataRequest":90,"../dataservice/AsyncDataRequestOptions":91,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PlayerEvent":121,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"../util/Utils":220,"./LogAwareMediator":235,"es6-promise":25}],230:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CommonPresentationMediator=void 0;var i,o=e("es6-promise"),a=e("../app/AppResources"),n=e("../core/Logger"),s=e("../enum/ErrorCode"),c=e("../enum/LogLevel"),l=e("../enum/MediatorName"),u=e("../enum/ModelName"),d=e("../enum/NotificationName"),p=e("../enum/PlaybackState"),m=e("../enum/ProxyName"),f=e("../enum/ServiceName"),y=e("../enum/StreamType"),h=e("./AbstractPresentationMediator"),E=(i=h.AbstractPresentationMediator,_(A,i),A.prototype.onRemove=function(){this.uim=null,i.prototype.onRemove.call(this)},A.prototype.close=function(){var r=this;return this.pause(),this.log(c.LogLevel.INFO,"Closing Presentation"),this.closeAds(),o.Promise.resolve().then(function(){return r.adapter?r.adapter.destroy():null}).then(function(){var e,t=r.isAdPlaying();!r.hasContent||r.isContentComplete()&&!t?r.notify(d.NotificationName.RESOURCE_END):(e=r.contentPlaybackStateProxy.model,r.sendNotification(d.NotificationName.RESOURCE_INTERRUPTED,{contentTime:e.time,contentDuration:e.duration,adInterrupted:t}))}).catch(function(e){throw n.Logger.error(e),e})},A.prototype.closeAds=function(){},A.prototype.playOnUserGesture=function(){this.uiMediator&&this.uiMediator.displayPoster(!1),this.notify(d.NotificationName.VIDEO_LOAD_START),this.prepareForPlayback(!0)},A.prototype.mute=function(e){this.muteVideo(e),this.uiMediator&&this.uiMediator.setMuteState(e)},A.prototype.seek=function(e){this.seekVideo(e)},A.prototype.setVolume=function(e){this.domProxy&&this.domProxy.setVideoVolume(e),i.prototype.setVolume.call(this,e)},A.prototype.getAdBreakTimes=function(){return[]},A.prototype.releaseContentDuration=function(e){this.contentDurationReleased=!0,this.notify(d.NotificationName.CONTENT_DURATION_AVAILABLE,{contentDuration:e})},A.prototype.getLiveProgress=function(){return null===this.liveTZero&&(this.liveTZero=Date.now()),Date.now()-this.liveTZero},A.prototype.adjustStartTimeForAdBreakProximity=function(e,t){for(var r=0,i=t.length;r<i;r++){var o=t[r].start-e;if(0<=o&&o<this.resumeTimeMaxProximityToAdBreak)return e-this.resumeTimeMaxProximityToAdBreak}return e},Object.defineProperty(A.prototype,"uiMediator",{get:function(){return this.uim},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"domProxy",{get:function(){return this.facade.retrieveProxy(m.ProxyName.PlayerDomProxy)},enumerable:!1,configurable:!0}),A.prototype.muteVideo=function(e){i.prototype.muteVideo.call(this,e),this.domProxy&&this.domProxy.muteVideo(e)},A.prototype.respondToFullscreenChange=function(e){this.checkSize(),this.notify(e?d.NotificationName.FULLSCREEN_ENTER:d.NotificationName.FULLSCREEN_EXIT)},A.prototype.respondToVideoPaused=function(){this.contentPlaybackStateProxy.model.state=p.PlaybackState.PAUSED,this.notify(d.NotificationName.RESOURCE_PAUSED)},A.prototype.respondToVideoPlaying=function(){this.contentPlaybackStateProxy.model.state=p.PlaybackState.PLAYING,this.notify(d.NotificationName.RESOURCE_PLAYING)},A.prototype.respondToVideoSeeking=function(){this.notify(d.NotificationName.CONTENT_SEEKING)},A.prototype.respondToVideoSeeked=function(){this.notify(d.NotificationName.CONTENT_SEEKED)},A.prototype.respondToVideoProgress=function(){this.notify(d.NotificationName.VIDEO_PROGRESS)},A.prototype.respondToQualityChange=function(e){void 0===e&&(e=null),this.notify(d.NotificationName.QUALITY_CHANGE,e)},A.prototype.respondToError=function(e){this.uiMediator&&this.uiMediator.displaySpinner(!1),e.message||(e.message=a.AppResources.messages.UNSPECIFIED_ERROR),e.code||(e.code=s.ErrorCode.UNSPECIFIED_VIDEO_PLAYBACK_ERROR),this.notify(d.NotificationName.VIDEO_PLAYBACK_ERROR,e)},A.prototype.respondToVideoEnd=function(){this.notify(d.NotificationName.DISABLE_UI),this.notify(d.NotificationName.RESOURCE_COMPLETE)},A.prototype.respondToBufferingStatusCheck=function(){var e=this.presoModel.streamTime;!isNaN(e)&&0<e&&this.checkVideoBuffering()},A.prototype.respondToId3Data=function(e){this.notify(d.NotificationName.METADATA_CUEPOINT,e)},A.prototype.respondToVideoTimeUpdate=function(e){var t=this.contentPlaybackStateProxy.model,r={contentTime:t.time,streamTime:e,contentDuration:t.duration,streamDuration:this.presoModel.streamDuration};t.streamType===y.StreamType.LIVE&&(r.elapsedTimeMs=this.getLiveProgress()),this.notify(d.NotificationName.CONTENT_TIME_UPDATE,r)},A.prototype.respondToDurationChange=function(e){},A.prototype.respondToSizeChange=function(){this.adapter&&this.adapter.resize()},A.prototype.respondToTextTrackModeChange=function(e){this.uiMediator&&this.uiMediator.setClosedCaptionState(e)},A.prototype.checkSize=function(){var e,t;this.domProxy&&(e=this.domProxy.getPresentationRect(),t=this.currentPresentationWidth,this.currentPresentationWidth=e.width,t&&e.width!==t&&(this.respondToSizeChange(),this.notify(d.NotificationName.PRESENTATION_SIZE_CHANGE,{width:e.width,height:e.height})))},A.prototype.setTransportType=function(e){void 0===e&&(e=this.contentPlaybackStateProxy.model.streamType);var t=e!=y.StreamType.LIVE;this.uiMediator&&(this.uiMediator.setSeekable(t),this.uiMediator.setTransportType(e),this.uiMediator.setIsPlayingLive(this.isPlayingLive))},A.prototype.setForClickToPlay=function(){var e,t,r=this;this.uiMediator?(this.uiMediator.displayPoster(!0),this.uiMediator.activatePoster()):this.getModel(u.ModelName.PlayerOptions).useNativeControls&&(e=this.domProxy.getMain(),t=function(){e.removeEventListener("click",t),r.notify(d.NotificationName.PLAY_ON_USER_GESTURE)},e.addEventListener("click",t))},A.prototype.setPausedState=function(){this.uiMediator&&(this.uiMediator.setClickCatcherState(p.PlaybackState.PAUSED),this.uiMediator.hideClickCatcher(!1))},A.prototype.setPlayingState=function(){this.uiMediator&&(this.uiMediator.setClickCatcherState(p.PlaybackState.PLAYING),this.uiMediator.hideClickCatcher(!1))},A.prototype.isContentComplete=function(){var e=this.contentPlaybackStateProxy.model;return e.streamType!=y.StreamType.LIVE&&e.streamType!=y.StreamType.DVR&&!(isNaN(e.time)||e.time<e.duration)},A.prototype.isAdPlaying=function(){return this.presoModel.isCurrentVideoAd},A.prototype.handleNotification=function(e){i.prototype.handleNotification.call(this,e)},A.prototype.listNotificationInterests=function(){return i.prototype.listNotificationInterests.call(this).concat([])},A.prototype.onRegister=function(){i.prototype.onRegister.call(this);var e=this.playerOptions.overrides;e.resumeTimeMaxProximityToAdBreak&&(this.resumeTimeMaxProximityToAdBreak=e.resumeTimeMaxProximityToAdBreak),this.isClickToPlay=!this.presoModel.isAutoplay;var t=this.facade.retrieveMediator(l.MediatorName.UI);t&&(this.uim=t);var r=this.facade.retrieveService(f.ServiceName.System);this.fullscreenRestrictedDuringAdPlay=r.isIos||r.isAndroid,this.uim&&(this.uim.disableFullscreen(),this.uim.setFullScreenAccessRestricted(this.fullscreenRestrictedDuringAdPlay)),this.setTransportType(y.StreamType.VOD)},A);function A(){var e=null!==i&&i.apply(this,arguments)||this;return e.uim=null,e.liveTZero=null,e.currentPresentationWidth=null,e.contentDurationReleased=!1,e.resumeTimeMaxProximityToAdBreak=5,e.isClickToPlay=!1,e.fullscreenRestrictedDuringAdPlay=!1,e.hasContent=!0,e}r.CommonPresentationMediator=E},{"../app/AppResources":47,"../core/Logger":86,"../enum/ErrorCode":102,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PlaybackState":119,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"./AbstractPresentationMediator":227,"es6-promise":25}],231:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ContentPresentationMediator=void 0;var i,o=e("../enum/NotificationName"),a=e("./CommonPresentationMediator"),n=(i=a.CommonPresentationMediator,_(s,i),s.prototype.start=function(){var e=this.presoModel;this.uiMediator&&this.uiMediator.setMuteState(e.isMuted),this.isClickToPlay?this.setForClickToPlay():this.notify(o.NotificationName.VIDEO_LOAD_START)},s.prototype.respondToVideoPlaying=function(){var e=!1;this.contentPlaybackStateProxy.model.started=!0,this.presoModel.started||(this.presoModel.started=!0,this.started=!0,this.uiMediator&&(this.uiMediator.displayPoster(!1),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt(),this.notify(o.NotificationName.ENABLE_UI),this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen(),this.setTransportType()),e=!0),i.prototype.respondToVideoPlaying.call(this),this.setPlayingState(),e&&this.notify(o.NotificationName.CONTENT_START),this.notify(o.NotificationName.CONTENT_PLAYING)},s.prototype.respondToVideoTimeUpdate=function(e){var t=this.contentPlaybackStateProxy.model;this.presoModel.started&&(this.presoModel.streamTime=e,t.time=e,i.prototype.respondToVideoTimeUpdate.call(this,e))},s.prototype.respondToVideoPaused=function(){i.prototype.respondToVideoPaused.call(this),this.setPausedState(),this.notify(o.NotificationName.CONTENT_PAUSED)},s.prototype.respondToIsPlayingLiveChange=function(e){this.uiMediator&&this.uiMediator.setIsPlayingLive(e),i.prototype.respondToIsPlayingLiveChange.call(this,e)},s.prototype.respondToVideoEnd=function(){this.notify(o.NotificationName.CONTENT_COMPLETE),i.prototype.respondToVideoEnd.call(this)},s.prototype.respondToDurationChange=function(e){this.presoModel.streamDuration=e,this.contentPlaybackStateProxy.model.duration=e,this.contentDurationReleased||this.releaseContentDuration(e)},s.prototype.onRegister=function(){i.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),this.isClickToPlay||this.prepareForPlayback()},s);function s(e,t){return i.call(this,e,t)||this}r.ContentPresentationMediator=n},{"../enum/NotificationName":114,"./CommonPresentationMediator":230}],232:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DaiPresentationMediator=void 0;var i,o=e("../ad/DaiStreamManager"),a=e("../ad/DaiStreamRequestAssembler"),n=e("../core/Util"),s=e("../enum/LogLevel"),c=e("../enum/ModelName"),l=e("../enum/NotificationName"),u=e("../enum/PlaybackState"),d=e("../enum/ProxyName"),p=e("../enum/ServiceName"),m=e("../model/AdDataProxy"),f=e("../playback/enum/DashEmsg"),y=e("./CommonPresentationMediator"),h=e("../enum/StreamType"),E=(i=y.CommonPresentationMediator,_(A,i),A.prototype.onRemove=function(){this.listenToStreamManager(!1),this.adService&&this.adService.reset(),this.streamManager.destroy(),this.streamManager=null,this.adDataProxy=null,i.prototype.onRemove.call(this)},A.prototype.closeAds=function(){this.listenToStreamManager(!1),this.adService&&this.adService.reset()},A.prototype.start=function(){var e=this.presoModel;this.uiMediator&&this.uiMediator.setMuteState(e.isMuted),this.adService.setMuted(e.isMuteAtPlayStart&&!e.userHasUnmuted),this.presoModel.usesSsai=!0,this.initStreamManager()},A.prototype.getAdBreakTimes=function(){return this.streamManager?this.streamManager.getCuePointsInContentTime():null},A.prototype.initStreamManager=function(){var t=this,e=this.assembleStreamRequest(),r=this.getModel(c.ModelName.PlayerOptions),i=!n.Util.isEmpty(e.assetKey);this.streamManager=new o.DaiStreamManager(this.adService),this.streamEventHandler=function(e){t.hStreamEvent(e)},this.listenToStreamManager(!0),i?this.streamManager.requestLiveStream(e,r.networkErrorRecovery):this.streamManager.requestVODStream(e,r.networkErrorRecovery)},A.prototype.assembleStreamRequest=function(){var e=this.facade.retrieveProxy(d.ProxyName.ResourceProxy).resource,t={buildEnv:this.getModel(c.ModelName.BuildInfo).env,platform:this.adService.getGamPlatformString(),mutedPlayback:this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted};return(new a.DaiStreamRequestAssembler).assembleStreamRequest(e,t)},A.prototype.mute=function(e){this.muteVideo(e),this.uiMediator&&this.uiMediator.setMuteState(e),this.adService.setMuted(e)},A.prototype.seek=function(e){var t,r;this.isAdPlaying()||(r=(t=this.streamManager.getPermittedSeekTime(e))===e?this.streamManager.streamTimeForContentTime(t):t,t!==e&&(this.notify(l.NotificationName.SEEK_REDIRECT_START,{requestedSeekTime:e,actualSeekTime:t}),this.pendingSeekTime=this.streamManager.streamTimeForContentTime(e)),this.seekVideo(r))},A.prototype.respondToId3Data=function(e){var t=n.Util.isEmpty(e.info)?n.Util.isEmpty(e.data)?null:e.data:e.info;!t||"google_dai"!==e.id&&e.id!=f.DashEmsg.GOOGLE_DAI?i.prototype.respondToId3Data.call(this,e):(this.log(s.LogLevel.INFO,"metadata received - id: "+e.id+" msg "+t),this.streamManager.onTimedMetadata({TXXX:t}))},A.prototype.respondToVideoPlaying=function(){this.presoModel.started||(this.presoModel.started=!0,this.uiMediator&&(this.uiMediator&&this.uiMediator.displayPoster(!1),this.uiMediator&&this.uiMediator.hideClickCatcher(!0),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt(),this.setTransportType()),this.notify(l.NotificationName.ENABLE_UI)),i.prototype.respondToVideoPlaying.call(this),this.isAdPlaying()?this.notify(l.NotificationName.AD_PLAYING):this.contentSegmentStarted&&(this.contentPlaybackStateProxy.model.state=u.PlaybackState.PLAYING,this.setPlayingState(),this.notify(l.NotificationName.CONTENT_PLAYING))},A.prototype.respondToVideoPaused=function(){i.prototype.respondToVideoPaused.call(this),this.isAdPlaying()?this.notify(l.NotificationName.AD_PAUSED):(this.contentPlaybackStateProxy.model.state=u.PlaybackState.PAUSED,this.setPausedState(),this.notify(l.NotificationName.CONTENT_PAUSED))},A.prototype.respondToVideoTimeUpdate=function(e){var t=this.contentPlaybackStateProxy.model;this.adService.setCurrentTime(e),this.streamManager.ignoreAdEvents(!1),this.presoModel.streamTime=e,t.time=this.streamManager.contentTimeForStreamTime(e);var r=this.streamManager.checkForAdPeriod(e);this.isAdPlaying()||r||(.75<e&&!this.contentSegmentStarted&&(this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,this.domProxy&&this.domProxy.showAdContainer(!1),this.setPlayingState(),this.setTransportType(),this.contentStartReleased||this.signalContentStart(),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator&&(this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen()),this.notify(l.NotificationName.CONTENT_SEGMENT_START)),this.contentSegmentStarted&&i.prototype.respondToVideoTimeUpdate.call(this,e),t.streamType!==h.StreamType.LIVE&&t.time>=t.duration&&!this.contentCompleteReleased&&this.signalContentComplete())},A.prototype.respondToVideoEnd=function(){this.streamManager.hasPostRoll()||this.contentCompleteReleased||this.signalContentComplete(),this.presoComplete=!0,i.prototype.respondToVideoEnd.call(this)},A.prototype.respondToDurationChange=function(e){var t=this.streamManager.contentTimeForStreamTime(e);this.contentPlaybackStateProxy.model.duration=t,this.presoModel.streamDuration=e,this.adService.setDuration(e),!this.contentDurationReleased&&t&&!isNaN(t)&&0<t&&this.releaseContentDuration(t),this.streamManager.streamDuration=e},A.prototype.isContentComplete=function(){return this.presoComplete},A.prototype.signalContentStart=function(){this.contentStartReleased=!0,this.notify(l.NotificationName.CONTENT_START)},A.prototype.signalContentComplete=function(){this.contentCompleteReleased=!0,this.notify(l.NotificationName.CONTENT_SEGMENT_END),this.notify(l.NotificationName.CONTENT_COMPLETE)},Object.defineProperty(A.prototype,"adService",{get:function(){return this.facade.retrieveService(p.ServiceName.DaiAd)},enumerable:!1,configurable:!0}),A.prototype.handleMediaUrlAvailable=function(e){var t,r,i,o=this.resourceProxy.playback.startTime,a=this.resourceProxy.ad.showPrerollOnNonZeroStart;!isNaN(o)&&0<o&&(t=this.rawAdSchedule.map(function(e){return e.streamTimeStart}),r=this.adjustStartTimeForAdBreakProximity(o,this.rawAdSchedule),i=this.streamManager.streamTimeForContentTime(r),this.checkForBreaksToUnlock(t),a?(this.resourceProxy.playback.startTime=NaN,this.pendingSeekTime=i):("dash"==this.resourceProxy.ad.dai.format&&this.streamManager.ignoreAdEvents(!0),this.resourceProxy.playback.startTime=i)),this.resourceProxy.location.mediaUrl=e,this.adService.initViewabilityTracking(),this.isClickToPlay?this.setForClickToPlay():(this.notify(l.NotificationName.VIDEO_LOAD_START),this.prepareForPlayback())},A.prototype.checkForBreaksToUnlock=function(e){if(e&&e.length){var t=this.resourceProxy.playback.startTime,r=this.resourceProxy.ad.showPrerollOnNonZeroStart,i=this.streamManager.streamTimeForContentTime(t),o=[];if(0<i){!0!==r&&o.push(0);for(var a=e.length;a--;)if(0<a&&i>e[a]){o.push(e[a]);break}this.streamManager&&this.streamManager.setUnlockedBreaks(o)}}},A.prototype.hStreamEvent=function(e){var t=o.DaiStreamManager.event;switch(e.type){case t.RAW_AD_SCHEDULE_AVAILABLE:this.rawAdSchedule=e.data.schedule;break;case t.STREAM_ID_AVAILABLE:this.presoModel.streamId=this.streamManager.streamId;break;case t.MEDIA_URL_AVAILABLE:this.handleMediaUrlAvailable(e.data.mediaUrl);break;case t.AD_CUEPOINTS_AVAILABLE:this.notify(l.NotificationName.AD_CUEPOINTS_AVAILABLE,e.data);break;case t.AD_PERIOD_STARTED:this.seekVideo(e.data.streamResumeTime);break;case t.AD_BREAK_START:this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(l.NotificationName.CONTENT_SEGMENT_END)),this.domProxy&&this.domProxy.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,this.uiMediator&&this.uiMediator.hideClickCatcher(!0),this.notify(l.NotificationName.AD_BREAK_START);break;case t.AD_BREAK_METADATA:var r=e.data;this.adDataProxy.breakInfo=r,this.notify(l.NotificationName.AD_BREAK_METADATA,{adBreakInfo:r});break;case t.AD_START:var i=e.data;this.adDataProxy.adInfo=i,this.notify(l.NotificationName.AD_START,{adInfo:i});break;case t.AD_PROGRESS:this.notify(l.NotificationName.AD_TIME_UPDATE,{currentTime:e.data.currentTime,duration:e.data.duration,streamTime:this.presoModel.streamTime,streamDuration:this.presoModel.streamDuration});break;case t.AD_FIRST_QUARTILE:this.notify(l.NotificationName.AD_FIRST_QUARTILE);break;case t.AD_MIDPOINT:this.notify(l.NotificationName.AD_MIDPOINT);break;case t.AD_THIRD_QUARTILE:this.notify(l.NotificationName.AD_THIRD_QUARTILE);break;case t.AD_COMPLETE:this.notify(l.NotificationName.AD_COMPLETE);break;case t.AD_BREAK_COMPLETE:this.domProxy&&this.domProxy.showAdContainer(!1),this.presoModel.isCurrentVideoAd=!1,this.notify(l.NotificationName.AD_BREAK_COMPLETE),this.pendingSeekTime&&(this.contentPlaybackStateProxy.model.started&&this.notify(l.NotificationName.SEEK_REDIRECT_COMPLETE),this.seekVideo(this.pendingSeekTime),this.pendingSeekTime=null);break;case t.AD_CLICK:this.pause();break;case t.AD_ERROR:this.notify(l.NotificationName.RESOURCE_ERROR,e.data)}},A.prototype.listenToStreamManager=function(e){if(this.streamManager){var t=o.DaiStreamManager.event,r=e?"on":"off";for(var i in t)this.streamManager[r](t[i],this.streamEventHandler)}},A.prototype.onRegister=function(){i.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),this.adDataProxy=new m.AdDataProxy(d.ProxyName.AdDataProxy,null),this.facade.registerProxy(this.adDataProxy)},A);function A(e,t){var r=i.call(this,e,t)||this;return r.contentSegmentStarted=!1,r.contentStartReleased=!1,r.pendingSeekTime=null,r.contentCompleteReleased=!1,r.presoComplete=!1,r.rawAdSchedule=null,r}r.DaiPresentationMediator=E},{"../ad/DaiStreamManager":32,"../ad/DaiStreamRequestAssembler":33,"../core/Util":88,"../enum/LogLevel":107,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PlaybackState":119,"../enum/ProxyName":123,"../enum/ServiceName":125,"../enum/StreamType":126,"../model/AdDataProxy":132,"../playback/enum/DashEmsg":182,"./CommonPresentationMediator":230}],233:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FullscreenMediator=void 0;var i,o=e("../enum/Browser"),a=e("../enum/NotificationName"),n=e("../enum/NotificationType"),s=e("../enum/Os"),c=e("../enum/ProxyName"),l=e("./LogAwareMediator"),u=e("screenfull"),d=(i=l.LogAwareMediator,_(p,i),p.prototype.onRemove=function(){this.isIos&&this.fsElement&&(this.fsElement.removeEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.removeEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler)),this.fsMgr&&this.fsMgr.off("change",this.changeHandler),this.fsElement=null,this.fsMgr=null,i.prototype.onRemove.call(this)},p.prototype.enter=function(){this.enabled&&(this.isIos?this.enterFsIos():this.fsMgr.request(this.fsElement))},p.prototype.exit=function(){this.enabled&&(this.isIos?this.exitFsIos():this.fsMgr.exit())},p.prototype.isFullScreenPermitted=function(){return this.enabled},p.prototype.isFullScreen=function(){return this.isFullscreen},Object.defineProperty(p.prototype,"isAndroidFirefox",{get:function(){var e;return null===this.pIsAndroidFirefox&&(e=this.systemService,this.pIsAndroidFirefox=e.os===s.Os.ANDROID&&e.browser===o.Browser.FIREFOX),this.pIsAndroidFirefox},enumerable:!1,configurable:!0}),p.prototype.handleNotification=function(e){var t=e.name;t!==a.NotificationName.VIDEO_LOADED_METADATA?this.enabled&&(t===a.NotificationName.ENTER_FULLSCREEN_REQUEST?this.enter():this.exit()):this.handleMetadataLoaded()},p.prototype.listNotificationInterests=function(){return[a.NotificationName.VIDEO_LOADED_METADATA,a.NotificationName.ENTER_FULLSCREEN_REQUEST,a.NotificationName.EXIT_FULLSCREEN_REQUEST]},p.prototype.handleMetadataLoaded=function(){this.enabled=this.enabled||this.webkitIosEnabled(),this.enabled&&this.sendNotification(a.NotificationName.FULLSCREEN_AVAILABLE,null)},p.prototype.hChange=function(e){this.isFullscreen=this.isIos?this.checkWebkitIsoState(e):u.isFullscreen,this.isAndroidFirefox&&(this.isFullscreen&&this.fsElement.setAttribute("controls",""),this.isFullscreen||this.fsElement.removeAttribute("controls")),this.sendNotification(a.NotificationName.FULLSCREEN_CHANGE,{isFullscreen:this.isFullscreen},n.NotificationType.INTERNAL)},p.prototype.enterFsIos=function(){this.fsElement[this.iosPropNames.ENTER_METHOD]()},p.prototype.exitFsIos=function(){this.fsElement[this.iosPropNames.EXIT_METHOD]()},p.prototype.webkitIosEnabled=function(){return this.systemService.isIos&&this.fsElement[this.iosPropNames.SUPPORTED]},p.prototype.checkWebkitIsoState=function(e){return e.type===this.iosPropNames.ENTER_EVENT},p.prototype.onRegister=function(){var e=this.systemService,t=this.facade.retrieveProxy(c.ProxyName.PlayerDomProxy);e.isIos||e.isAndroid?(this.isIos=e.isIos,this.fsElement=t.getVideo()):this.fsElement=t.getMain(),!this.isIos&&this.fsElement&&this.fsMgr.isEnabled?(this.enabled=!0,this.fsMgr.on("change",this.changeHandler)):this.fsElement&&this.isIos&&(this.fsElement.addEventListener(this.iosPropNames.ENTER_EVENT,this.changeHandler),this.fsElement.addEventListener(this.iosPropNames.EXIT_EVENT,this.changeHandler))},p);function p(e,t){var r=i.call(this,e,t)||this;return r.isFullscreen=!1,r.fsElement=null,r.enabled=!1,r.pIsAndroidFirefox=null,r.isIos=!1,r.fsMgr=null,r.iosPropNames={ENTER_EVENT:"webkitbeginfullscreen",EXIT_EVENT:"webkitendfullscreen",ENTER_METHOD:"webkitEnterFullscreen",EXIT_METHOD:"webkitExitFullscreen",SUPPORTED:"webkitSupportsFullscreen"},r.fsMgr=u,r.changeHandler=function(e){return r.hChange(e)},r}r.FullscreenMediator=d},{"../enum/Browser":98,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/Os":116,"../enum/ProxyName":123,"./LogAwareMediator":235,screenfull:29}],234:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ImaPresentationMediator=void 0;var o,a=e("../ad/ImaAdCallAssembler"),c=e("../ad/ImaAdPlayer"),n=e("../core/Util"),i=e("../enum/ModelName"),s=e("../enum/NotificationName"),l=e("../enum/PlaybackState"),u=e("../enum/ProxyName"),d=e("../enum/ServiceName"),p=e("../model/AdDataProxy"),m=e("./CommonPresentationMediator"),f=(o=m.CommonPresentationMediator,_(y,o),y.prototype.onRemove=function(){this.killAdPlayer(),this.adDataProxy=null,o.prototype.onRemove.call(this)},y.prototype.closeAds=function(){this.listenToAdPlayer(!1),this.adPlayer&&this.adPlayer.destroy()},y.prototype.start=function(){var e,t=this.resourceProxy.playback.startTime,r=this.resourceProxy.ad.showPrerollOnNonZeroStart,i=!isNaN(t)&&0<t,o=this.resourceProxy.location.mediaUrl;this.hasContent=n.Util.isString(o)&&!n.Util.isEmpty(o),i&&(e=this.resourceProxy.ad.adTagParameters.cust_params,this.breaksToSkip=e&&e.skippod||null,r||null!==this.breaksToSkip||(this.breaksToSkip="1")),i&&r&&(this.resourceProxy.playback.startTime=NaN,this.pendingSeekTime=t),this.mute(this.presoModel.isMuted),this.isClickToPlay?this.setForClickToPlay():this.hasContent?(this.notify(s.NotificationName.VIDEO_LOAD_START),this.prepareForPlayback()):this.play()},y.prototype.play=function(){this.presoModel.started?this.isAdPlaying()?this.adPlayer.resumeAd():this.playVideo():(this.adService.initializeAdsLoader(),this.domProxy&&this.domProxy.showAdContainer(!0),this.createAdPlayer())},y.prototype.pause=function(){this.isAdPlaying()&&this.adPlayer?this.adPlayer.pauseAd():this.pauseVideo()},y.prototype.mute=function(e){this.muteVideo(e),this.adPlayer&&(e&&this.adPlayer.mute(),e||this.adPlayer.unmute(this.domProxy.getVideoVolume())),this.uiMediator&&this.uiMediator.setMuteState(e)},y.prototype.seek=function(e){var t,r=e;!this.adPlayer||(t=this.adPlayer.getBreakForSeekTime(e))&&(r=t.startTime,this.pendingSeekTime=e,this.pendingBreak=t,this.notify(s.NotificationName.SEEK_REDIRECT_START,{requestedSeekTime:e,actualSeekTime:r})),this.seekVideo(r)},y.prototype.getAdBreakTimes=function(){var e=[],t=this.adPlayer&&this.adPlayer.adBreaks;if(!t)return e;if(t.pre&&e.push({start:t.pre.startTime,duration:t.pre.endTime-t.pre.startTime,played:t.pre.hasPlayed}),t.mid)for(var r,i=t.mid.length;i--;)r=t.mid[i],e.unshift({start:r.startTime,duration:r.endTime-r.startTime,played:r.hasPlayed});return t.post&&e.push({start:t.post.startTime,duration:t.post.endTime-t.post.startTime,played:t.post.hasPlayed}),e},y.prototype.respondToVideoPlaying=function(){this.startPreso(),this.uiMediator&&this.setTransportType(),o.prototype.respondToVideoPlaying.call(this),this.isAdPlaying()?this.notify(s.NotificationName.AD_PLAYING):this.contentSegmentStarted&&(this.contentPlaybackStateProxy.model.state=l.PlaybackState.PLAYING,this.setPlayingState(),this.notify(s.NotificationName.CONTENT_PLAYING))},y.prototype.respondToVideoPaused=function(){o.prototype.respondToVideoPaused.call(this),this.isAdPlaying()?this.notify(s.NotificationName.AD_PAUSED):(this.contentPlaybackStateProxy.model.state=l.PlaybackState.PAUSED,this.setPausedState(),this.notify(s.NotificationName.CONTENT_PAUSED))},y.prototype.respondToVideoTimeUpdate=function(e){var t=this.contentPlaybackStateProxy.model,r=this.isAdPlaying();if(this.setAdPlayerBitrate(),!r){if(this.presoModel.streamTime=e,t.time=e,this.pendingBreak&&1<e-this.pendingBreak.startTime)return this.adPlayer&&(this.adPlayer.cancelPendingBreak(this.pendingBreak.breakId),this.adPlayer.markAsPlayed([this.pendingBreak.breakId])),this.pendingBreak=null,this.notify(s.NotificationName.SEEK_REDIRECT_COMPLETE),void(this.pendingSeekTime&&this.seek(this.pendingSeekTime));.75<e&&!this.contentSegmentStarted&&this.startContentSegment(),this.contentSegmentStarted&&o.prototype.respondToVideoTimeUpdate.call(this,e)}},y.prototype.respondToVideoEnd=function(){this.notify(s.NotificationName.CONTENT_SEGMENT_END),this.notify(s.NotificationName.CONTENT_COMPLETE),this.contentComplete=!0;var e=!!this.adPlayer;e&&(!e||this.adPlayer.hasPostRoll())||o.prototype.respondToVideoEnd.call(this)},y.prototype.respondToDurationChange=function(e){var t;this.contentPlaybackStateProxy.model.duration=e,this.presoModel.streamDuration=e,!isNaN(e)&&0<e&&(this.contentDurationReleased||this.releaseContentDuration(e),this.pendingCuepoints&&(t=this.pendingCuepoints,this.pendingCuepoints=null,this.notify(s.NotificationName.AD_CUEPOINTS_AVAILABLE,{cuepoints:t})))},y.prototype.respondToBufferingStatusCheck=function(){this.isAdPlaying()||o.prototype.respondToBufferingStatusCheck.call(this)},y.prototype.respondToQualityChange=function(e){void 0===e&&(e=null),this.setAdPlayerBitrate(),o.prototype.respondToQualityChange.call(this,e)},y.prototype.respondToSizeChange=function(){this.adPlayer&&this.adPlayer.updateSize(this.presoModel.isFullscreen)},y.prototype.respondToError=function(e){this.fatalContentErrorReceived=e.fatal,o.prototype.respondToError.call(this,e)},y.prototype.startPreso=function(){this.presoModel.started||(this.presoModel.started=!0,this.uiMediator&&(this.uiMediator.displayPoster(!1),this.uiMediator.hideClickCatcher(!0),this.presoModel.isMuteAtPlayStart&&!this.presoModel.userHasUnmuted&&this.uiMediator.showUnmutePrompt()),this.notify(s.NotificationName.ENABLE_UI))},y.prototype.startContentSegment=function(){this.contentSegmentStarted=!0,this.contentPlaybackStateProxy.model.started=!0,this.domProxy&&this.domProxy.showAdContainer(!1),this.setPlayingState(),this.uiMediator&&!this.contentPlaybackStateProxy.model.liveStreamInfo&&this.uiMediator.setSeekable(!0),this.contentStartReleased||(this.contentStartReleased=!0,this.notify(s.NotificationName.CONTENT_START)),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator&&(this.uiMediator.setFullScreenAccessRestricted(!1),this.uiMediator.enableFullscreen()),this.notify(s.NotificationName.CONTENT_SEGMENT_START)},y.prototype.setAdPlayerBitrate=function(){var e;!this.adPlayer||(e=this.contentPlaybackStateProxy.model.bitrate)&&!isNaN(e)&&(this.adPlayer.contentBitrate=e)},y.prototype.hAdPlayerEvent=function(e){var t=c.ImaAdPlayer.event;switch(e.type){case t.AD_CLICK_ELEMENT_VISIBILITY_REQUESTED:this.domProxy.showAdClickElement(!0);break;case t.AD_CLICK:this.notify(s.NotificationName.AD_CLICK,e.data);break;case t.AD_SKIPPED:this.notify(s.NotificationName.AD_SKIPPED,e.data);break;case t.RAW_AD_SCHEDULE_AVAILABLE:break;case t.AD_CUEPOINTS_AVAILABLE:this.pendingCuepoints=e.data.cuepoints;break;case t.CONTENT_PAUSE_REQUESTED:this.breakMetaDataReleased=!1,this.respondToPauseRequestFromAdPlayer();break;case t.CONTENT_RESUME_REQUESTED:this.resumeContentPlay();break;case t.AD_BREAK_START:this.pendingBreak=null,this.respondToContentEnd(),this.respondToAdBreakStart();break;case t.AD_BREAK_METADATA:this.pendingBreak=null,this.respondToAdBreakMetadata(e.data);break;case t.AD_LOADED:this.pendingBreak=null,this.respondToAdLoaded(e.data);break;case t.AD_START:this.pendingBreak=null,this.respondToAdStart(e.data);break;case t.AD_PROGRESS:this.respondToAdProgress(e.data);break;case t.AD_PAUSED:this.notify(s.NotificationName.AD_PAUSED),this.notify(s.NotificationName.RESOURCE_PAUSED);break;case t.AD_RESUMED:this.notify(s.NotificationName.AD_PLAYING),this.notify(s.NotificationName.RESOURCE_PLAYING);break;case t.AD_FIRST_QUARTILE:this.notify(s.NotificationName.AD_FIRST_QUARTILE);break;case t.AD_MIDPOINT:this.notify(s.NotificationName.AD_MIDPOINT);break;case t.AD_THIRD_QUARTILE:this.notify(s.NotificationName.AD_THIRD_QUARTILE);break;case t.AD_COMPLETE:this.respondToAdComplete(),this.domProxy.showAdClickElement(!1),this.notify(s.NotificationName.AD_COMPLETE);break;case t.AD_BREAK_COMPLETE:this.breakMetaDataReleased=!1,this.respondToAdBreakComplete();break;case t.ALL_ADS_COMPLETED:this.breakMetaDataReleased=!1,this.killAdPlayer();break;case t.AD_BREAK_DISCARDED:this.breakMetaDataReleased=!1,this.domProxy.showAdClickElement(!1),this.notify(s.NotificationName.AD_BREAK_DISCARDED);break;case t.AD_BUFFERING:break;case t.AD_STALLED:this.adDataProxy.resetAll(),this.notify(s.NotificationName.AD_STALLED,e.data);break;case t.AD_ERROR:this.domProxy.showAdClickElement(!1),this.notify(s.NotificationName.AD_ERROR,e.data);break;case t.AD_INIT_ERROR:this.killAdPlayer(),this.notify(s.NotificationName.AD_ERROR,e.data),this.resumeContentPlay()}},y.prototype.respondToPauseRequestFromAdPlayer=function(){this.presoModel.started?(this.pauseVideo(),this.respondToContentEnd()):this.startPreso()},y.prototype.resumeContentPlay=function(){var e,t,r,i=this;this.domProxy.showAdClickElement(!1),this.fatalContentErrorReceived?this.notify(s.NotificationName.DISABLE_UI):this.hasContent&&!this.contentComplete?(this.contentSegmentStarted||(this.contentStartReleased||(e=this.resourceProxy.playback.startTime,!isNaN(e)&&0<e&&(t=this.getAdBreakTimes(),r=this.adjustStartTimeForAdBreakProximity(e,t),this.resourceProxy.playback.startTime=r)),this.load().then(function(){i.startContentSegment()})),this.pendingSeekTime&&(this.notify(s.NotificationName.SEEK_REDIRECT_COMPLETE),this.seekVideo(this.pendingSeekTime),this.pendingSeekTime=null),this.startPreso(),this.play()):o.prototype.respondToVideoEnd.call(this)},y.prototype.respondToContentEnd=function(){this.contentSegmentStarted&&(this.contentSegmentStarted=!1,this.notify(s.NotificationName.CONTENT_SEGMENT_END))},y.prototype.respondToAdBreakStart=function(){this.domProxy&&this.domProxy.showAdContainer(!0),this.presoModel.isCurrentVideoAd=!0,this.uiMediator&&(this.uiMediator.hideClickCatcher(!0),this.fullscreenRestrictedDuringAdPlay&&this.uiMediator.disableFullscreen()),this.notify(s.NotificationName.AD_BREAK_START)},y.prototype.respondToAdBreakMetadata=function(e){this.breakMetaDataReleased||(this.adDataProxy.breakInfo=e,this.breakMetaDataReleased=!0,this.notify(s.NotificationName.AD_BREAK_METADATA,{adBreakInfo:e}))},y.prototype.respondToAdStart=function(e){this.adDataProxy.adInfo=e,this.notify(s.NotificationName.AD_START,{adInfo:e}),this.notify(s.NotificationName.RESOURCE_PLAYING),this.checkPreload()},y.prototype.checkPreload=function(){var r,i=this,e=!0===this.resourceProxy.ad.ima.preloadContentAtEndOfPreRoll,t=this.adDataProxy.adInfo.adPosition===this.adDataProxy.breakInfo.adTotal;e&&t&&(r=function(e){var t=e.data;n.Util.clampValue(Math.ceil(t.duration/4),2,10)<=Math.round(t.currentTime)&&(i.adPlayer.off(c.ImaAdPlayer.event.AD_PROGRESS,r),i.load())},this.adPlayer.on(c.ImaAdPlayer.event.AD_PROGRESS,r))},y.prototype.respondToAdComplete=function(){this.adDataProxy.resetAd()},y.prototype.respondToAdLoaded=function(e){this.adDataProxy.adInfo=e},y.prototype.respondToAdProgress=function(e){this.notify(s.NotificationName.AD_TIME_UPDATE,{currentTime:e.currentTime,duration:e.duration})},y.prototype.respondToAdBreakComplete=function(){this.domProxy&&this.domProxy.showAdContainer(!1),this.presoModel.isCurrentVideoAd=!1,this.notify(s.NotificationName.AD_BREAK_COMPLETE)},Object.defineProperty(y.prototype,"adService",{get:function(){return this.facade.retrieveService(d.ServiceName.ImaAd)},enumerable:!1,configurable:!0}),y.prototype.assembleAdContextInfo=function(e){var t=this.facade.retrieveService(d.ServiceName.System);return{buildEnv:this.getModel(i.ModelName.BuildInfo).env,platform:t.platform,mutedPlayback:e}},y.prototype.listenToAdPlayer=function(e){var t=this;if(this.adPlayer){var r=c.ImaAdPlayer.event,i=e?"on":"off";for(var o in r)this.adPlayer[i](r[o],e?function(e){return t.hAdPlayerEvent(e)}:null)}},y.prototype.createAdPlayer=function(){var e=this.facade.retrieveProxy(u.ProxyName.ResourceProxy).resource,t=this.presoModel.isMuteAtPlayStart,r={presentationContainer:this.domProxy.getMain(),playheadInterface:this.domProxy.getVideo(),initialPlayState:{autoplay:this.presoModel.isAutoplay,muted:t},playAdsAfterTime:this.breaksToSkip&&null!==this.breaksToSkip.match(/^1/)?0:null,adService:this.adService,logger:this.logger,ad:e.ad,adCallUrl:this.getAdCallUrl(e,t),enableStalledAdCheck:!0};if(this.adPlayer=new c.ImaAdPlayer(r),this.breaksToSkip){for(var i=this.breaksToSkip.split(",").map(function(e){return parseInt(e)}),o=[],a=i.length;a--;){var n=i[a],s=1===n?"pre_0":"mid_"+String(n-1);o.push(s)}this.adPlayer.markAsPlayed(o)}this.listenToAdPlayer(!0)},y.prototype.getAdCallUrl=function(e,t){var r=e.ad.ima.adCallUrl,i=!n.Util.isEmpty(r),o=new a.ImaAdCallAssembler;return i?t?o.substituteStringForMutedPlayback(r):r:o.assembleAdCall(e,this.assembleAdContextInfo(t))},y.prototype.killAdPlayer=function(){this.adPlayer&&(this.listenToAdPlayer(!1),this.adPlayer.destroy(),this.adPlayer=null)},y.prototype.onRegister=function(){o.prototype.onRegister.call(this),this.domProxy&&this.domProxy.showAdContainer(!1),this.adDataProxy=new p.AdDataProxy(u.ProxyName.AdDataProxy,null),this.facade.registerProxy(this.adDataProxy)},y);function y(e,t){var r=o.call(this,e,t)||this;return r.contentSegmentStarted=!1,r.pendingSeekTime=null,r.contentComplete=!1,r.contentStartReleased=!1,r.fatalContentErrorReceived=!1,r.breaksToSkip=null,r.breakMetaDataReleased=!1,r.pendingBreak=null,r.preloadContent=!1,r}r.ImaPresentationMediator=f},{"../ad/ImaAdCallAssembler":34,"../ad/ImaAdPlayer":35,"../core/Util":88,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PlaybackState":119,"../enum/ProxyName":123,"../enum/ServiceName":125,"../model/AdDataProxy":132,"./CommonPresentationMediator":230}],235:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.LogAwareMediator=void 0;var i,o=e("../mvc/AbstractMediator"),a=(i=o.AbstractMediator,_(n,i),Object.defineProperty(n.prototype,"logger",{get:function(){return this.facade.logger},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logger.log.apply(this.logger,e)},n);function n(e,t){return i.call(this,e,t)||this}r.LogAwareMediator=a},{"../mvc/AbstractMediator":162}],236:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PluginMediator=void 0;var i,l=e("../app/AppResources"),o=e("../app/PluginServices"),u=e("../core/Util"),d=e("../dataservice/ScriptLoader"),p=e("../enum/LogLevel"),a=e("../enum/MediatorName"),m=e("../enum/ModelName"),n=e("../enum/NotificationName"),f=e("../enum/PluginPriority"),s=e("../enum/ProxyName"),c=e("../enum/ServiceName"),y=e("../util/Utils"),h=e("./LogAwareMediator"),E=(i=h.LogAwareMediator,_(A,i),A.prototype.onRemove=function(){if(this.plugins)for(var e in this.plugins)this.killPlugin(e);this.plugins=null,i.prototype.onRemove.call(this)},A.prototype.removePlugin=function(e){this.killPlugin(e)},A.prototype.getPlugin=function(e){return this.plugins[e]||null},A.prototype.toggleDiagnosticPlugin=function(){this.diagnosticPlugin?(this.diagnosticPluginVisible=!this.diagnosticPluginVisible,this.diagnosticPluginVisible?this.diagnosticPlugin.show():this.diagnosticPlugin.hide()):this.createDiagnosticPlugin()},A.prototype.listNotificationInterests=function(){return[n.NotificationName.LOAD_PLUGINS,n.NotificationName.AD_BREAK_START,n.NotificationName.CONTENT_START,n.NotificationName.REMOVE_PLUGIN]},A.prototype.handleNotification=function(e){switch(e.name){case n.NotificationName.LOAD_PLUGINS:this.loadPlugins(e.body);break;case n.NotificationName.REMOVE_PLUGIN:this.removePlugin(e.body.name);break;case n.NotificationName.AD_BREAK_START:case n.NotificationName.CONTENT_START:null!==this.pendingLoads&&this.loadPendingPlugins()}},A.prototype.createDiagnosticPlugin=function(){var e=this,t=l.AppResources.nativePluginConfig.diagnostic;this.createPluginServices(),t&&this.loadScripts([t],null,function(){e.diagnosticPlugin=e.plugins[t.name],e.diagnosticPluginVisible=!0})},A.prototype.createPluginServices=function(){var t,e,r;this.services||(t=this.facade.retrieveMediator(a.MediatorName.APPLICATION),e=this.facade.retrieveMediator(a.MediatorName.UI),r=this.getModel(m.ModelName.PlayerOptions),this.services=new o.PluginServices({viewController:e?e.viewController:null,buildInfo:this.facade.retrieveService(c.ServiceName.BuildInfo),system:this.facade.retrieveService(c.ServiceName.System),domProxy:this.facade.retrieveProxy(s.ProxyName.PlayerDomProxy),localization:this.facade.retrieveProxy(s.ProxyName.LocalizationProxy).getApi(),playerOptions:r.model.data,dispatch:function(e){t.dispatchPluginEvent(e)}}))},A.prototype.createPlugin=function(e){var t,r=this.facade.retrieveMediator(a.MediatorName.APPLICATION),i=e.classRef?e.classRef:y.Utils.classFromQualifiedName(e.qualifiedClassName),o=e.options||{};e.name&&(o.name=e.name),i&&(t=void 0,t=u.Util.isFunction(i.onRegister)?i:new i,void 0!==(this.plugins[e.name]=t).onRegister&&t.onRegister(r.getAppApi(),o,this.services),this.log(p.LogLevel.INFO,"Created plugin '"+e.name+"'"))},A.prototype.killPlugin=function(e){this.plugins[e]&&(u.Util.isFunction(this.plugins[e].destroy)&&this.plugins[e].destroy(),delete this.plugins[e])},A.prototype.loadPendingPlugins=function(){this.loadScripts(this.pendingLoads.slice()),this.pendingLoads=null},A.prototype.loadPlugins=function(e){var t=this.getModel(m.ModelName.PlayerOptions),r=e.plugins||t.plugins,i=this.processCfg(r),o=!this.getModel(m.ModelName.PresentationState).started,a=!!e.nextNotification&&e.nextNotification||null,n=!!e.callback&&e.callback||null;if(!i.high.length&&!i.low.length)return a&&this.sendNotification(a),void(n&&n());this.createPluginServices();var s,c=!1;o?(i.low.length&&(this.pendingLoads=i.low),i.high.length&&(c=!0,this.loadScripts(i.high,a,n))):(s=i.low.concat(i.high),c=!0,this.loadScripts(s,a,n)),c||(a&&this.sendNotification(a),n&&n())},A.prototype.loadScripts=function(t,r,i){var o=this;void 0===r&&(r=null),void 0===i&&(i=null);for(var a={},e=[],n=t.length;n--;){var s=t[n];s.loaded?this.createPlugin(s):(a[s.url]=n,e.push(s.url))}if(!e.length)return r&&this.sendNotification(r),void(i&&i());var c=this.getModel(m.ModelName.PlayerOptions);new d.ScriptLoader({urls:e,errorRecovery:c.networkErrorRecovery,onComplete:function(e){!e.data.error&&e.data.url?(void 0!==a[e.data.url]&&o.createPlugin(t[a[e.data.url]]),delete a[e.data.url]):(delete a[e.data.url],o.log(p.LogLevel.ERROR,l.AppResources.messages.PLUGIN_LOAD_ERROR)),u.Util.isEmpty(a)&&(r&&o.sendNotification(r),i&&i())}})},A.prototype.processCfg=function(e){if(!e)return{high:[],low:[]};for(var t=!this.getModel(m.ModelName.PresentationState).started,r=[],i=[],o={high:r,low:i},a=e.length;a--;){var n=e[a],s=!u.Util.isEmpty(n.url)&&!u.Util.isEmpty(n.qualifiedClassName),c=!u.Util.isEmpty(n.classRef);(s||c)&&(t&&n.priority===f.PluginPriority.HIGH?r.unshift(n):i.unshift(n),n.loaded=c)}return o},A);function A(e){var t=i.call(this,e)||this;return t.plugins={},t.pendingLoads=null,t.services=null,t.diagnosticPlugin=null,t.diagnosticPluginVisible=!1,t}r.PluginMediator=E},{"../app/AppResources":47,"../app/PluginServices":48,"../core/Util":88,"../dataservice/ScriptLoader":93,"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/PluginPriority":122,"../enum/ProxyName":123,"../enum/ServiceName":125,"../util/Utils":220,"./LogAwareMediator":235}],237:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimerMediator=void 0;var i,o=e("../enum/NotificationName"),a=e("../enum/NotificationType"),n=e("../util/Timer"),s=e("./LogAwareMediator"),c=(i=s.LogAwareMediator,_(l,i),l.prototype.killTimer=function(){this.timer&&this.timer.started&&this.timer.stop()},l.prototype.listNotificationInterests=function(){return[o.NotificationName.RESOURCE_START]},l.prototype.handleNotification=function(e){switch(e.name){case o.NotificationName.RESOURCE_START:this.timer&&!this.timer.started&&this.timer.start()}},l.prototype.onRegister=function(){i.prototype.onRegister.call(this)},l.prototype.onRemove=function(){this.timer.destroy(),this.timer=null,i.prototype.onRemove.call(this)},l.prototype.onTic=function(e){this.facade.sendNotification(o.NotificationName.TIMER_TIC,{count:e.data.count},a.NotificationType.INTERNAL)},l);function l(e){var t=i.call(this,e)||this;return t.timer=new n.Timer,t.timer.on(n.Timer.TIC_EVENT,function(e){return t.onTic(e)}),t}r.TimerMediator=c},{"../enum/NotificationName":114,"../enum/NotificationType":115,"../util/Timer":219,"./LogAwareMediator":235}],238:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UiMediator=void 0;var i,s=e("../enum/LogLevel"),o=e("../enum/MediatorName"),a=e("../enum/ModelName"),n=e("../enum/NotificationName"),c=e("../enum/NotificationType"),l=e("../enum/PlaybackState"),u=e("../enum/ProxyName"),d=e("../enum/StreamType"),p=e("../enum/VideoMode"),m=e("./LogAwareMediator"),f=(i=m.LogAwareMediator,_(y,i),y.prototype.onRegister=function(){var t=this,e=this.facade.retrieveProxy(u.ProxyName.LocalizationProxy);this.ui.setLocalizationService(e),this.ui.setThumbnailService({getThumbnail:function(e){return t.facade.retrieveProxy(u.ProxyName.ContentPlaybackStateProxy).getThumbnail(e)}})},y.prototype.onRemove=function(){this.viewControl&&this.viewControl.destroy(),this.viewControl=null,this.enums=null,this.fsm=null,i.prototype.onRemove.call(this)},Object.defineProperty(y.prototype,"viewController",{get:function(){return this.ui},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"controlNames",{get:function(){return this.enums.ControlName},enumerable:!1,configurable:!0}),y.prototype.uiIsStandardView=function(){return this.ui.isStandardView()},y.prototype.setSeekNotice=function(e,t){this.ui.setSeekNotice(e,t)},y.prototype.setFullScreenAccessRestricted=function(e){this.fullScreenAccessRestricted=e},y.prototype.killUi=function(){this.viewControl&&this.viewControl.destroy(),this.viewControl=null},y.prototype.initialize=function(e){this.enums=e,this.init()},y.prototype.enableControl=function(e){this.ui.enableControl(e)},y.prototype.disableControl=function(e){this.ui.disableControl(e)},y.prototype.enableFullscreen=function(){!this.fullScreenAccessRestricted&&this.isFullScreenAvailable()&&this.enableControl(this.controlNames.FULLSCREEN_TOGGLE)},y.prototype.disableFullscreen=function(){this.disableControl(this.controlNames.FULLSCREEN_TOGGLE)},y.prototype.setMuteState=function(e){this.ui.setMuteState(e)},y.prototype.forceControlsVisible=function(e){this.ui.forceControlsVisible(e)},y.prototype.setSeekable=function(e){this.ui.setSeekable(e)},y.prototype.engageSeek=function(){this.ui.forceControlsVisible(!0),this.ui.beginSeekMove()},y.prototype.disengageSeek=function(){var e=this;this.ui.endSeekMove(),setTimeout(function(){return e.ui.forceControlsVisible(!1)},500)},y.prototype.moveSeekBy=function(e){this.ui.moveSeekBy(e)},y.prototype.setVolume=function(e){!isNaN(e)&&0<=e&&e<=1&&this.ui.setVolume(e)},y.prototype.setTransportType=function(e){var t=e==d.StreamType.LIVE?1:e==d.StreamType.DVR?2:0;this.ui.setTransportType(t)},y.prototype.setIsPlayingLive=function(e){this.isPlayingLive=e,this.ui.setIsPlayingLive(e)},y.prototype.setClosedCaptionState=function(e){this.ui.setClosedCaptionState(e)},y.prototype.updateProgress=function(e){var t=e.playheadTime,r=e.duration;this.ui.updateProgress({currentTime:t,duration:r});var i=this.controlNames;this.isPlayingLive||t+this.increment>=r?this.ui.disableControl(i.SEEK_FORWARD_BUTTON):this.ui.enableControl(i.SEEK_FORWARD_BUTTON),t<=this.increment?this.ui.disableControl(i.SEEK_BACK_BUTTON):this.ui.enableControl(i.SEEK_BACK_BUTTON)},y.prototype.setClickCatcherState=function(e){var t=e===l.PlaybackState.PLAYING?this.enums.PlayState.PLAYING:this.enums.PlayState.PAUSED;this.ui.setClickCatcherState(t)},y.prototype.hideClickCatcher=function(e){this.ui.hideClickCatcher(e)},y.prototype.displayPoster=function(e){this.ui.showDecorator(this.enums.DecoratorName.POSTER,e)},y.prototype.activatePoster=function(){this.ui.activatePoster()},y.prototype.showUnmutePrompt=function(){this.ui.showDecorator(this.enums.DecoratorName.UNMUTE_PROMPT,!0)},y.prototype.displaySpinner=function(e){this.ui.showDecorator(this.enums.DecoratorName.SPINNER,e)},y.prototype.setAccVolumeLevelIndicator=function(e){this.ui.setAccVolumeLevelIndicator(e)},y.prototype.setVideoMode=function(e){this.ui.setVideoMode(e)},y.prototype.resetUi=function(){this.hideClickCatcher(!0),this.displayPoster(!1),this.ui.setChapterMarkers([]),this.ui.setVideoMode(p.VideoMode.IDLE)},y.prototype.handleNotification=function(e){var t=e.name,r=e.body;if(this.ui)switch(t){case n.NotificationName.ENABLE_UI:this.enableFullscreen(),this.ui.activateControls();break;case n.NotificationName.DISABLE_UI:this.ui.setVideoMode(p.VideoMode.IDLE),this.ui.inactivateControls();break;case n.NotificationName.VIDEO_LOAD_START:this.displaySpinner(!0);break;case n.NotificationName.VIDEO_LOAD_COMPLETE:this.displaySpinner(!1);break;case n.NotificationName.CONTENT_TIME_UPDATE:if(this.seekRedirectPending)return;this.ui.updateProgress({currentTime:r.contentTime,duration:r.contentDuration});break;case n.NotificationName.AD_CUEPOINTS_AVAILABLE:this.ui.setChapterMarkers(r.cuepoints);break;case n.NotificationName.AD_TIME_UPDATE:this.ui.updateProgress({currentTime:r.currentTime,duration:r.duration});break;case n.NotificationName.TEXT_TRACK_AVAILABLE:this.ccAvail=!0,this.ui.enableControl(this.controlNames.CC_TOGGLE),this.ccEnabled&&(this.ui.setClosedCaptionState(!0),this.activateCaptions(!0));break;case n.NotificationName.TEXT_TRACK_DISPLAY_MODE_CHANGE:this.doCaptionCheckOnControlVisChange();break;case n.NotificationName.CONTENT_SEEKING:if(this.displaySpinner(!0),this.seekRedirectPending)return;this.ui.setSeekComplete();break;case n.NotificationName.SEEK_REDIRECT_START:this.seekRedirectPending=!0;break;case n.NotificationName.SEEK_REDIRECT_COMPLETE:this.seekRedirectPending=!1;break;case n.NotificationName.CONTENT_SEEKED:if(this.displaySpinner(!1),this.seekRedirectPending)return;this.ui.setSeekComplete();break;case n.NotificationName.CONTENT_BUFFERING:this.displaySpinner(r.value);break;case n.NotificationName.FULLSCREEN_AVAILABLE:this.enableFullscreen();break;case n.NotificationName.FULLSCREEN_CHANGE:this.ui.setFullscreenState(e.body.isFullscreen);break;case n.NotificationName.PRESENTATION_SIZE_CHANGE:this.ui.updateSize();break;case n.NotificationName.RESOURCE_PLAYING:this.displaySpinner(!1),this.setPlayState(l.PlaybackState.PLAYING);break;case n.NotificationName.RESOURCE_PAUSED:this.setPlayState(l.PlaybackState.PAUSED);break;case n.NotificationName.AD_BREAK_START:this.ui.hidePanelsForAdPlay(!0),this.ui.setVideoMode(p.VideoMode.AD);break;case n.NotificationName.CONTENT_START:case n.NotificationName.CONTENT_SEGMENT_START:this.ui.setVideoMode(p.VideoMode.CONTENT),this.ccAvail&&this.ui.enableControl(this.controlNames.CC_TOGGLE);break;case n.NotificationName.AD_BREAK_COMPLETE:case n.NotificationName.CONTENT_SEGMENT_END:case n.NotificationName.RESOURCE_INTERRUPTED:case n.NotificationName.CONTENT_COMPLETE:this.ui.resetProgress(),this.ui.setVideoMode(p.VideoMode.IDLE),t===n.NotificationName.AD_BREAK_COMPLETE?this.ui.hidePanelsForAdPlay(!1):this.ui.disableControl(this.controlNames.CC_TOGGLE),t!=n.NotificationName.RESOURCE_INTERRUPTED&&t!==n.NotificationName.CONTENT_COMPLETE||(this.ccAvail=!1);break;case n.NotificationName.READY:case n.NotificationName.LANGUAGE_CHANGE:this.ui.updateText()}},y.prototype.listNotificationInterests=function(){return[n.NotificationName.AD_CUEPOINTS_AVAILABLE,n.NotificationName.ENABLE_UI,n.NotificationName.DISABLE_UI,n.NotificationName.SEEK_REDIRECT_START,n.NotificationName.SEEK_REDIRECT_COMPLETE,n.NotificationName.CONTENT_SEEKED,n.NotificationName.CONTENT_BUFFERING,n.NotificationName.FULLSCREEN_AVAILABLE,n.NotificationName.FULLSCREEN_CHANGE,n.NotificationName.PRESENTATION_SIZE_CHANGE,n.NotificationName.RESOURCE_PLAYING,n.NotificationName.RESOURCE_PAUSED,n.NotificationName.RESOURCE_INTERRUPTED,n.NotificationName.AD_BREAK_START,n.NotificationName.CONTENT_START,n.NotificationName.CONTENT_COMPLETE,n.NotificationName.CONTENT_SEGMENT_START,n.NotificationName.AD_BREAK_COMPLETE,n.NotificationName.CONTENT_SEGMENT_END,n.NotificationName.AD_TIME_UPDATE,n.NotificationName.CONTENT_TIME_UPDATE,n.NotificationName.TEXT_TRACK_AVAILABLE,n.NotificationName.TEXT_TRACK_DISPLAY_MODE_CHANGE,n.NotificationName.VIDEO_LOAD_START,n.NotificationName.VIDEO_LOAD_COMPLETE,n.NotificationName.LANGUAGE_CHANGE,n.NotificationName.READY]},y.prototype.setPlayState=function(e){var t=l.PlaybackState[e],r=this.enums.PlayState[t];null!=r&&this.ui.setPlayState(r)},Object.defineProperty(y.prototype,"ui",{get:function(){return this.viewControl},enumerable:!1,configurable:!0}),y.prototype.hVisibilityEvent=function(e){if(!this.getModel(a.ModelName.PresentationState).isCurrentVideoAd){var t=this.enums.ControlEvent,r=null;switch(e.type){case t.BEFORE_CONTROLS_VISIBLE:this.updateControlsVisible(!0),r=n.NotificationName.BEFORE_CONTROLS_VISIBLE;break;case t.CONTROLS_VISIBLE:r=n.NotificationName.CONTROLS_VISIBLE;break;case t.BEFORE_CONTROLS_HIDDEN:r=n.NotificationName.BEFORE_CONTROLS_HIDDEN;break;case t.CONTROLS_HIDDEN:this.updateControlsVisible(!1),r=n.NotificationName.CONTROLS_HIDDEN}r&&this.sendNotification(r)}},y.prototype.hActionEvent=function(e){var t=e.data.action,r=null,i=null;switch(t){case"mute":r=n.NotificationName.MUTE;break;case"unmute":r=n.NotificationName.UNMUTE;break;case"volume":r=n.NotificationName.VOLUME_CHANGE,i={value:e.data.value};break;case"pause":r=n.NotificationName.PAUSE;break;case"stop":r=n.NotificationName.STOP;break;case"play":r=n.NotificationName.PLAY;break;case"posterClick":r=n.NotificationName.PLAY_ON_USER_GESTURE;break;case"ccEnabled":case"ccDisabled":var o="ccEnabled"===t;this.activateCaptions(o);break;case"seek":r=n.NotificationName.SEEK,i={value:e.data.value};break;case"seekForward":r=n.NotificationName.SEEK_FORWARD,i={value:e.data.value||this.increment};break;case"seekBack":r=n.NotificationName.SEEK_BACK,i={value:e.data.value||this.increment};break;case"enterFullscreen":r=n.NotificationName.ENTER_FULLSCREEN_REQUEST;break;case"exitFullscreen":r=n.NotificationName.EXIT_FULLSCREEN_REQUEST;break;case"goLive":r=n.NotificationName.SEEK_TO_LIVE;break;case"settings":r=n.NotificationName.USER_SETTINGS_REQUEST}r&&this.sendNotification(r,i,c.NotificationType.UI)},y.prototype.doCaptionCheckOnControlVisChange=function(){this.ui.isStandardView()&&this.ccAvail&&this.sendNotification(n.NotificationName.TT_OFFSET_REQUEST,{controlsVisible:this.controlsVisible},c.NotificationType.UI)},y.prototype.updateControlsVisible=function(e){this.controlsVisible=e,this.doCaptionCheckOnControlVisChange()},y.prototype.hGestureEvent=function(e){var t;this.getModel(a.ModelName.PresentationState).isCurrentVideoAd||(t=e.type===this.enums.ControlEvent.MOUSE_ENTER_PRESENTATION?n.NotificationName.MOUSE_ENTER_PRESENTATION:n.NotificationName.MOUSE_LEAVE_PRESENTATION,this.sendNotification(t,null,c.NotificationType.UI))},y.prototype.activateCaptions=function(e){this.ccEnabled=e,this.sendNotification(n.NotificationName.SWITCH_TEXT_MODE,{value:e},c.NotificationType.UI)},y.prototype.isFullScreenAvailable=function(){return this.fsMediator&&this.fsMediator.isFullScreenPermitted()},Object.defineProperty(y.prototype,"fsMediator",{get:function(){return this.fsm||(this.fsm=this.facade.retrieveMediator(o.MediatorName.FULLSCREEN)),this.fsm},enumerable:!1,configurable:!0}),y.prototype.init=function(){for(var t=this,e=this.enums.ControlEvent,r=this.controlNames,i=function(e){return t.hVisibilityEvent(e)},o=function(e){return t.hGestureEvent(e)},a=[e.BEFORE_CONTROLS_VISIBLE,e.CONTROLS_VISIBLE,e.BEFORE_CONTROLS_HIDDEN,e.CONTROLS_HIDDEN],n=a.length;n--;)this.ui.on(a[n],i);this.ui.on(e.ACTION,function(e){return t.hActionEvent(e)}),this.ui.on(e.MOUSE_ENTER_PRESENTATION,o),this.ui.on(e.MOUSE_LEAVE_PRESENTATION,o),this.ui.disableControl(r.CC_TOGGLE),this.disableFullscreen(),this.ui.setVolume(.35),this.ui.setVideoMode(p.VideoMode.IDLE),this.log(s.LogLevel.INFO,"UI created.")},y);function y(e,t){var r=i.call(this,e,t)||this;return r.seekRedirectPending=!1,r.ccEnabled=!1,r.ccAvail=!1,r.fullScreenAccessRestricted=!1,r.increment=10,r.isPlayingLive=!1,r.controlsVisible=!1,r}r.UiMediator=f},{"../enum/LogLevel":107,"../enum/MediatorName":109,"../enum/ModelName":111,"../enum/NotificationName":114,"../enum/NotificationType":115,"../enum/PlaybackState":119,"../enum/ProxyName":123,"../enum/StreamType":126,"../enum/VideoMode":128,"./LogAwareMediator":235}],239:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.UserKeyCommandMediator=void 0;var i,o=e("../enum/NotificationName"),a=e("./AbstractKeyCommandMediator"),n=e("../app/AppResources"),s=(i=a.AbstractKeyCommandMediator,_(c,i),c.prototype.hKeyUp=function(e){var t=this.getCommand(e);t&&this.sendNotification(o.NotificationName.USER_KEY_COMMAND,{action:t.action})},c.prototype.hKeyDown=function(e){},c.prototype.onRegister=function(){i.prototype.onRegister.call(this);for(var e=n.AppResources.userKeyCmdDefs,t=e.length;t--;)this.registerCommandDef(e[t])},c);function c(e){return i.call(this,e)||this}r.UserKeyCommandMediator=s},{"../app/AppResources":47,"../enum/NotificationName":114,"./AbstractKeyCommandMediator":226}]},{},[89])(89)})}();